(this["webpackJsonpgemma-grafcet"]=this["webpackJsonpgemma-grafcet"]||[]).push([[0],{196:function(e,t,n){},209:function(e){e.exports=JSON.parse('{"graph":{"data":{"signals":[]},"key":"974eba16-1fe9-475d-8397-3404576de851"},"nodes":[{"key":"21f30a2e-a675-4a17-b0c3-daa33d180e1c","name":"A family","x":0,"y":0,"width":600,"height":500,"isHidden":false,"data":{"family":"A","description":"","type":"CONTAINER","isInitial":false}},{"key":"2de0549b-c54a-4322-8a79-08c76ae7fbda","name":"A3","x":192,"y":449,"width":45.94791793823242,"height":48.333335876464844,"isHidden":false,"data":{"family":"A","description":"","type":"SIMPLE","isInitial":false}},{"key":"450f943f-5aa7-4bb0-91c0-abd0e5854141","name":"F family","x":600,"y":0,"width":600,"height":1000,"isHidden":false,"data":{"family":"F","description":"","type":"CONTAINER","isInitial":false}},{"key":"52f27ca5-8199-44fc-815a-5f1e3fc83578","name":"A5","x":58,"y":341,"width":45.94791793823242,"height":48.333335876464844,"isHidden":false,"data":{"family":"A","description":"","type":"SIMPLE","isInitial":false}},{"key":"58a905a8-890b-412d-a613-038ae20add86","name":"D1","x":39,"y":860,"width":46.84375,"height":48.333335876464844,"isHidden":false,"data":{"family":"D","description":"","type":"SIMPLE","isInitial":false}},{"key":"7457381a-b488-4ec3-b132-049f720069f3","name":"D3","x":355,"y":671,"width":58.84375,"height":48.333335876464844,"isHidden":false,"data":{"family":"D","description":"","type":"ENCLOSING","isInitial":false}},{"key":"7b6c7700-56ef-4b63-aa66-dfb88170db89","name":"A2","x":389,"y":372,"width":45.94791793823242,"height":48.333335876464844,"isHidden":false,"data":{"family":"A","description":"","type":"SIMPLE","isInitial":false}},{"key":"9f895780-0ceb-4ed6-9863-028811918437","name":"F4","x":798,"y":6,"width":55.4375,"height":48.333335876464844,"isHidden":false,"data":{"family":"F","description":"","type":"ENCLOSING","isInitial":false}},{"key":"aaea99e9-0881-4dd7-aac8-09c1ce6dd760","name":"A1","x":466,"y":112,"width":45.94791793823242,"height":48.333335876464844,"isHidden":false,"data":{"family":"A","description":"","type":"SIMPLE","isInitial":false}},{"key":"ad073171-d695-4b1e-aaae-97561f2acae1","name":"A4","x":275,"y":329,"width":45.94791793823242,"height":48.333335876464844,"isHidden":false,"data":{"family":"A","description":"","type":"SIMPLE","isInitial":false}},{"key":"ae3c5488-36c0-4e98-9f5f-0f365fcd184d","name":"A6","x":100,"y":83,"width":58.94791793823242,"height":61.333335876464844,"isHidden":false,"data":{"family":"A","description":"","type":"SIMPLE","isInitial":true}},{"key":"ca1cff46-22ff-4142-ae56-5abb929d3b0d","name":"A7","x":275,"y":224,"width":45.94791793823242,"height":47.333335876464844,"isHidden":false,"data":{"family":"A","description":"","type":"MACRO","isInitial":false}},{"key":"d12d759c-4474-4179-aa22-bf97bd53aad8","name":"D family","x":0,"y":500,"width":600,"height":500,"isHidden":false,"data":{"family":"D","description":"","type":"CONTAINER","isInitial":false}},{"key":"d1bb9a1c-431b-419b-af5f-a99d8a18e3ff","name":"F3","x":796,"y":307,"width":43.4375,"height":47.333335876464844,"isHidden":false,"data":{"family":"F","description":"","type":"MACRO","isInitial":false}},{"key":"dd219618-a957-444e-a225-ee09f608986a","name":"F2","x":721,"y":358,"width":43.4375,"height":47.333335876464844,"isHidden":false,"data":{"family":"F","description":"","type":"MACRO","isInitial":false}},{"key":"eb5afa83-af7e-4485-bb6e-9b2657818cdc","name":"F1","x":902,"y":730,"width":43.4375,"height":47.333335876464844,"isHidden":false,"data":{"family":"F","description":"","type":"MACRO","isInitial":false}},{"key":"ebe20cb0-e745-47b0-8070-b37d5fd8ab83","name":"F6","x":893,"y":922,"width":55.4375,"height":48.333335876464844,"isHidden":false,"data":{"family":"F","description":"","type":"ENCLOSING","isInitial":false}},{"key":"fce58c90-2e21-407d-9675-b315136ad849","name":"D2","x":99,"y":537,"width":46.84375,"height":48.333335876464844,"isHidden":false,"data":{"family":"D","description":"","type":"SIMPLE","isInitial":false}},{"key":"ffdd1a3c-8ffb-44ca-ba2b-0c02d8faaa86","name":"F5","x":1015,"y":214,"width":43.4375,"height":47.333335876464844,"isHidden":false,"data":{"family":"F","description":"","type":"MACRO","isInitial":false}}],"connections":[{"from":"2de0549b-c54a-4322-8a79-08c76ae7fbda","to":"ad073171-d695-4b1e-aaae-97561f2acae1","data":{"conditionExpression":"","priority":1,"isNegated":false},"isHidden":false,"innerPoints":[{"x":217,"y":430.8333435058594},{"x":217,"y":352.5}]},{"from":"450f943f-5aa7-4bb0-91c0-abd0e5854141","to":"58a905a8-890b-412d-a613-038ae20add86","data":{"conditionExpression":"","priority":1,"isNegated":false},"isHidden":false,"innerPoints":[{"x":650,"y":917.8333740234375},{"x":152,"y":915.8333740234375}]},{"from":"52f27ca5-8199-44fc-815a-5f1e3fc83578","to":"ae3c5488-36c0-4e98-9f5f-0f365fcd184d","data":{"conditionExpression":"","priority":1,"isNegated":false},"isHidden":false,"innerPoints":[{"x":71,"y":316.5},{"x":72,"y":113.5}]},{"from":"52f27ca5-8199-44fc-815a-5f1e3fc83578","to":"ca1cff46-22ff-4142-ae56-5abb929d3b0d","data":{"conditionExpression":"","priority":2,"isNegated":false},"isHidden":false,"innerPoints":[{"x":87,"y":317.5},{"x":86,"y":247.5},{"x":223,"y":247.8333339691162}]},{"from":"58a905a8-890b-412d-a613-038ae20add86","to":"52f27ca5-8199-44fc-815a-5f1e3fc83578","data":{"conditionExpression":"","priority":1,"isNegated":false},"isHidden":false,"innerPoints":[{"x":71,"y":829.5},{"x":66,"y":415.5}]},{"from":"58a905a8-890b-412d-a613-038ae20add86","to":"fce58c90-2e21-407d-9675-b315136ad849","data":{"conditionExpression":"","priority":2,"isNegated":false},"isHidden":false,"innerPoints":[{"x":113,"y":832.5},{"x":112,"y":609.1666870117188}]},{"from":"7457381a-b488-4ec3-b132-049f720069f3","to":"2de0549b-c54a-4322-8a79-08c76ae7fbda","data":{"conditionExpression":"","priority":2,"isNegated":false},"isHidden":false,"innerPoints":[{"x":366,"y":650.1666870117188},{"x":312,"y":650.1666870117188},{"x":313,"y":569.1666870117188},{"x":216,"y":569.1666870117188}]},{"from":"7457381a-b488-4ec3-b132-049f720069f3","to":"7b6c7700-56ef-4b63-aa66-dfb88170db89","data":{"conditionExpression":"","priority":1,"isNegated":false},"isHidden":false,"innerPoints":[{"x":396,"y":647.5},{"x":395,"y":444.16668701171875}]},{"from":"7b6c7700-56ef-4b63-aa66-dfb88170db89","to":"aaea99e9-0881-4dd7-aac8-09c1ce6dd760","data":{"conditionExpression":"","priority":1,"isNegated":false},"isHidden":false,"innerPoints":[{"x":412,"y":335.1666660308838},{"x":412,"y":136.5}]},{"from":"9f895780-0ceb-4ed6-9863-028811918437","to":"ae3c5488-36c0-4e98-9f5f-0f365fcd184d","data":{"conditionExpression":"","priority":1,"isNegated":false},"isHidden":false,"innerPoints":[{"x":750,"y":29.5},{"x":725,"y":29.5},{"x":74,"y":29.5},{"x":73,"y":91.5}]},{"from":"aaea99e9-0881-4dd7-aac8-09c1ce6dd760","to":"9f895780-0ceb-4ed6-9863-028811918437","data":{"conditionExpression":"","priority":1,"isNegated":false},"isHidden":false,"innerPoints":[{"x":540,"y":107.16666603088379},{"x":825,"y":107.5}]},{"from":"aaea99e9-0881-4dd7-aac8-09c1ce6dd760","to":"dd219618-a957-444e-a225-ee09f608986a","data":{"conditionExpression":"","priority":2,"isNegated":false},"isHidden":false,"innerPoints":[{"x":536,"y":159.1666717529297},{"x":742,"y":158.5}]},{"from":"aaea99e9-0881-4dd7-aac8-09c1ce6dd760","to":"eb5afa83-af7e-4485-bb6e-9b2657818cdc","data":{"conditionExpression":"","priority":3,"isNegated":false},"isHidden":false,"innerPoints":[{"x":538,"y":185.1666717529297},{"x":623,"y":185.5},{"x":624,"y":663.5},{"x":859,"y":666.1666870117188}]},{"from":"aaea99e9-0881-4dd7-aac8-09c1ce6dd760","to":"ffdd1a3c-8ffb-44ca-ba2b-0c02d8faaa86","data":{"conditionExpression":"","priority":4,"isNegated":false},"isHidden":false,"innerPoints":[{"x":538,"y":133.1666660308838},{"x":801,"y":133.5},{"x":1076,"y":132.5},{"x":1076.6666717529297,"y":231.1666717529297}]},{"from":"ad073171-d695-4b1e-aaae-97561f2acae1","to":"eb5afa83-af7e-4485-bb6e-9b2657818cdc","data":{"conditionExpression":"","priority":1,"isNegated":false},"isHidden":false,"innerPoints":[{"x":343,"y":353.5},{"x":342,"y":411.5},{"x":343,"y":473.5},{"x":573,"y":475.5},{"x":571,"y":686.1666870117188},{"x":831.6666717529297,"y":688.1666870117188}]},{"from":"ae3c5488-36c0-4e98-9f5f-0f365fcd184d","to":"aaea99e9-0881-4dd7-aac8-09c1ce6dd760","data":{"conditionExpression":"","priority":1,"isNegated":false},"isHidden":false,"innerPoints":[{"x":181,"y":115.5},{"x":421,"y":115.83333396911621}]},{"from":"ca1cff46-22ff-4142-ae56-5abb929d3b0d","to":"ad073171-d695-4b1e-aaae-97561f2acae1","data":{"conditionExpression":"","priority":1,"isNegated":false},"isHidden":false,"innerPoints":[]},{"from":"d1bb9a1c-431b-419b-af5f-a99d8a18e3ff","to":"aaea99e9-0881-4dd7-aac8-09c1ce6dd760","data":{"conditionExpression":"","priority":1,"isNegated":false},"isHidden":false,"innerPoints":[{"x":767,"y":331.5},{"x":719,"y":332.1666717529297},{"x":446,"y":332.5},{"x":445,"y":153.5}]},{"from":"dd219618-a957-444e-a225-ee09f608986a","to":"eb5afa83-af7e-4485-bb6e-9b2657818cdc","data":{"conditionExpression":"","priority":1,"isNegated":false},"isHidden":false,"innerPoints":[{"x":744,"y":423.1666717529297},{"x":744,"y":448.1666717529297},{"x":744,"y":481.1666717529297},{"x":743,"y":629.1666870117188},{"x":897,"y":630.5},{"x":897,"y":669.1666870117188}]},{"from":"eb5afa83-af7e-4485-bb6e-9b2657818cdc","to":"2de0549b-c54a-4322-8a79-08c76ae7fbda","data":{"conditionExpression":"","priority":7,"isNegated":false},"isHidden":false,"innerPoints":[{"x":876.6666717529297,"y":835.1666870117188},{"x":844.6666717529297,"y":836.1666870117188},{"x":247,"y":827.1666870117188},{"x":245,"y":523.1666870117188}]},{"from":"eb5afa83-af7e-4485-bb6e-9b2657818cdc","to":"58a905a8-890b-412d-a613-038ae20add86","data":{"conditionExpression":"","priority":1,"isNegated":true},"isHidden":false,"innerPoints":[{"x":897.6666717529297,"y":860.1666870117188},{"x":150,"y":856.5}]},{"from":"eb5afa83-af7e-4485-bb6e-9b2657818cdc","to":"7457381a-b488-4ec3-b132-049f720069f3","data":{"conditionExpression":"","priority":2,"isNegated":false},"isHidden":false,"innerPoints":[{"x":849,"y":784.8333740234375},{"x":383,"y":782.8333740234375}]},{"from":"eb5afa83-af7e-4485-bb6e-9b2657818cdc","to":"7b6c7700-56ef-4b63-aa66-dfb88170db89","data":{"conditionExpression":"","priority":3,"isNegated":false,"savedSignalsWithMemory":{"Stop":{"withMemory":true,"behaviour":"NC"}}},"isHidden":false,"innerPoints":[{"x":838,"y":756.8333740234375},{"x":806,"y":757.1666870117188},{"x":431,"y":752.8333740234375},{"x":428,"y":441.1666717529297}]},{"from":"eb5afa83-af7e-4485-bb6e-9b2657818cdc","to":"9f895780-0ceb-4ed6-9863-028811918437","data":{"conditionExpression":"","priority":4,"isNegated":false},"isHidden":false,"innerPoints":[{"x":942.6666717529297,"y":833.1666870117188},{"x":1103.6666717529297,"y":833.5},{"x":1106.6666717529297,"y":83.5},{"x":862,"y":82.5}]},{"from":"eb5afa83-af7e-4485-bb6e-9b2657818cdc","to":"d1bb9a1c-431b-419b-af5f-a99d8a18e3ff","data":{"conditionExpression":"","priority":6,"isNegated":false,"savedSignalsWithMemory":{"EmptyMachine":{"withMemory":true,"behaviour":"NO"}}},"isHidden":false,"innerPoints":[{"x":967,"y":780.8333740234375},{"x":986.6666717529297,"y":781.1666870117188},{"x":986,"y":472.1666717529297},{"x":817,"y":472.5}]},{"from":"eb5afa83-af7e-4485-bb6e-9b2657818cdc","to":"ebe20cb0-e745-47b0-8070-b37d5fd8ab83","data":{"conditionExpression":"","priority":8,"isNegated":false},"isHidden":false,"innerPoints":[{"x":923,"y":828.8333740234375}]},{"from":"eb5afa83-af7e-4485-bb6e-9b2657818cdc","to":"fce58c90-2e21-407d-9675-b315136ad849","data":{"conditionExpression":"","priority":9,"isNegated":false},"isHidden":false,"innerPoints":[{"x":862.6666717529297,"y":810.1666870117188},{"x":803.6666679382324,"y":811.8333740234375},{"x":152,"y":805.5},{"x":149,"y":608.5}]},{"from":"eb5afa83-af7e-4485-bb6e-9b2657818cdc","to":"ffdd1a3c-8ffb-44ca-ba2b-0c02d8faaa86","data":{"conditionExpression":"","priority":5,"isNegated":false},"isHidden":false,"innerPoints":[{"x":952.6666717529297,"y":802.1666870117188},{"x":1072.6666717529297,"y":803.1666870117188},{"x":1072.6666717529297,"y":669.1666870117188},{"x":1074.6666717529297,"y":258.1666717529297}]},{"from":"ebe20cb0-e745-47b0-8070-b37d5fd8ab83","to":"58a905a8-890b-412d-a613-038ae20add86","data":{"conditionExpression":"","priority":1,"isNegated":false},"isHidden":false,"innerPoints":[{"x":904,"y":987.8333740234375},{"x":764,"y":987.8333740234375},{"x":766,"y":888.1666870117188},{"x":550,"y":887.1666870117188}]},{"from":"ebe20cb0-e745-47b0-8070-b37d5fd8ab83","to":"eb5afa83-af7e-4485-bb6e-9b2657818cdc","data":{"conditionExpression":"","priority":2,"isNegated":false},"isHidden":false,"innerPoints":[{"x":935,"y":987.8333740234375},{"x":1055,"y":988.8333740234375},{"x":1055,"y":971.8333740234375},{"x":1056,"y":881.8333740234375},{"x":1057,"y":692.8333740234375},{"x":946.6666717529297,"y":692.1666870117188}]},{"from":"fce58c90-2e21-407d-9675-b315136ad849","to":"52f27ca5-8199-44fc-815a-5f1e3fc83578","data":{"conditionExpression":"","priority":1,"isNegated":false},"isHidden":false,"innerPoints":[{"x":95,"y":518.8333435058594},{"x":95,"y":417.5}]},{"from":"ffdd1a3c-8ffb-44ca-ba2b-0c02d8faaa86","to":"9f895780-0ceb-4ed6-9863-028811918437","data":{"conditionExpression":"","priority":1,"isNegated":false},"isHidden":false,"innerPoints":[{"x":980.6666717529297,"y":232.5},{"x":841,"y":232.5},{"x":841,"y":157.5},{"x":840,"y":85.5}]},{"from":"ffdd1a3c-8ffb-44ca-ba2b-0c02d8faaa86","to":"eb5afa83-af7e-4485-bb6e-9b2657818cdc","data":{"conditionExpression":"","priority":2,"isNegated":false},"isHidden":false,"innerPoints":[{"x":980.6666717529297,"y":258.5},{"x":927.6666717529297,"y":259.1666717529297},{"x":924.6666717529297,"y":394.1666717529297}]}]}')},237:function(e,t,n){e.exports=n(326)},244:function(e,t,n){},252:function(e,t,n){},325:function(e,t,n){},326:function(e,t,n){"use strict";n.r(t);var i=n(109),a=n(99),r=n(0),o=n.n(r),s=n(25),c=n.n(s),l=n(18),u=n.n(l),d=n(26),p=n(31),f=n(17),h=n(327),y=n(383),b=n(367),m=n(366),v=n(371),g=n(368),O=n(24),x=n(19),E=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:14,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:14,a=t+n;return"M".concat(e," ").concat(t," L").concat(e-i/2," ").concat(a," L").concat(e+i/2," ").concat(a," Z")},j=Object(x.a)((function(e){var t=e.connection,n=si();if(t.isHidden&&!n.showHidden)return o.a.createElement(o.a.Fragment,null);var i,a=t.from,r=t.to,s=t.isSelected,c=function(e){var t=e.data.connectionStartPosition;if(void 0!==t){var n=t();if(void 0!==n){var i=e.x,a=e.y;return a+="top"in n?n.top:e.height-n.bottom,"left"in n?i+=n.left:a+=e.width-n.right,{x:i,y:a}}}return{x:e.x+e.width/2,y:e.y+e.height/2}}(a),l=c.x,u=c.y,d=r.x+r.width/2,p=r.y+r.height/2,h=[],y={y1:u,x1:l,x2:d,y2:p},b=function(e){var i=e.y1,a=e.x1,s=e.x2,c=e.y2,l=c-i,u=s-a,d=0,p=0;if(e.withNodeDelta)if(0===u)d=0,p=(c>i?1:-1)*r.height/2;else if(0===l)p=0,d=(s>a?1:-1)*r.width/2;else{var h=Math.abs(l/u),y=h>r.height/r.width?[r.height/2/h,r.height/2]:[r.width/2,r.width/2*h],b=Object(f.a)(y,2),m=b[0];p=(c>i?1:-1)*b[1],d=(s>a?1:-1)*m}var v=s-d,g=c-p,O=90+180*Math.atan2(c-i,s-a)/Math.PI;return o.a.createElement("path",{d:E(v,g),transform:"rotate(".concat(O," ").concat(v," ").concat(g,")"),onClick:function(e){return n.selectConnection(t)}})};return o.a.createElement(o.a.Fragment,null,o.a.createElement(o.a.Fragment,null,t.innerPoints.map((function(e,a){h.push(o.a.createElement("circle",{cx:e.x,cy:e.y,r:"1.1",fill:"black",key:"".concat(t.from.key).concat(t.to.key).concat(a),onClick:function(e){}}));var r="".concat(t.from.key).concat(t.to.key).concat(a-1).concat(a),s=o.a.createElement("path",{key:r,style:{strokeWidth:3,stroke:"black",opacity:t.isHidden?.07:1},d:"M".concat(l," ").concat(u," L").concat(e.x," ").concat(e.y),onClick:function(e){e.shiftKey||n.selectConnection(t)}});return 0===a&&(i=o.a.createElement(b,{key:r+"t",x1:l,y1:u,x2:e.x,y2:e.y,withNodeDelta:!1})),l=e.x,u=e.y,a===Math.floor(t.innerPoints.length/2-.1)?(y.x1=l,y.y1=u):a===Math.ceil(t.innerPoints.length/2-.1)&&(y.x2=l,y.y2=u),s}))),!t.isHidden&&i,o.a.createElement("path",{style:{strokeWidth:3,stroke:"black",opacity:t.isHidden?.07:1},d:"M".concat(l," ").concat(u," L").concat(d," ").concat(p),onClick:function(e){e.shiftKey?t.innerPoints.length:n.selectConnection(t)}}),!t.isHidden&&b({x1:l,y1:u,x2:d,y2:p,withNodeDelta:!0}),!t.isHidden&&h,!t.isHidden&&function(e){var i=e.y1,a=(e.x1+e.x2)/2,r=(i+e.y2)/2;return o.a.createElement(w,{connection:t,texts:t.data.connectionText,x:a,rectFill:s?"#eeedff":"#eee",y:r,onClick:function(e){return n.selectConnection(t)}})}(y))})),w=Object(x.a)((function(e){var t=e.texts,n=e.x,i=e.y,a=e.rectFill,r=void 0===a?"#eee":a,s=e.padding,c=void 0===s?3:s,l=e.onClick,u=e.connection,p=o.a.useState([]),h=Object(f.a)(p,2),y=h[0],b=h[1],m=t.reduce((function(e,t){return e+t.text}),""),v=o.a.useState(m),g=Object(f.a)(v,2),x=g[0],E=g[1],j=y.reduce((function(e,t){if(void 0===t)return e;var n=t.getBBox();return{width:e.width+n.width,height:Math.max(e.height,n.height)}}),{width:0,height:0});o.a.useEffect((function(){if(x!==m){var e=setTimeout((function(){return E(m)}),0);return function(){return clearTimeout(e)}}}));var w=0;return o.a.createElement(o.a.Fragment,null,o.a.createElement("rect",{width:j.width+2*c,height:j.height+2*c,x:n-j.width/2-c,y:i-j.height+c,fill:r,onClick:l,style:{cursor:"pointer"}}),t.map((function(e,t){var a,r,s=null===(a=y[t])||void 0===a?void 0:a.getBBox(),c=(void 0!==j?n-j.width/2:n)+w;return w+=void 0!==s?s.width:0,o.a.createElement("text",{key:"".concat(u.from.key).concat(u.to.key).concat(t),x:c,y:i+2,fill:"black",ref:function(e){if(null!==e&&void 0!==e&&!y[t]){var n=Object(O.a)(y);n[t]=e,b(n)}},onClick:l,style:Object(d.a)({cursor:"pointer"},null!==(r=e.style)&&void 0!==r?r:{})},e.text)})))})),k=(n(244),Object(x.a)((function(){var e=si(),t=Object(O.a)(e.nodes.values());return o.a.createElement("div",{style:{overflow:"auto",flex:"1",outline:"none",background:"white"},id:"canvas-scroll",tabIndex:0,onMouseMove:function(t){void 0!==e.selectedPointIndex&&document.getElementById("canvas-scroll").focus()},onKeyUp:function(t){"Escape"===t.key&&void 0!==e.selectedPointIndex&&void 0!==e.selectedConnection&&(e.selectedConnection.innerPoints.splice(e.selectedPointIndex,1),e.selectedPointIndex=void 0)}},o.a.createElement("div",{className:"canvas-wrapper",style:{background:"white"}},o.a.createElement(e.globalData.CanvasView,null),o.a.createElement("svg",{style:{width:"100%",height:"100%",position:"absolute"},id:"canvas-svg"},t.flatMap((function(e){return e.inputs})).map((function(e){return o.a.createElement(j,{connection:e,key:e.from.key+e.to.key})})))))}))),N=n(30),I=n(379),S=n(211),C=n(386),A=n(134);var R={top:!1,right:!1,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1};function D(e){return Object.entries(e).reduce((function(e,t){var n=Object(f.a)(t,2),i=n[0],a=n[1];return void 0!==a&&(e[i]=a),e}),Object(d.a)({},R))}function L(e,t,n){var i=document.createElement("a"),a=new Blob([e],{type:n});i.href=URL.createObjectURL(a),i.download=t,i.click()}function T(e){var t=e.target.files;return new Promise((function(e,n){if(null!==t&&0!==t.length){var i=t[0];if("application/json"!==i.type)return window.alert("Debes seleccionar un archivo v\xe1lido, la extensi\xf3n debe ser '.json'."),e(void 0);var a=new FileReader;a.onload=function(t){var n;e(null===(n=t.target)||void 0===n?void 0:n.result)},a.onabort=function(t){e(void 0)},a.onerror=function(t){e(void 0)},a.readAsText(i)}else e(void 0)}))}var P,M=Object(x.a)((function(){for(var e=si(),t=Object(r.useState)(void 0),n=Object(f.a)(t,2),i=n[0],a=n[1],s=Object(r.useState)(!1),c=Object(f.a)(s,2),l=c[0],u=c[1],d=Object(r.useState)(!1),p=Object(f.a)(d,2),y=p[0],b=p[1],m=Object(r.useState)(null),v=Object(f.a)(m,2),g=v[0],x=v[1],E=Object(O.a)(e.nodes.values()),j=E.reduce((function(e,t){return t.inputs.forEach((function(n){var i=e.get(n.to);void 0===i&&(i=[],e.set(n.to,i)),i.push(t)})),e}),new Map),w=[],k=new Map(E.filter((function(e){var t=0!==e.data.length;return t||w.push(e),t})).map((function(e){return[e,e.data.length]}))),I=0;0!==k.size&&w.length!==I;){var R,L=Object(N.a)(w.slice(I));try{for(L.s();!(R=L.n()).done;){var T=R.value;I+=1;var P=j.get(T);if(void 0!==P){var M,_=Object(N.a)(P);try{for(_.s();!(M=_.n()).done;){var H=M.value,z=k.get(H);1===z?(k.delete(H),w.push(H)):k.set(H,z-1)}}catch(G){_.e(G)}finally{_.f()}}}}catch(G){L.e(G)}finally{L.f()}}k.size;var V=function(){u(!l)},B=function(){b(!y)},U=function(t){return function(){"XML"!==t||null!==e.codesysVersion?(Object.values(e.globalData.warnings).some((function(e){return e.length>0}))?a(t):e.downloadSourceCode(t),V()):B()}};return o.a.createElement(A.a,{minWidth:200,defaultSize:{height:"auto",width:350},style:{position:"relative",background:"white",boxShadow:"0 1px 4px 1px #eee",border:"1px solid #eee"},enable:D({left:!0})},o.a.createElement("div",{className:"col",style:{height:"100%"}},o.a.createElement("div",{style:{borderBottom:"rgb(221 220 220) solid 1.5px"}},o.a.createElement(h.a,{onClick:V,ref:function(e){null!==e&&x(e)}},"Download Code"),o.a.createElement(S.a,{anchorEl:g,keepMounted:!0,open:l,onClose:V},o.a.createElement(C.a,{onClick:U("XML"),style:null!==e.codesysVersion?{paddingTop:"1px",paddingBottom:"1px"}:void 0},"PLCopen XML",null!==e.codesysVersion&&o.a.createElement("div",{className:"col",style:{fontSize:"0.7em",paddingLeft:"10px"}},o.a.createElement("div",null,"CodeSys version"),o.a.createElement("div",{className:"row",style:{justifyContent:"space-between"}},e.codesysVersion,o.a.createElement("button",{onClick:function(e){e.stopPropagation(),B()},style:{fontSize:"0.8em"}},"Edit")))),o.a.createElement(C.a,{onClick:U("TXT")},"Text Files")),o.a.createElement(F,{open:y,toggleDialog:B,accept:function(t){e.setCodesysVersion(t),B(),U("XML")()}}),o.a.createElement(di,{open:void 0!==i,toggleDialog:function(){return a(void 0)},warnings:e.globalData.warnings,accept:function(){return e.downloadSourceCode(i)}})),o.a.createElement("div",{style:{overflow:"auto",height:"100%",padding:"0 10px",flex:1}},o.a.createElement("pre",null,e.globalData.generateMainFile))))})),F=function(e){var t=e.open,n=e.toggleDialog,i=e.accept,a=Object(r.useState)(""),s=Object(f.a)(a,2),c=s[0],l=s[1],u=Object(r.useState)(null),d=Object(f.a)(u,2),p=d[0],O=d[1],x=Object(r.useState)(""),E=Object(f.a)(x,2),j=E[0],w=E[1],k=Object(r.useState)(t),N=Object(f.a)(k,2),S=N[0],C=N[1];Object(r.useEffect)((function(){t&&!S&&w(""),t!==S&&C(t)}),[t,S]);var A=function(e){var t=null===e.match("^[0-9]+.[0-9]+.[0-9]+.[0-9]+$");return w(t?"Should be 4 numbers separated by points, e.g. 3.5.9.40":""),t},R=function(){A(c)?null===p||void 0===p||p.focus():i(c)};return o.a.createElement(y.a,{open:t,onClose:n,keepMounted:!0,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},o.a.createElement(m.a,{id:"alert-dialog-slide-title"},"CoDeSys Version"),o.a.createElement(b.a,null,o.a.createElement(g.a,{id:"alert-dialog-slide-description"},"We require your CoDeSys version to export the project as a PLCopen XML. It can be found in the 'Help' - 'Information' toolbar menu in CoDeSys.",o.a.createElement("br",null),o.a.createElement("br",null),"Example:",o.a.createElement("br",null),"3.5.11.30 = CODESYS V3.5 SP11 Patch 3"),o.a.createElement("div",{className:"col"},o.a.createElement(I.a,{type:"text",value:c,onChange:function(e){var t=e.target.value.replace(/(\s|[a-zA-Z])/g,"");0!==j.length&&A(t),l(t)},style:{width:"180px"},label:"CoDeSys version",helperText:0!==j.length?j:"4 integers separeted by points",error:0!==j.length,inputRef:function(e){null!==e&&(e.focus(),O(e))},onKeyDown:function(e){"Enter"===e.key&&R()}}))),o.a.createElement(v.a,null,o.a.createElement(h.a,{onClick:n,color:"primary"},"Close"),o.a.createElement(h.a,{onClick:R,color:"primary"},"Continue")))},_=n(15),H=n(13),z=n(212);function V(){return(V=Object(p.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.a)("GemmaGrafcet",1,{upgrade:function(e){e.createObjectStore(P.graph,{keyPath:"key",autoIncrement:!1}),e.createObjectStore(P.node,{keyPath:"key",autoIncrement:!1}).createIndex("by-graph","graphKey"),e.createObjectStore(P.connection,{keyPath:"key",autoIncrement:!1}).createIndex("by-graph","graphKey")}});case 2:return t=e.sent,e.abrupt("return",new Ce(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return"".concat(e.from,"_").concat(e.to)}function U(e,t){return Object.assign(t,{key:B(t),graphKey:e})}!function(e){e.graph="graph",e.node="node",e.connection="connection"}(P||(P={}));var G,W,J,K,X,Y,Q,$,q,Z,ee,te,ne,ie,ae,re,oe,se,ce,le,ue,de,pe,fe,he,ye,be,me,ve,ge,Oe,xe,Ee,je,we,ke,Ne,Ie,Se,Ce=function(){function e(t){Object(_.a)(this,e),this.db=t}return Object(H.a)(e,[{key:"fetchGraphs",value:function(){return this.db.getAll(P.graph)}},{key:"updateGraph",value:function(e){return this.db.put(P.graph,e)}},{key:"deleteGraph",value:function(){var e=Object(p.a)(u.a.mark((function e(t){var n,i,a,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.db.transaction([P.graph,P.node,P.connection],"readwrite")).objectStore(P.graph).delete(t),i=Object(N.a)([P.node,P.connection]),e.prev=3,i.s();case 5:if((a=i.n()).done){e.next=19;break}return r=a.value,e.next=9,n.objectStore(r).index("by-graph").openCursor(t);case 9:o=e.sent;case 10:if(!o){e.next=17;break}return o.delete(),e.next=14,o.continue();case 14:o=e.sent,e.next=10;break;case 17:e.next=5;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(3),i.e(e.t0);case 24:return e.prev=24,i.f(),e.finish(24);case 27:return e.next=29,n.done;case 29:case"end":return e.stop()}}),e,this,[[3,21,24,27]])})));return function(t){return e.apply(this,arguments)}}()},{key:"loadGraph",value:function(){var e=Object(p.a)(u.a.mark((function e(t){var n,i,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.db.getAllFromIndex(P.node,"by-graph",t),this.db.getAllFromIndex(P.connection,"by-graph",t)]);case 2:return n=e.sent,i=Object(f.a)(n,2),a=i[0],r=i[1],e.abrupt("return",{nodes:a,connections:r});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addNodes",value:function(){var e=Object(p.a)(u.a.mark((function e(t,n){var i,a,r,o,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this.db.transaction(P.node,"readwrite"),a={graphKey:t},r=Object(N.a)(n);try{for(r.s();!(o=r.n()).done;)s=o.value,i.store.add(Object.assign(s,a))}catch(c){r.e(c)}finally{r.f()}return e.next=6,i.done;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteNode",value:function(e){return this.db.delete(P.node,e.key)}},{key:"updateNode",value:function(){var e=Object(p.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.put(P.node,Object.assign(n,{graphKey:t})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateNodes",value:function(){var e=Object(p.a)(u.a.mark((function e(t,n){var i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={graphKey:t},e.abrupt("return",this.updateMany(P.node,n.map((function(e){return e.key})),n.map((function(e){return Object.assign(e,i)}))));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addConnections",value:function(){var e=Object(p.a)(u.a.mark((function e(t,n){var i,a,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this.db.transaction(P.connection,"readwrite"),a=Object(N.a)(n);try{for(a.s();!(r=a.n()).done;)o=r.value,i.store.add(U(t,o))}catch(s){a.e(s)}finally{a.f()}return e.next=5,i.done;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteConnection",value:function(e){return this.db.delete(P.connection,B(e))}},{key:"updateConnection",value:function(){var e=Object(p.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.put(P.connection,U(t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateConnections",value:function(){var e=Object(p.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.updateMany(P.connection,n.map(B),n.map((function(e){return U(t,e)}))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"closeDB",value:function(){var e=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.db.close();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clearDB",value:function(){var e=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.db.clear(P.graph),this.db.clear(P.connection),this.db.clear(P.node)]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateMany",value:function(){var e=Object(p.a)(u.a.mark((function e(t,n,i){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.db.transaction(t,"readwrite"),e.next=3,Promise.all(i.map(function(){var e=Object(p.a)(u.a.mark((function e(t,i){var r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n[i],e.next=3,a.store.get(r);case 3:if(o=e.sent){e.next=6;break}throw new Error;case 6:return e.abrupt("return",a.store.put(Object(d.a)(Object(d.a)({},o),t)));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 3:return e.next=5,a.done;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"updateIncrementalSingle",value:function(){var e=Object(p.a)(u.a.mark((function e(t,n,i){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.db.transaction(t,"readwrite"),e.next=3,a.store.get(n);case 3:if(r=e.sent){e.next=6;break}throw new Error;case 6:return a.store.put(Object(d.a)(Object(d.a)({},r),i)),e.next=9,a.done;case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()}]),e}(),Ae=n(14),Re=n(8),De=(n(101),n(2)),Le=n(384),Te=n(210),Pe=(G=function(){function e(t,n,i,a){var r,o;Object(_.a)(this,e),this.from=t,this.to=n,this.data=void 0,Object(Ae.a)(this,"isHidden",W,this),Object(Ae.a)(this,"innerPoints",J,this),this.data=i(this,null===a||void 0===a?void 0:a.data),this.isHidden=null!==(r=null===a||void 0===a?void 0:a.isHidden)&&void 0!==r&&r,this.innerPoints=De.r.array(null!==(o=null===a||void 0===a?void 0:a.innerPoints)&&void 0!==o?o:[])}return Object(H.a)(e,[{key:"graph",get:function(){return this.from.graph}},{key:"isSelected",get:function(){return this.from.graph.selectedConnection===this}},{key:"toJson",get:function(){return{from:this.from.key,to:this.to.key,data:this.data.toJson,isHidden:this.isHidden,innerPoints:Object(O.a)(this.innerPoints.map((function(e){return Object(d.a)({},e)})))}}}]),e}(),W=Object(Re.a)(G.prototype,"isHidden",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(Re.a)(G.prototype,"isSelected",[De.h],Object.getOwnPropertyDescriptor(G.prototype,"isSelected"),G.prototype),Object(Re.a)(G.prototype,"toJson",[De.h],Object.getOwnPropertyDescriptor(G.prototype,"toJson"),G.prototype),J=Object(Re.a)(G.prototype,"innerPoints",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G),Me=(K=function(){function e(t,n){var i,a=this;Object(_.a)(this,e),this.graph=t,this.resizeObserver=void 0,this.element=void 0,Object(Ae.a)(this,"key",X,this),Object(Ae.a)(this,"name",Y,this),Object(Ae.a)(this,"x",Q,this),Object(Ae.a)(this,"y",$,this),Object(Ae.a)(this,"width",q,this),Object(Ae.a)(this,"height",Z,this),Object(Ae.a)(this,"data",ee,this),Object(Ae.a)(this,"isHidden",te,this),Object(Ae.a)(this,"inputs",ne,this),Object(Ae.a)(this,"outputs",ie,this),Object(Ae.a)(this,"move",ae,this),Object(Ae.a)(this,"setSize",re,this),Object(Ae.a)(this,"setName",oe,this),this.setElement=function(e){a.setSize(e.getBoundingClientRect()),a.element!==e&&(void 0!==a.resizeObserver&&a.resizeObserver.disconnect(),a.element=e,a.resizeObserver=new Te.a((function(t,n){a.setSize(e.getBoundingClientRect())})),a.resizeObserver.observe(e))},this.key=n.key,this.name=n.name,this.x=n.x,this.y=n.y,this.isHidden=null!==(i=n.isHidden)&&void 0!==i&&i,this.data=n.dataBuilder(this,n.data)}return Object(H.a)(e,[{key:"addInput",value:function(e){this.inputs.push(e),e.from.outputs.push(e)}},{key:"addOutput",value:function(e){this.outputs.push(e),e.to.inputs.push(e)}},{key:"inputNodes",get:function(){return this.inputs.map((function(e){return e.from}))}},{key:"outputNodes",get:function(){return this.outputs.map((function(e){return e.to}))}},{key:"toJson",get:function(){return{key:this.key,name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,isHidden:this.isHidden,data:this.data.toJson}}}]),e}(),X=Object(Re.a)(K.prototype,"key",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=Object(Re.a)(K.prototype,"name",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=Object(Re.a)(K.prototype,"x",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=Object(Re.a)(K.prototype,"y",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=Object(Re.a)(K.prototype,"width",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),Z=Object(Re.a)(K.prototype,"height",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),ee=Object(Re.a)(K.prototype,"data",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=Object(Re.a)(K.prototype,"isHidden",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=Object(Re.a)(K.prototype,"inputs",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return De.r.array()}}),Object(Re.a)(K.prototype,"inputNodes",[De.h],Object.getOwnPropertyDescriptor(K.prototype,"inputNodes"),K.prototype),ie=Object(Re.a)(K.prototype,"outputs",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return De.r.array()}}),Object(Re.a)(K.prototype,"outputNodes",[De.h],Object.getOwnPropertyDescriptor(K.prototype,"outputNodes"),K.prototype),Object(Re.a)(K.prototype,"addInput",[De.g],Object.getOwnPropertyDescriptor(K.prototype,"addInput"),K.prototype),Object(Re.a)(K.prototype,"addOutput",[De.g],Object.getOwnPropertyDescriptor(K.prototype,"addOutput"),K.prototype),ae=Object(Re.a)(K.prototype,"move",[De.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){e.x+=t,e.y+=n}}}),re=Object(Re.a)(K.prototype,"setSize",[De.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.width=t.width,e.height=t.height}}}),oe=Object(Re.a)(K.prototype,"setName",[De.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.name=t}}}),Object(Re.a)(K.prototype,"toJson",[De.h],Object.getOwnPropertyDescriptor(K.prototype,"toJson"),K.prototype),K),Fe=n(202),_e=n.n(Fe),He=(se=function(){function e(t){var n,i,a,r,o,s,c=this;Object(_.a)(this,e),this.key=void 0,this.builders=void 0,this.hideOnDelete=void 0,this.globalData=void 0,this.db=void 0,Object(Ae.a)(this,"resetStore",ce,this),Object(Ae.a)(this,"nodes",le,this),Object(Ae.a)(this,"selectedNode",ue,this),Object(Ae.a)(this,"selectedConnection",de,this),Object(Ae.a)(this,"selectedPointIndex",pe,this),Object(Ae.a)(this,"mouseMoveEvent",fe,this),Object(Ae.a)(this,"selectingInputFor",he,this),Object(Ae.a)(this,"showHidden",ye,this),Object(Ae.a)(this,"codesysVersion",be,this),Object(Ae.a)(this,"setCodesysVersion",me,this),Object(Ae.a)(this,"selectNode",ve,this),Object(Ae.a)(this,"selectConnection",ge,this),Object(Ae.a)(this,"addNode",Oe,this),Object(Ae.a)(this,"removeNode",xe,this),Object(Ae.a)(this,"activateNode",Ee,this),Object(Ae.a)(this,"removeConnection",je,this),Object(Ae.a)(this,"activateConnection",we,this),Object(Ae.a)(this,"selectingInput",ke,this),Object(Ae.a)(this,"assignInput",Ne,this),Object(Ae.a)(this,"_selectingInputKeyListener",Ie,this),Object(Ae.a)(this,"addConnection",Se,this),this.saveModel=Object(p.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(O.a)(c.nodes.entries()),e.next=3,c.db.clearDB();case 3:return e.next=5,Promise.all([c.db.updateGraph(c.toJson),c.db.addNodes(c.key,t.map((function(e){var t=Object(f.a)(e,2);t[0];return t[1].toJson}))),c.db.addConnections(c.key,t.flatMap((function(e){var t=Object(f.a)(e,2);t[0];return t[1].outputs})).map((function(e){return e.toJson})))]);case 5:case"end":return e.stop()}}),e)}))),this.downloadModel=function(){var e=Object(O.a)(c.nodes.entries()),t={graph:c.toJson,nodes:e.map((function(e){var t=Object(f.a)(e,2);t[0];return t[1].toJson})),connections:e.flatMap((function(e){var t=Object(f.a)(e,2);t[0];return t[1].outputs})).map((function(e){return e.toJson}))};return L(JSON.stringify(t),"gemma-model.json","application/json"),t},this.downloadSourceCode=function(){var e=Object(p.a)(u.a.mark((function e(t){var n,i,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("TXT"!==t){e.next=11;break}return n=function e(t,n){var i,a=t.folder(n.name),r=Object(N.a)(n.items);try{for(r.s();!(i=r.n()).done;){i.value.when({file:function(e){return a.file(e.name,e.content)},dir:function(t){return e(a,t)}})}}catch(o){r.e(o)}finally{r.f()}},i=new _e.a,a=c.globalData.generateSourceCode,n(i,a),e.next=7,i.generateAsync({type:"blob"});case 7:L(e.sent,"gemma-grafcet-source-code.zip","application/zip"),e.next=12;break;case 11:"XML"===t&&L(c.globalData.generateProjectInFormat(t),"gemma-grafcet-source-code.xml","application/xml");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.db=t.db,this.builders=t.builders,this.hideOnDelete=null!==(n=t.hideOnDelete)&&void 0!==n&&n,this.globalData=t.builders.graphBuilder(this,null===(i=t.json)||void 0===i?void 0:i.graph.data),this.key=null!==(a=null===(r=t.json)||void 0===r?void 0:r.graph.key)&&void 0!==a?a:Object(Le.a)();var l=null===(o=t.json)||void 0===o?void 0:o.nodes.reduce((function(e,n){var i=new Me(c,Object(d.a)(Object(d.a)({},n),{},{dataBuilder:t.builders.nodeBuilder}));return e[n.key]=i,e}),{});if(this.nodes=De.r.map(null!==l&&void 0!==l?l:{}),null===(s=t.json)||void 0===s||s.connections.forEach((function(e){var t=c.nodes.get(e.from),n=c.nodes.get(e.to);void 0!==t&&void 0!==n&&c.addConnection(t,n,e)})),0!==this.nodes.size)if(this.selectedNode=this.nodes.values().next().value,0!==this.selectedNode.outputs.length)this.selectedConnection=this.selectedNode.outputs[0];else if(0!==this.selectedNode.inputs.length)this.selectedConnection=this.selectedNode.inputs[0];else{var h,y=Object(N.a)(this.nodes.values());try{for(y.s();!(h=y.n()).done;){var b=h.value;if(0!==b.outputs.length){this.selectedConnection=b.outputs[0];break}}}catch(m){y.e(m)}finally{y.f()}}void 0!==this.globalData.initState&&this.globalData.initState(),document.addEventListener("mousemove",(function(e){c.mouseMoveEvent=e})),Object(De.t)((function(e){return{selectedPointIndex:c.selectedPointIndex,mouseMoveEvent:c.mouseMoveEvent}}),(function(e){if(void 0!==e.mouseMoveEvent&&void 0!==e.selectedPointIndex&&void 0!==c.selectedConnection){var t=document.getElementsByClassName("canvas-wrapper")[0].getBoundingClientRect(),n=e.mouseMoveEvent.clientX-t.left,i=e.mouseMoveEvent.clientY-t.top;c.selectedConnection.innerPoints[e.selectedPointIndex]={x:n,y:i}}}))}return Object(H.a)(e,[{key:"toJson",get:function(){return{data:this.globalData.toJson,key:this.key}}}]),e}(),ce=Object(Re.a)(se.prototype,"resetStore",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),le=Object(Re.a)(se.prototype,"nodes",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=Object(Re.a)(se.prototype,"selectedNode",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=Object(Re.a)(se.prototype,"selectedConnection",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=Object(Re.a)(se.prototype,"selectedPointIndex",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=Object(Re.a)(se.prototype,"mouseMoveEvent",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=Object(Re.a)(se.prototype,"selectingInputFor",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye=Object(Re.a)(se.prototype,"showHidden",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),be=Object(Re.a)(se.prototype,"codesysVersion",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return localStorage.getItem("codesysVersion")}}),me=Object(Re.a)(se.prototype,"setCodesysVersion",[De.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){localStorage.setItem("codesysVersion",t),e.codesysVersion=t}}}),ve=Object(Re.a)(se.prototype,"selectNode",[De.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.selectedNode=t}}}),ge=Object(Re.a)(se.prototype,"selectConnection",[De.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.selectedConnection=t}}}),Oe=Object(Re.a)(se.prototype,"addNode",[De.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){if(e.globalData.canAddNode(t)){var i,a,r=new Me(e,{dataBuilder:e.builders.nodeBuilder,key:Object(Le.a)(),name:t,x:null!==(i=null===n||void 0===n?void 0:n.x)&&void 0!==i?i:100,y:null!==(a=null===n||void 0===n?void 0:n.y)&&void 0!==a?a:100,data:{type:t}});return e.nodes.set(r.key,r),r}}}}),xe=Object(Re.a)(se.prototype,"removeNode",[De.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){if(e.hideOnDelete){t.isHidden=!0;var n,i=Object(N.a)(t.inputs);try{for(i.s();!(n=i.n()).done;){n.value.isHidden=!0}}catch(p){i.e(p)}finally{i.f()}var a,r=Object(N.a)(t.outputs);try{for(r.s();!(a=r.n()).done;){a.value.isHidden=!0}}catch(p){r.e(p)}finally{r.f()}}else if(t===e.selectedNode&&(e.selectedNode=void 0),e.nodes.delete(t.key)){var o,s=Object(N.a)(t.inputs);try{for(s.s();!(o=s.n()).done;){var c=o.value;c.from.outputs.remove(c)}}catch(p){s.e(p)}finally{s.f()}var l,u=Object(N.a)(t.outputs);try{for(u.s();!(l=u.n()).done;){var d=l.value;d.to.inputs.remove(d)}}catch(p){u.e(p)}finally{u.f()}}}}}),Ee=Object(Re.a)(se.prototype,"activateNode",[De.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(e){e.isHidden=!1;var t,n=Object(N.a)(e.inputs);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.from.isHidden||(i.isHidden=!1)}}catch(s){n.e(s)}finally{n.f()}var a,r=Object(N.a)(e.outputs);try{for(r.s();!(a=r.n()).done;){var o=a.value;o.to.isHidden||(o.isHidden=!1)}}catch(s){r.e(s)}finally{r.f()}}}}),je=Object(Re.a)(se.prototype,"removeConnection",[De.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.hideOnDelete?t.isHidden=!0:(t===e.selectedConnection&&(e.selectedConnection=void 0),t.from.outputs.remove(t),t.to.inputs.remove(t))}}}),we=Object(Re.a)(se.prototype,"activateConnection",[De.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(e){e.from.isHidden||e.to.isHidden||(e.isHidden=!1)}}}),ke=Object(Re.a)(se.prototype,"selectingInput",[De.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.selectingInputFor=t,window.addEventListener("keyup",e._selectingInputKeyListener)}}}),Ne=Object(Re.a)(se.prototype,"assignInput",[De.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=new Pe(e.selectingInputFor,t,e.builders.connectionBuilder);return n.from.addOutput(n),e.selectingInputFor=void 0,e.selectedConnection=n,window.removeEventListener("keyup",e._selectingInputKeyListener),n}}}),Ie=Object(Re.a)(se.prototype,"_selectingInputKeyListener",[De.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){"Escape"===t.key&&(e.selectingInputFor=void 0,window.removeEventListener("keyup",e._selectingInputKeyListener))}}}),Se=Object(Re.a)(se.prototype,"addConnection",[De.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n,i){var a=new Pe(t,n,e.builders.connectionBuilder,i);return a.from.addOutput(a),a}}}),Object(Re.a)(se.prototype,"toJson",[De.h],Object.getOwnPropertyDescriptor(se.prototype,"toJson"),se.prototype),se),ze=n(92),Ve=n(93);function Be(){var e=Object(ze.a)(["\n  padding-bottom: 10px;\n  thead {\n    font-size: 1.1em;\n    font-weight: bolder;\n    tr td:last-child {\n      padding: 4px 0px 4px 10px;\n    }\n  }\n  tr td {\n    padding: 0;\n  }\n  tr td:first-child {\n    padding-right: 15px;\n    height: 32px;\n  }\n  tr td:last-child {\n    margin: auto auto;\n    padding-left: 10px;\n    text-align: center;\n    display: flex;\n    justify-content: center;\n    align-self: center;\n  }\n"]);return Be=function(){return e},e}var Ue=Object(x.a)((function(e){var t=e.children;return o.a.createElement(We,null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("td",null,"Property"),o.a.createElement("td",null,"Value"))),o.a.createElement("tbody",null,t))})),Ge=Object(x.a)((function(e){var t=e.self,n=si();return o.a.createElement("div",{className:"col"},o.a.createElement(Ue,null,Object.entries(t.data.spec).map((function(e){var n,i=Object(f.a)(e,2),a=i[0],r=i[1];return o.a.createElement("tr",{key:a},o.a.createElement("td",null,null!==(n=r.label)&&void 0!==n?n:a),o.a.createElement("td",null,o.a.createElement(r.plotField,{name:a,model:t.data})))}))),o.a.createElement("div",{style:{margin:"0 3px"}},0!==t.data.nInputs&&o.a.createElement("div",{className:"row",key:"inputs",style:{alignItems:"center"}},o.a.createElement("h4",{style:{margin:"3px 0 5px 0",width:"90px"}},"Inputs:"),o.a.createElement("div",{style:{flex:1}},t.inputs.map((function(e){return o.a.createElement(h.a,{onClick:function(){return n.selectConnection(e)},key:e.from.key,variant:"outlined",size:"small",style:{minWidth:"39px"}},e.from.name)})),0===t.inputs.length&&"No inputs")),o.a.createElement("div",{className:"row",key:"outputs",style:{alignItems:"center"}},o.a.createElement("h4",{style:{margin:"3px 0 5px 0",width:"90px"}},"Outputs:"),o.a.createElement("div",{style:{flex:1}},t.outputs.map((function(e){return o.a.createElement(h.a,{onClick:function(){return n.selectConnection(e)},key:e.to.key,variant:"outlined",size:"small",style:{minWidth:"39px"}},e.to.name)})),0===t.outputs.length&&"No outputs"))))})),We=Ve.a.table(Be()),Je=n(328),Ke=n(80),Xe=(n(252),Object(x.a)((function(){var e,t=si();if(null!=t.selectedNode){var n=t.selectedNode,i=t.selectedConnection;e=o.a.createElement("div",{style:{overflow:"auto",maxHeight:"100%",maxWidth:"100%",justifyContent:"space-around",backgroundColor:"#fafafa",display:"flex"},className:"row"},o.a.createElement("div",{className:"properties-view",key:"node-properties",id:"node-properties"},o.a.createElement("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"}},o.a.createElement("h3",{style:{margin:"5px 0px 10px 5px"}},"Step: ".concat(n.name)),o.a.createElement(Je.a,{onClick:function(e){n.isHidden?t.activateNode(n):t.removeNode(n)}},o.a.createElement(Ke.a,{icon:n.isHidden?"eye":"eye-slash",color:"#000"}))),o.a.createElement(Ge,{self:t.selectedNode})),o.a.createElement("div",{className:"properties-view",key:"connection-properties",id:"connection-properties"},void 0!==i&&o.a.createElement("div",{className:"col"},o.a.createElement("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"}},o.a.createElement("h3",{style:{margin:"5px 0 10px 5px"}},"Transition: ".concat(i.from.name," -> ").concat(i.to.name)),o.a.createElement(Je.a,{onClick:function(e){i.isHidden?t.activateConnection(i):t.removeConnection(i)}},o.a.createElement(Ke.a,{icon:i.isHidden?"eye":"eye-slash",color:"#000"}))),o.a.createElement(i.data.ConnectionView,null))),o.a.createElement("div",{style:{minWidth:"270px"},className:"properties-view",key:"graph-properties",id:"graph-properties"},o.a.createElement(t.globalData.View,null)))}else e=o.a.createElement("div",{style:{width:"150px"},className:"row"},o.a.createElement("div",{style:{width:"150px"},className:"center"},"Not selected"));return o.a.createElement(A.a,{minHeight:200,defaultSize:{height:295,width:"auto"},style:{position:"relative",background:"white",boxShadow:"0 1px 4px 1px #eee",border:"1px solid #eee"},enable:D({top:!0})},e)}))),Ye=n(32),Qe=function(){function e(t){Object(_.a)(this,e),this.text=t}return Object(H.a)(e,[{key:"toString",value:function(){return this.text}}]),e}(),$e=n(372),qe=n(381),Ze=n(38);function et(){var e=Object(ze.a)(["\n  min-height: 38px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]);return et=function(){return e},e}var tt,nt,it,at,rt,ot,st=Ve.a.div(et()),ct=function e(t){var n=this;if(Object(_.a)(this,e),this.choices=void 0,this.default=void 0,this.onChange=void 0,this.label=void 0,this.isObservableMap=function(){return"function"===typeof n.choices.keys&&"number"===typeof n.choices.size&&Symbol.toStringTag in n.choices},this.mobxProp=function(){return void 0!==n.default?Ze.a.optional(Ze.a.string,n.default):Ze.a.string},this.plotField=Object(x.a)((function(e){var t,i=e.name,a=e.model;return t=n.isObservableMap()?Array.from(n.choices.keys()):Object.keys(n.choices),o.a.createElement(lt,{value:a[i],setValue:function(e){a[i]=e,void 0!==n.onChange&&n.onChange(e)},keys:t})})),this.choices=t.choices,this.default=t.default,this.label=t.label,this.onChange=t.onChange,this.isObservableMap()&&null===this.choices.get(this.default))throw Error("")},lt=function(e){var t=e.keys,n=e.value,i=e.setValue,a=e.maxButton;return t.length>(null!==a&&void 0!==a?a:3)?o.a.createElement(qe.a,{value:n,onChange:function(e){i(e.target.value)},autoWidth:!0,style:{minHeight:"35px",marginBottom:"3px"},disabled:t.length<=1},t.map((function(e){return o.a.createElement(C.a,{key:e,value:e},e)}))):o.a.createElement(st,null,o.a.createElement($e.a,{size:"small",color:"primary","aria-label":"outlined primary button group"},t.map((function(e){var t=e===n?{background:"#3f51b5",color:"white"}:{};return o.a.createElement(h.a,{key:e,onClick:function(){i(e)},style:t},e)}))))},ut=n(373),dt=function e(t){var n,i=this;if(Object(_.a)(this,e),this.default=void 0,this.maxLength=void 0,this.minLength=void 0,this.multiline=void 0,this.mobxProp=function(){return void 0!==i.default?Ze.a.optional(Ze.a.string,i.default):Ze.a.string},this.plotField=Object(x.a)((function(e){var t=e.name,n=e.model,a=o.a.useState(n[t]),r=Object(f.a)(a,2),s=r[0],c=r[1],l=n.errors,u=function(e){var a=e.target.value;c(a),void 0!==i.maxLength&&a.length>i.maxLength?l.set(t,"Max length exceded."):void 0!==i.minLength&&a.length<i.minLength?l.set(t,"Min length exceded."):(l.delete(t),n[t]=a)};return i.multiline?o.a.createElement("textarea",{key:t,className:"multiline-input",value:s,onChange:u}):o.a.createElement(I.a,{key:t,value:s,fullWidth:!0,margin:"dense",inputProps:{style:{textAlign:"center"}},error:void 0!==l.get(t),style:{width:"140px"},onChange:u})})),this.default=t.default,this.maxLength=t.maxLength,this.minLength=t.minLength,this.multiline=null!==(n=t.multiline)&&void 0!==n&&n,"string"===typeof this.default){if(void 0!==this.minLength&&this.default.length<this.minLength)throw Error("");if(void 0!==this.maxLength&&this.default.length>this.maxLength)throw Error("")}},pt=function e(t){var n=this;Object(_.a)(this,e),this.default=void 0,this.required=void 0,this.label=void 0,this.mobxProp=function(){return void 0===n.default?Ze.a.boolean:Ze.a.optional(Ze.a.boolean,n.default)},this.plotField=Object(x.a)((function(e){var t=e.name,n=e.model;return o.a.createElement(ut.a,{checked:n[t],onChange:function(){n[t]=!n[t]},color:"primary"})})),this.label=t.label,this.default=t.default,this.required=void 0===t.required||t.required};!function(e){e.ENCLOSING="ENCLOSING",e.MACRO="MACRO",e.SIMPLE="SIMPLE",e.CONTAINER="CONTAINER"}(rt||(rt={})),function(e){e.F="F",e.D="D",e.A="A"}(ot||(ot={}));var ft=(tt=function(){function e(t,n){var i,a,r,s,c=this;Object(_.a)(this,e),this.node=t,Object(Ae.a)(this,"type",nt,this),this.nInputs=Number.POSITIVE_INFINITY,this.errors=De.r.map(),Object(Ae.a)(this,"isInitial",it,this),Object(Ae.a)(this,"family",at,this),this.connectionStartPosition=function(){if(c.type===rt.CONTAINER)return{bottom:40,left:50}},this.spec={isInitial:new pt({label:"Initial",default:!1,required:!0}),type:new ct({label:"Type",default:rt.SIMPLE,choices:(s=Object.values(rt).filter((function(e){return e!==rt.CONTAINER})),s.reduce((function(e,t){return e[t.toString()]=t,e}),{}))})},this.View=Object(x.a)((function(e){var t,n=e.children,i=(t={},Object(Ye.a)(t,ot.A,"#ecf5ff"),Object(Ye.a)(t,ot.D,"#ffd6d6"),Object(Ye.a)(t,ot.F,"#ebffec"),t);if(c.type===rt.CONTAINER)return o.a.createElement("div",{style:{position:"relative",border:"1px solid #eee",background:i[c.family],flex:1,width:400,height:400}},n);var a={},r={padding:"12px"},s=function(e){return e};c.isInitial&&(s=function(e){return o.a.createElement("div",{style:{padding:"5px"}},o.a.createElement("div",{style:{border:"1.5px solid"}},e))});var l=c.node.height-2-(c.isInitial?12:0);switch(c.type){case rt.ENCLOSING:return a={padding:"0 0",display:"flex"},s(o.a.createElement("div",{style:Object(d.a)(Object(d.a)({},a),{},{position:"relative"})},o.a.createElement(ht,{left:!0,nodeHeight:l}),o.a.createElement("div",{style:Object(d.a)(Object(d.a)({},r),{},{padding:"12px 18px"})},c.node.name),o.a.createElement(ht,{left:!1,nodeHeight:l})));case rt.MACRO:a={padding:"5px 0"},r={borderTop:"1.5px solid",borderBottom:"1.5px solid",borderRight:"0",borderLeft:"0",padding:"5px 12px"}}return s(o.a.createElement("div",{style:a},o.a.createElement("div",{style:r},c.node.name)))})),this.family=null!==(i=null===n||void 0===n?void 0:n.family)&&void 0!==i?i:ot.F,this.isInitial=null!==(a=null===n||void 0===n?void 0:n.isInitial)&&void 0!==a&&a,this.type=null!==(r=null===n||void 0===n?void 0:n.type)&&void 0!==r?r:rt.SIMPLE,Object(De.t)((function(e){return c.isInitial}),(function(e,t){if(e){var n=c.automationSystem.steps.find((function(e){return e.isInitial&&e!==c}));void 0!==n&&(n.isInitial=!1)}}))}return Object(H.a)(e,[{key:"isValidInput",value:function(e){return this.node.inputNodes.every((function(t){return t.data!==e.data}))}},{key:"name",get:function(){return this.node.name}},{key:"parent",get:function(){if(this.type!==rt.CONTAINER){switch(this.family){case ot.A:return this.automationSystem.aFamily;case ot.D:return this.automationSystem.dFamily;case ot.F:return this.automationSystem.fFamily}throw new Error("")}}},{key:"key",get:function(){return this.node.key}},{key:"automationSystem",get:function(){return this.node.graph.globalData}},{key:"_transitions",get:function(){return this.node.outputs.filter((function(e){return!e.isHidden})).map((function(e){return e.data})).sort((function(e,t){return e.priority-t.priority}))}},{key:"innerTransitionsLength",get:function(){return this._transitions.length}},{key:"transitions",get:function(){return this===this.automationSystem.fFamily.data?this._transitions:this.family===ot.F?this.automationSystem.fFamily.data.transitions.concat(this._transitions):this._transitions}},{key:"id",get:function(){if(2===this.name.length){var e;switch(this.family){case ot.A:e=0;break;case ot.F:e=7;break;case ot.D:e=13}return e+Number.parseInt(this.name[1])}return 0}},{key:"toJson",get:function(){return{family:this.family,type:this.type,isInitial:this.isInitial}}}]),e}(),nt=Object(Re.a)(tt.prototype,"type",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(Re.a)(tt.prototype,"name",[De.h],Object.getOwnPropertyDescriptor(tt.prototype,"name"),tt.prototype),it=Object(Re.a)(tt.prototype,"isInitial",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),at=Object(Re.a)(tt.prototype,"family",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(Re.a)(tt.prototype,"parent",[De.h],Object.getOwnPropertyDescriptor(tt.prototype,"parent"),tt.prototype),Object(Re.a)(tt.prototype,"_transitions",[De.h],Object.getOwnPropertyDescriptor(tt.prototype,"_transitions"),tt.prototype),Object(Re.a)(tt.prototype,"innerTransitionsLength",[De.h],Object.getOwnPropertyDescriptor(tt.prototype,"innerTransitionsLength"),tt.prototype),Object(Re.a)(tt.prototype,"transitions",[De.h],Object.getOwnPropertyDescriptor(tt.prototype,"transitions"),tt.prototype),Object(Re.a)(tt.prototype,"id",[De.h],Object.getOwnPropertyDescriptor(tt.prototype,"id"),tt.prototype),Object(Re.a)(tt.prototype,"toJson",[De.h],Object.getOwnPropertyDescriptor(tt.prototype,"toJson"),tt.prototype),tt),ht=function(e){var t=e.nodeHeight,n=e.left;return o.a.createElement("svg",{style:{width:"10px",height:t+"px",position:"absolute",right:n?void 0:0}},o.a.createElement("path",{d:n?"M 10 0 L 0 ".concat(t/2," L 10 ").concat(t):"M 0 0 L 10 ".concat(t/2," L 0 ").concat(t),stroke:"black",fill:"transparent"}))},yt=function e(){Object(_.a)(this,e)};yt.textOrEmpty=function(e,t){return e?t:""};var bt=function(e){return"_".concat(e.from.name,"_").concat(e.priority,"_MEM")},mt=function(e){return e.expressionTokens.map((function(t){var n,i,a=Object(f.a)(t,2),r=a[0];a[1];if(r instanceof Qe)return null!==(n=null===(i=e.savedSignalsWithMemory.get(r.text))||void 0===i?void 0:i.withMemory)&&void 0!==n&&n?r.text+bt(e):isNaN(Number.parseFloat(r.text))?"GVL."+r.text:r.text;if(!e.connection.graph.globalData.generatingXML)return r;switch(r){case"<":return"&lt;";case">":return"&gt;";case"<=":return"&lt;=";case">=":return"&gt;=";case"<>":return"&lt;&gt;";default:return r}})).join(" ")},vt=function(e){return function(e,t){var n=t.isNested;return"".concat(e.map((function(e,t){return"\n".concat(0===t?"IF":"ELSIF"," ").concat(mt(e)," THEN\n  State:=").concat(e.to.id,";  ").concat(n?"\n  Entry:=TRUE;":"")})).join("\n")).concat(0===e.length?"":"\nEND_IF")}(e.transitions,{isNested:!1})},gt=function(e){var t=e.transitions;return"\n".concat(function(e){return"IF Entry THEN\n  ".concat(e.name,"(Initialization:=ENTRY);\n  Entry:=FALSE;\n").concat(e.transitions.flatMap((function(e){return e.signalsWithMemory.map((function(t){return"  ".concat(t.value).concat(bt(e)," := ").concat("NO"===t.behaviour?"FALSE":"TRUE",";")}))})).join("\n"),"\nEND_IF\n").concat(e.name,"(Initialization:=ENTRY);")}(e),"\n\n").concat(t.map((function(n,i){var a=mt(n);return function(n,i){var a=t.length-e.innerTransitionsLength<=i;switch(e.type){case rt.MACRO:return a&&!n.isNegated;case rt.ENCLOSING:return a&&n.isNegated}throw new Error("")}(n,i)&&(a=0===a.trim().length?"".concat(e.name,".Complete"):"(".concat(a,") AND ").concat(e.name,".Complete")),"".concat(0===i?"IF":"ELSIF"," ").concat(a," THEN\n  State:=").concat(n.to.id,";\n  Entry:=TRUE;\n")})).join("\n")).concat(yt.textOrEmpty(0!==t.length,"\nEND_IF"))},Ot=function(e){return"\n".concat(function(e){var t;return"// Variable declaration\nVAR\n".concat(e.steps.filter((function(e){return e.type===rt.ENCLOSING||e.type===rt.MACRO})).map((function(e){return"  ".concat(e.name,":").concat(e.name,"_FB;")})).join("\n"),"\n").concat(e.steps.filter((function(e){return e.type===rt.ENCLOSING||e.type===rt.MACRO})).flatMap((function(e){return e.transitions})).flatMap((function(e){return e.signalsWithMemory.map((function(t){var n="NO"===t.behaviour?"FALSE":"TRUE";return"  ".concat(t.value).concat(bt(e),":BOOL:=").concat(n,";")}))})).join("    \n"),"\n\n  State:UINT:=").concat(null===(t=e.initialStep)||void 0===t?void 0:t.id,";\n  Entry:BOOL:=TRUE;\nEND_VAR    \n")}(e),"\n").concat(xt(e),"\n")},xt=function(e){return"\n// Program behavior\nCASE State OF\n  ".concat(e.steps.map((function(e){return"\n  ".concat(e.id,": //State ").concat(e.name,"\n    ").concat(function(){switch(e.type){case rt.SIMPLE:return vt(e);case rt.ENCLOSING:case rt.MACRO:return gt(e);default:throw new Error("")}}().replace(/\n/g,"\n    "),"\n  ")})).join("\n"),"\nEND_CASE\n\n").concat(e.steps.filter((function(e){return e.type===rt.ENCLOSING||e.type===rt.MACRO})).flatMap((function(e){return e.transitions})).flatMap((function(e){return e.signalsWithMemory.map((function(t){var n="NC"===t.behaviour?"NOT ":"",i="NO"===t.behaviour?"TRUE":"FALSE";return"IF State = ".concat(e.from.id," AND ").concat(n,"GVL.").concat(t.value," THEN\n  ").concat(t.value).concat(bt(e)," := ").concat(i,";\nEND_IF\n")}))})).join("\n"),"\n")},Et=n(382),jt=n(29),wt=n(28),kt=n(156),Nt=n(94),It=n(89),St=n(56),Ct=n(107),At=n(50),Rt=n(42),Dt=function(e){Object(jt.a)(n,e);var t=Object(wt.a)(n);function n(e){var i;return Object(_.a)(this,n),(i=t.call(this,e))._interp=new Ct.LexerATNSimulator(n._ATN,Object(Nt.a)(i)),i}return Object(H.a)(n,[{key:"vocabulary",get:function(){return n.VOCABULARY}}]),Object(H.a)(n,[{key:"grammarFileName",get:function(){return"SimpleBoolean.g4"}},{key:"ruleNames",get:function(){return n.ruleNames}},{key:"serializedATN",get:function(){return n._serializedATN}},{key:"channelNames",get:function(){return n.channelNames}},{key:"modeNames",get:function(){return n.modeNames}}],[{key:"_ATN",get:function(){return n.__ATN||(n.__ATN=(new It.ATNDeserializer).deserialize(Rt.toCharArray(n._serializedATN))),n.__ATN}}]),n}(St.Lexer);Dt.AND=1,Dt.OR=2,Dt.NOT=3,Dt.TRUE=4,Dt.FALSE=5,Dt.GT=6,Dt.GE=7,Dt.LT=8,Dt.DIF=9,Dt.LE=10,Dt.EQ=11,Dt.LPAREN=12,Dt.RPAREN=13,Dt.DECIMAL=14,Dt.IDENTIFIER=15,Dt.WS=16,Dt.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"],Dt.modeNames=["DEFAULT_MODE"],Dt.ruleNames=["AND","OR","NOT","TRUE","FALSE","GT","GE","LT","DIF","LE","EQ","LPAREN","RPAREN","DECIMAL","IDENTIFIER","WS"],Dt._LITERAL_NAMES=[void 0,"'AND'","'OR'","'NOT'","'TRUE'","'FALSE'","'>'","'>='","'<'","'<>'","'<='","'='","'('","')'"],Dt._SYMBOLIC_NAMES=[void 0,"AND","OR","NOT","TRUE","FALSE","GT","GE","LT","DIF","LE","EQ","LPAREN","RPAREN","DECIMAL","IDENTIFIER","WS"],Dt.VOCABULARY=new At.VocabularyImpl(Dt._LITERAL_NAMES,Dt._SYMBOLIC_NAMES,[]),Dt._serializedATN='\x03\uc91d\ucaba\u058d\uafba\u4f53\u0607\uea8b\uc241\x02\x12j\b\x01\x04\x02\t\x02\x04\x03\t\x03\x04\x04\t\x04\x04\x05\t\x05\x04\x06\t\x06\x04\x07\t\x07\x04\b\t\b\x04\t\t\t\x04\n\t\n\x04\v\t\v\x04\f\t\f\x04\r\t\r\x04\x0e\t\x0e\x04\x0f\t\x0f\x04\x10\t\x10\x04\x11\t\x11\x03\x02\x03\x02\x03\x02\x03\x02\x03\x03\x03\x03\x03\x03\x03\x04\x03\x04\x03\x04\x03\x04\x03\x05\x03\x05\x03\x05\x03\x05\x03\x05\x03\x06\x03\x06\x03\x06\x03\x06\x03\x06\x03\x06\x03\x07\x03\x07\x03\b\x03\b\x03\b\x03\t\x03\t\x03\n\x03\n\x03\n\x03\v\x03\v\x03\v\x03\f\x03\f\x03\r\x03\r\x03\x0e\x03\x0e\x03\x0f\x05\x0fN\n\x0f\x03\x0f\x06\x0fQ\n\x0f\r\x0f\x0e\x0fR\x03\x0f\x03\x0f\x06\x0fW\n\x0f\r\x0f\x0e\x0fX\x05\x0f[\n\x0f\x03\x10\x03\x10\x07\x10_\n\x10\f\x10\x0e\x10b\v\x10\x03\x11\x06\x11e\n\x11\r\x11\x0e\x11f\x03\x11\x03\x11\x02\x02\x02\x12\x03\x02\x03\x05\x02\x04\x07\x02\x05\t\x02\x06\v\x02\x07\r\x02\b\x0f\x02\t\x11\x02\n\x13\x02\v\x15\x02\f\x17\x02\r\x19\x02\x0e\x1b\x02\x0f\x1d\x02\x10\x1f\x02\x11!\x02\x12\x03\x02\x06\x03\x022;\x05\x02C\\aac|\x06\x022;C\\aac|\x05\x02\v\f\x0e\x0f""\x02o\x02\x03\x03\x02\x02\x02\x02\x05\x03\x02\x02\x02\x02\x07\x03\x02\x02\x02\x02\t\x03\x02\x02\x02\x02\v\x03\x02\x02\x02\x02\r\x03\x02\x02\x02\x02\x0f\x03\x02\x02\x02\x02\x11\x03\x02\x02\x02\x02\x13\x03\x02\x02\x02\x02\x15\x03\x02\x02\x02\x02\x17\x03\x02\x02\x02\x02\x19\x03\x02\x02\x02\x02\x1b\x03\x02\x02\x02\x02\x1d\x03\x02\x02\x02\x02\x1f\x03\x02\x02\x02\x02!\x03\x02\x02\x02\x03#\x03\x02\x02\x02\x05\'\x03\x02\x02\x02\x07*\x03\x02\x02\x02\t.\x03\x02\x02\x02\v3\x03\x02\x02\x02\r9\x03\x02\x02\x02\x0f;\x03\x02\x02\x02\x11>\x03\x02\x02\x02\x13@\x03\x02\x02\x02\x15C\x03\x02\x02\x02\x17F\x03\x02\x02\x02\x19H\x03\x02\x02\x02\x1bJ\x03\x02\x02\x02\x1dM\x03\x02\x02\x02\x1f\\\x03\x02\x02\x02!d\x03\x02\x02\x02#$\x07C\x02\x02$%\x07P\x02\x02%&\x07F\x02\x02&\x04\x03\x02\x02\x02\'(\x07Q\x02\x02()\x07T\x02\x02)\x06\x03\x02\x02\x02*+\x07P\x02\x02+,\x07Q\x02\x02,-\x07V\x02\x02-\b\x03\x02\x02\x02./\x07V\x02\x02/0\x07T\x02\x0201\x07W\x02\x0212\x07G\x02\x022\n\x03\x02\x02\x0234\x07H\x02\x0245\x07C\x02\x0256\x07N\x02\x0267\x07U\x02\x0278\x07G\x02\x028\f\x03\x02\x02\x029:\x07@\x02\x02:\x0e\x03\x02\x02\x02;<\x07@\x02\x02<=\x07?\x02\x02=\x10\x03\x02\x02\x02>?\x07>\x02\x02?\x12\x03\x02\x02\x02@A\x07>\x02\x02AB\x07@\x02\x02B\x14\x03\x02\x02\x02CD\x07>\x02\x02DE\x07?\x02\x02E\x16\x03\x02\x02\x02FG\x07?\x02\x02G\x18\x03\x02\x02\x02HI\x07*\x02\x02I\x1a\x03\x02\x02\x02JK\x07+\x02\x02K\x1c\x03\x02\x02\x02LN\x07/\x02\x02ML\x03\x02\x02\x02MN\x03\x02\x02\x02NP\x03\x02\x02\x02OQ\t\x02\x02\x02PO\x03\x02\x02\x02QR\x03\x02\x02\x02RP\x03\x02\x02\x02RS\x03\x02\x02\x02SZ\x03\x02\x02\x02TV\x070\x02\x02UW\t\x02\x02\x02VU\x03\x02\x02\x02WX\x03\x02\x02\x02XV\x03\x02\x02\x02XY\x03\x02\x02\x02Y[\x03\x02\x02\x02ZT\x03\x02\x02\x02Z[\x03\x02\x02\x02[\x1e\x03\x02\x02\x02\\`\t\x03\x02\x02]_\t\x04\x02\x02^]\x03\x02\x02\x02_b\x03\x02\x02\x02`^\x03\x02\x02\x02`a\x03\x02\x02\x02a \x03\x02\x02\x02b`\x03\x02\x02\x02ce\t\x05\x02\x02dc\x03\x02\x02\x02ef\x03\x02\x02\x02fd\x03\x02\x02\x02fg\x03\x02\x02\x02gh\x03\x02\x02\x02hi\b\x11\x02\x02i"\x03\x02\x02\x02\t\x02MRXZ`f\x03\b\x02\x02',Dt.__ATN=void 0;var Lt=n(114),Tt=n(53),Pt=n(108),Mt=n(87),Ft=n(36),_t=n(88),Ht=n(40),zt=n(27),Vt=function(e){Object(jt.a)(n,e);var t=Object(wt.a)(n);function n(e){var i;return Object(_.a)(this,n),(i=t.call(this,e))._interp=new _t.ParserATNSimulator(n._ATN,Object(Nt.a)(i)),i}return Object(H.a)(n,[{key:"vocabulary",get:function(){return n.VOCABULARY}},{key:"grammarFileName",get:function(){return"SimpleBoolean.g4"}},{key:"ruleNames",get:function(){return n.ruleNames}},{key:"serializedATN",get:function(){return n._serializedATN}}]),Object(H.a)(n,[{key:"parse",value:function(){var e=new tn(this._ctx,this.state);this.enterRule(e,0,n.RULE_parse);try{this.enterOuterAlt(e,1),this.state=12,this.expression(),this.state=13,this.match(n.EOF)}catch(t){if(!(t instanceof Ht.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}},{key:"expression",value:function(){var e=new nn(this._ctx,this.state);this.enterRule(e,2,n.RULE_expression);try{switch(this.state=20,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,0,this._ctx)){case 1:e=new an(e),this.enterOuterAlt(e,1),this.state=15,e._left=this.expressionAnd(),this.state=16,this.match(n.OR),this.state=17,e._right=this.expression();break;case 2:e=new rn(e),this.enterOuterAlt(e,2),this.state=19,this.expressionAnd()}}catch(t){if(!(t instanceof Ht.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}},{key:"expressionAnd",value:function(){var e=new on(this._ctx,this.state);this.enterRule(e,4,n.RULE_expressionAnd);try{switch(this.state=27,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,1,this._ctx)){case 1:e=new sn(e),this.enterOuterAlt(e,1),this.state=22,e._left=this.expressionSimple(),this.state=23,this.match(n.AND),this.state=24,e._right=this.expressionAnd();break;case 2:e=new cn(e),this.enterOuterAlt(e,2),this.state=26,this.expressionSimple()}}catch(t){if(!(t instanceof Ht.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}},{key:"expressionSimple",value:function(){var e=new ln(this._ctx,this.state);this.enterRule(e,6,n.RULE_expressionSimple);try{switch(this.state=40,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,2,this._ctx)){case 1:e=new un(e),this.enterOuterAlt(e,1),this.state=29,this.match(n.NOT),this.state=30,this.expression();break;case 2:e=new dn(e),this.enterOuterAlt(e,2),this.state=31,e._left=this.numExpression(),this.state=32,e._op=this.comparator(),this.state=33,e._right=this.numExpression();break;case 3:e=new pn(e),this.enterOuterAlt(e,3),this.state=35,this.match(n.IDENTIFIER);break;case 4:e=new fn(e),this.enterOuterAlt(e,4),this.state=36,this.match(n.LPAREN),this.state=37,this.expression(),this.state=38,this.match(n.RPAREN)}}catch(t){if(!(t instanceof Ht.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}},{key:"numExpression",value:function(){var e=new hn(this._ctx,this.state);this.enterRule(e,8,n.RULE_numExpression);try{switch(this.state=44,this._errHandler.sync(this),this._input.LA(1)){case n.IDENTIFIER:e=new yn(e),this.enterOuterAlt(e,1),this.state=42,this.match(n.IDENTIFIER);break;case n.DECIMAL:e=new bn(e),this.enterOuterAlt(e,2),this.state=43,this.match(n.DECIMAL);break;default:throw new Pt.NoViableAltException(this)}}catch(t){if(!(t instanceof Ht.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}},{key:"comparator",value:function(){var e,t=new mn(this._ctx,this.state);this.enterRule(t,10,n.RULE_comparator);try{this.enterOuterAlt(t,1),this.state=46,0!==(-32&(e=this._input.LA(1)))||0===(1<<e&(1<<n.GT|1<<n.GE|1<<n.LT|1<<n.DIF|1<<n.LE|1<<n.EQ))?this._errHandler.recoverInline(this):(this._input.LA(1)===zt.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(i){if(!(i instanceof Ht.RecognitionException))throw i;t.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i)}finally{this.exitRule()}return t}}],[{key:"_ATN",get:function(){return n.__ATN||(n.__ATN=(new It.ATNDeserializer).deserialize(Rt.toCharArray(n._serializedATN))),n.__ATN}}]),n}(Mt.Parser);Vt.AND=1,Vt.OR=2,Vt.NOT=3,Vt.TRUE=4,Vt.FALSE=5,Vt.GT=6,Vt.GE=7,Vt.LT=8,Vt.DIF=9,Vt.LE=10,Vt.EQ=11,Vt.LPAREN=12,Vt.RPAREN=13,Vt.DECIMAL=14,Vt.IDENTIFIER=15,Vt.WS=16,Vt.RULE_parse=0,Vt.RULE_expression=1,Vt.RULE_expressionAnd=2,Vt.RULE_expressionSimple=3,Vt.RULE_numExpression=4,Vt.RULE_comparator=5,Vt.ruleNames=["parse","expression","expressionAnd","expressionSimple","numExpression","comparator"],Vt._LITERAL_NAMES=[void 0,"'AND'","'OR'","'NOT'","'TRUE'","'FALSE'","'>'","'>='","'<'","'<>'","'<='","'='","'('","')'"],Vt._SYMBOLIC_NAMES=[void 0,"AND","OR","NOT","TRUE","FALSE","GT","GE","LT","DIF","LE","EQ","LPAREN","RPAREN","DECIMAL","IDENTIFIER","WS"],Vt.VOCABULARY=new At.VocabularyImpl(Vt._LITERAL_NAMES,Vt._SYMBOLIC_NAMES,[]),Vt._serializedATN="\x03\uc91d\ucaba\u058d\uafba\u4f53\u0607\uea8b\uc241\x03\x123\x04\x02\t\x02\x04\x03\t\x03\x04\x04\t\x04\x04\x05\t\x05\x04\x06\t\x06\x04\x07\t\x07\x03\x02\x03\x02\x03\x02\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x05\x03\x17\n\x03\x03\x04\x03\x04\x03\x04\x03\x04\x03\x04\x05\x04\x1e\n\x04\x03\x05\x03\x05\x03\x05\x03\x05\x03\x05\x03\x05\x03\x05\x03\x05\x03\x05\x03\x05\x03\x05\x05\x05+\n\x05\x03\x06\x03\x06\x05\x06/\n\x06\x03\x07\x03\x07\x03\x07\x02\x02\x02\b\x02\x02\x04\x02\x06\x02\b\x02\n\x02\f\x02\x02\x03\x03\x02\b\r\x022\x02\x0e\x03\x02\x02\x02\x04\x16\x03\x02\x02\x02\x06\x1d\x03\x02\x02\x02\b*\x03\x02\x02\x02\n.\x03\x02\x02\x02\f0\x03\x02\x02\x02\x0e\x0f\x05\x04\x03\x02\x0f\x10\x07\x02\x02\x03\x10\x03\x03\x02\x02\x02\x11\x12\x05\x06\x04\x02\x12\x13\x07\x04\x02\x02\x13\x14\x05\x04\x03\x02\x14\x17\x03\x02\x02\x02\x15\x17\x05\x06\x04\x02\x16\x11\x03\x02\x02\x02\x16\x15\x03\x02\x02\x02\x17\x05\x03\x02\x02\x02\x18\x19\x05\b\x05\x02\x19\x1a\x07\x03\x02\x02\x1a\x1b\x05\x06\x04\x02\x1b\x1e\x03\x02\x02\x02\x1c\x1e\x05\b\x05\x02\x1d\x18\x03\x02\x02\x02\x1d\x1c\x03\x02\x02\x02\x1e\x07\x03\x02\x02\x02\x1f \x07\x05\x02\x02 +\x05\x04\x03\x02!\"\x05\n\x06\x02\"#\x05\f\x07\x02#$\x05\n\x06\x02$+\x03\x02\x02\x02%+\x07\x11\x02\x02&'\x07\x0e\x02\x02'(\x05\x04\x03\x02()\x07\x0f\x02\x02)+\x03\x02\x02\x02*\x1f\x03\x02\x02\x02*!\x03\x02\x02\x02*%\x03\x02\x02\x02*&\x03\x02\x02\x02+\t\x03\x02\x02\x02,/\x07\x11\x02\x02-/\x07\x10\x02\x02.,\x03\x02\x02\x02.-\x03\x02\x02\x02/\v\x03\x02\x02\x0201\t\x02\x02\x021\r\x03\x02\x02\x02\x06\x16\x1d*.",Vt.__ATN=void 0;var Bt,Ut,Gt,Wt,Jt,Kt,Xt,Yt,Qt,$t,qt,Zt,en,tn=function(e){Object(jt.a)(n,e);var t=Object(wt.a)(n);function n(e,i){return Object(_.a)(this,n),t.call(this,e,i)}return Object(H.a)(n,[{key:"expression",value:function(){return this.getRuleContext(0,nn)}},{key:"EOF",value:function(){return this.getToken(Vt.EOF,0)}}]),Object(H.a)(n,[{key:"enterRule",value:function(e){e.enterParse&&e.enterParse(this)}},{key:"exitRule",value:function(e){e.exitParse&&e.exitParse(this)}},{key:"accept",value:function(e){return e.visitParse?e.visitParse(this):e.visitChildren(this)}},{key:"ruleIndex",get:function(){return Vt.RULE_parse}}]),n}(Ft.ParserRuleContext),nn=function(e){Object(jt.a)(n,e);var t=Object(wt.a)(n);function n(e,i){return Object(_.a)(this,n),t.call(this,e,i)}return Object(H.a)(n,[{key:"copyFrom",value:function(e){Object(Lt.a)(Object(Tt.a)(n.prototype),"copyFrom",this).call(this,e)}},{key:"ruleIndex",get:function(){return Vt.RULE_expression}}]),n}(Ft.ParserRuleContext),an=function(e){Object(jt.a)(n,e);var t=Object(wt.a)(n);function n(e){var i;return Object(_.a)(this,n),(i=t.call(this,e.parent,e.invokingState))._left=void 0,i._right=void 0,i.copyFrom(e),i}return Object(H.a)(n,[{key:"OR",value:function(){return this.getToken(Vt.OR,0)}},{key:"expressionAnd",value:function(){return this.getRuleContext(0,on)}},{key:"expression",value:function(){return this.getRuleContext(0,nn)}}]),Object(H.a)(n,[{key:"enterRule",value:function(e){e.enterOrExpression&&e.enterOrExpression(this)}},{key:"exitRule",value:function(e){e.exitOrExpression&&e.exitOrExpression(this)}},{key:"accept",value:function(e){return e.visitOrExpression?e.visitOrExpression(this):e.visitChildren(this)}}]),n}(nn),rn=function(e){Object(jt.a)(n,e);var t=Object(wt.a)(n);function n(e){var i;return Object(_.a)(this,n),(i=t.call(this,e.parent,e.invokingState)).copyFrom(e),i}return Object(H.a)(n,[{key:"expressionAnd",value:function(){return this.getRuleContext(0,on)}}]),Object(H.a)(n,[{key:"enterRule",value:function(e){e.enterAndParentExpression&&e.enterAndParentExpression(this)}},{key:"exitRule",value:function(e){e.exitAndParentExpression&&e.exitAndParentExpression(this)}},{key:"accept",value:function(e){return e.visitAndParentExpression?e.visitAndParentExpression(this):e.visitChildren(this)}}]),n}(nn),on=function(e){Object(jt.a)(n,e);var t=Object(wt.a)(n);function n(e,i){return Object(_.a)(this,n),t.call(this,e,i)}return Object(H.a)(n,[{key:"copyFrom",value:function(e){Object(Lt.a)(Object(Tt.a)(n.prototype),"copyFrom",this).call(this,e)}},{key:"ruleIndex",get:function(){return Vt.RULE_expressionAnd}}]),n}(Ft.ParserRuleContext),sn=function(e){Object(jt.a)(n,e);var t=Object(wt.a)(n);function n(e){var i;return Object(_.a)(this,n),(i=t.call(this,e.parent,e.invokingState))._left=void 0,i._right=void 0,i.copyFrom(e),i}return Object(H.a)(n,[{key:"AND",value:function(){return this.getToken(Vt.AND,0)}},{key:"expressionSimple",value:function(){return this.getRuleContext(0,ln)}},{key:"expressionAnd",value:function(){return this.getRuleContext(0,on)}}]),Object(H.a)(n,[{key:"enterRule",value:function(e){e.enterAndExpression&&e.enterAndExpression(this)}},{key:"exitRule",value:function(e){e.exitAndExpression&&e.exitAndExpression(this)}},{key:"accept",value:function(e){return e.visitAndExpression?e.visitAndExpression(this):e.visitChildren(this)}}]),n}(on),cn=function(e){Object(jt.a)(n,e);var t=Object(wt.a)(n);function n(e){var i;return Object(_.a)(this,n),(i=t.call(this,e.parent,e.invokingState)).copyFrom(e),i}return Object(H.a)(n,[{key:"expressionSimple",value:function(){return this.getRuleContext(0,ln)}}]),Object(H.a)(n,[{key:"enterRule",value:function(e){e.enterSimpleExpression&&e.enterSimpleExpression(this)}},{key:"exitRule",value:function(e){e.exitSimpleExpression&&e.exitSimpleExpression(this)}},{key:"accept",value:function(e){return e.visitSimpleExpression?e.visitSimpleExpression(this):e.visitChildren(this)}}]),n}(on),ln=function(e){Object(jt.a)(n,e);var t=Object(wt.a)(n);function n(e,i){return Object(_.a)(this,n),t.call(this,e,i)}return Object(H.a)(n,[{key:"copyFrom",value:function(e){Object(Lt.a)(Object(Tt.a)(n.prototype),"copyFrom",this).call(this,e)}},{key:"ruleIndex",get:function(){return Vt.RULE_expressionSimple}}]),n}(Ft.ParserRuleContext),un=function(e){Object(jt.a)(n,e);var t=Object(wt.a)(n);function n(e){var i;return Object(_.a)(this,n),(i=t.call(this,e.parent,e.invokingState)).copyFrom(e),i}return Object(H.a)(n,[{key:"NOT",value:function(){return this.getToken(Vt.NOT,0)}},{key:"expression",value:function(){return this.getRuleContext(0,nn)}}]),Object(H.a)(n,[{key:"enterRule",value:function(e){e.enterNotExpression&&e.enterNotExpression(this)}},{key:"exitRule",value:function(e){e.exitNotExpression&&e.exitNotExpression(this)}},{key:"accept",value:function(e){return e.visitNotExpression?e.visitNotExpression(this):e.visitChildren(this)}}]),n}(ln),dn=function(e){Object(jt.a)(n,e);var t=Object(wt.a)(n);function n(e){var i;return Object(_.a)(this,n),(i=t.call(this,e.parent,e.invokingState))._left=void 0,i._op=void 0,i._right=void 0,i.copyFrom(e),i}return Object(H.a)(n,[{key:"numExpression",value:function(e){return void 0===e?this.getRuleContexts(hn):this.getRuleContext(e,hn)}},{key:"comparator",value:function(){return this.getRuleContext(0,mn)}}]),Object(H.a)(n,[{key:"enterRule",value:function(e){e.enterComparatorExpression&&e.enterComparatorExpression(this)}},{key:"exitRule",value:function(e){e.exitComparatorExpression&&e.exitComparatorExpression(this)}},{key:"accept",value:function(e){return e.visitComparatorExpression?e.visitComparatorExpression(this):e.visitChildren(this)}}]),n}(ln),pn=function(e){Object(jt.a)(n,e);var t=Object(wt.a)(n);function n(e){var i;return Object(_.a)(this,n),(i=t.call(this,e.parent,e.invokingState)).copyFrom(e),i}return Object(H.a)(n,[{key:"IDENTIFIER",value:function(){return this.getToken(Vt.IDENTIFIER,0)}}]),Object(H.a)(n,[{key:"enterRule",value:function(e){e.enterIdentifierExpression&&e.enterIdentifierExpression(this)}},{key:"exitRule",value:function(e){e.exitIdentifierExpression&&e.exitIdentifierExpression(this)}},{key:"accept",value:function(e){return e.visitIdentifierExpression?e.visitIdentifierExpression(this):e.visitChildren(this)}}]),n}(ln),fn=function(e){Object(jt.a)(n,e);var t=Object(wt.a)(n);function n(e){var i;return Object(_.a)(this,n),(i=t.call(this,e.parent,e.invokingState)).copyFrom(e),i}return Object(H.a)(n,[{key:"LPAREN",value:function(){return this.getToken(Vt.LPAREN,0)}},{key:"expression",value:function(){return this.getRuleContext(0,nn)}},{key:"RPAREN",value:function(){return this.getToken(Vt.RPAREN,0)}}]),Object(H.a)(n,[{key:"enterRule",value:function(e){e.enterParenExpression&&e.enterParenExpression(this)}},{key:"exitRule",value:function(e){e.exitParenExpression&&e.exitParenExpression(this)}},{key:"accept",value:function(e){return e.visitParenExpression?e.visitParenExpression(this):e.visitChildren(this)}}]),n}(ln),hn=function(e){Object(jt.a)(n,e);var t=Object(wt.a)(n);function n(e,i){return Object(_.a)(this,n),t.call(this,e,i)}return Object(H.a)(n,[{key:"copyFrom",value:function(e){Object(Lt.a)(Object(Tt.a)(n.prototype),"copyFrom",this).call(this,e)}},{key:"ruleIndex",get:function(){return Vt.RULE_numExpression}}]),n}(Ft.ParserRuleContext),yn=function(e){Object(jt.a)(n,e);var t=Object(wt.a)(n);function n(e){var i;return Object(_.a)(this,n),(i=t.call(this,e.parent,e.invokingState)).copyFrom(e),i}return Object(H.a)(n,[{key:"IDENTIFIER",value:function(){return this.getToken(Vt.IDENTIFIER,0)}}]),Object(H.a)(n,[{key:"enterRule",value:function(e){e.enterIdentifierNumExpression&&e.enterIdentifierNumExpression(this)}},{key:"exitRule",value:function(e){e.exitIdentifierNumExpression&&e.exitIdentifierNumExpression(this)}},{key:"accept",value:function(e){return e.visitIdentifierNumExpression?e.visitIdentifierNumExpression(this):e.visitChildren(this)}}]),n}(hn),bn=function(e){Object(jt.a)(n,e);var t=Object(wt.a)(n);function n(e){var i;return Object(_.a)(this,n),(i=t.call(this,e.parent,e.invokingState)).copyFrom(e),i}return Object(H.a)(n,[{key:"DECIMAL",value:function(){return this.getToken(Vt.DECIMAL,0)}}]),Object(H.a)(n,[{key:"enterRule",value:function(e){e.enterDecimalExpression&&e.enterDecimalExpression(this)}},{key:"exitRule",value:function(e){e.exitDecimalExpression&&e.exitDecimalExpression(this)}},{key:"accept",value:function(e){return e.visitDecimalExpression?e.visitDecimalExpression(this):e.visitChildren(this)}}]),n}(hn),mn=function(e){Object(jt.a)(n,e);var t=Object(wt.a)(n);function n(e,i){return Object(_.a)(this,n),t.call(this,e,i)}return Object(H.a)(n,[{key:"DIF",value:function(){return this.tryGetToken(Vt.DIF,0)}},{key:"GT",value:function(){return this.tryGetToken(Vt.GT,0)}},{key:"GE",value:function(){return this.tryGetToken(Vt.GE,0)}},{key:"LT",value:function(){return this.tryGetToken(Vt.LT,0)}},{key:"LE",value:function(){return this.tryGetToken(Vt.LE,0)}},{key:"EQ",value:function(){return this.tryGetToken(Vt.EQ,0)}}]),Object(H.a)(n,[{key:"enterRule",value:function(e){e.enterComparator&&e.enterComparator(this)}},{key:"exitRule",value:function(e){e.exitComparator&&e.exitComparator(this)}},{key:"accept",value:function(e){return e.visitComparator?e.visitComparator(this):e.visitChildren(this)}},{key:"ruleIndex",get:function(){return Vt.RULE_comparator}}]),n}(Ft.ParserRuleContext),vn=function(e){Object(jt.a)(n,e);var t=Object(wt.a)(n);function n(e){var i;return Object(_.a)(this,n),(i=t.call(this)).signals=e,i.isInvalid=!1,i.boolSignals=[],i}return Object(H.a)(n,[{key:"defaultResult",value:function(){return[]}},{key:"aggregateResult",value:function(e,t){return e.concat(t)}},{key:"visitErrorNode",value:function(e){return this.isInvalid?[]:(this.isInvalid=!0,["Invalid boolean expression"])}},{key:"visitIdentifierExpression",value:function(e){var t=this.signals.boolSignals.includes(e.text);return this.boolSignals.push(e),t?[]:["'".concat(e.text,"' is not a defined boolean signal")]}},{key:"visitIdentifierNumExpression",value:function(e){return this.signals.numSignals.includes(e.text)?[]:["'".concat(e.text,"' is not a defined numeric signal")]}},{key:"visitExpression",value:function(e){return void 0===e.exception||this.isInvalid?[]:(this.isInvalid=!0,["Invalid boolean expression"])}}]),n}(n(206).AbstractParseTreeVisitor),gn=n(375),On=n(374),xn=(n(196),n(385));!function(e){e.bool="bool",e.int="int",e.uint="uint",e.real="real"}(qt||(qt={})),function(e){e.bool="bool",e.sint="sint",e.int="int",e.lint="lint",e.dint="dint",e.usint="usint",e.uint="uint",e.ulint="ulint",e.udint="udint",e.real="real",e.lreal="lreal"}(Zt||(Zt={})),function(e){e.s="s",e.i="i",e.l="l",e.d="d"}(en||(en={}));var En,jn,wn,kn,Nn,In,Sn,Cn=(Bt={},Object(Ye.a)(Bt,Zt.bool,[en.i]),Object(Ye.a)(Bt,Zt.int,Object(O.a)(Object.keys(en))),Object(Ye.a)(Bt,Zt.uint,Object(O.a)(Object.keys(en))),Object(Ye.a)(Bt,Zt.real,[en.i,en.l]),Bt),An=Object(x.a)((function(e){var t=e.signal,n=e.showDelete,i=e.removeSignal;return o.a.createElement(On.a,null,o.a.createElement(gn.a,null,o.a.createElement(xn.a,{title:void 0!==t.errors.Name?t.errors.Name:""},o.a.createElement(I.a,{type:"text",value:t.name,onChange:function(e){return t.name=e.target.value.replace(/\s/g,"")},style:{width:"145px"},error:void 0!==t.errors.Name}))),o.a.createElement(gn.a,null,o.a.createElement(lt,{keys:Object.keys(qt),setValue:function(e){return t.setTypeBase(e)},value:t.typeBase})),o.a.createElement(gn.a,null,o.a.createElement(lt,{keys:Cn[t.typeBase],setValue:function(e){return t.typeSize=e},value:t.typeSize,maxButton:0})),o.a.createElement(gn.a,null,o.a.createElement(xn.a,{title:void 0!==t.errors["Default Value"]?t.errors["Default Value"]:""},o.a.createElement(I.a,{type:t.typeBase===qt.bool?"text":"number",value:t.defaultValue,onChange:function(e){t.defaultValue=e.target.value.replace(/\s/g,"")},style:{width:"70px"},error:void 0!==t.errors["Default Value"]}))),n&&o.a.createElement(gn.a,{align:"center"},o.a.createElement(Je.a,{onClick:function(e){return i(t)},size:"small"},o.a.createElement(Ke.a,{icon:"trash-alt",color:"#000"}))))})),Rn=(Ut={},Object(Ye.a)(Ut,qt.bool,{regex:/^(TRUE|FALSE)$/,message:'should be "TRUE" or "FALSE"'}),Object(Ye.a)(Ut,qt.int,{regex:/^(-?[1-9][0-9]*|0)$/,message:"should be an integer"}),Object(Ye.a)(Ut,qt.uint,{regex:/^([1-9][0-9]*|0)$/,message:"should be a positive integer"}),Object(Ye.a)(Ut,qt.real,{regex:/^-?[0-9]*\.?[0-9]+$/,message:"should be a number"}),Ut),Dn=(Gt=De.g.bound,Wt=function(){function e(t,n){var i,a,r,o;Object(_.a)(this,e),this.automationSystem=t,Object(Ae.a)(this,"didBlur",Jt,this),Object(Ae.a)(this,"name",Kt,this),Object(Ae.a)(this,"defaultValue",Xt,this),Object(Ae.a)(this,"typeSize",Yt,this),Object(Ae.a)(this,"typeBase",Qt,this),Object(Ae.a)(this,"setTypeBase",$t,this),this.description=void 0,this.name=null!==(i=null===n||void 0===n?void 0:n.name)&&void 0!==i?i:"",this.description=null===n||void 0===n?void 0:n.description;var s=function(e){if(void 0!==e){switch(e){case Zt.bool:return{base:qt.bool,size:en.i};case Zt.real:return{base:qt.real,size:en.i};case Zt.lreal:return{base:qt.real,size:en.l}}var t,n;e.startsWith("u")?(t=qt.uint,n=1):(t=qt.int,n=0);var i=e.charAt(n);if(Object.keys(en).includes(i))return{base:t,size:i}}}(null===n||void 0===n?void 0:n.type);this.typeBase=null!==(a=null===s||void 0===s?void 0:s.base)&&void 0!==a?a:qt.bool,this.typeSize=null!==(r=null===s||void 0===s?void 0:s.size)&&void 0!==r?r:en.i,this.defaultValue=null!==(o=null===n||void 0===n?void 0:n.defaultValue)&&void 0!==o?o:""}return Object(H.a)(e,[{key:"type",get:function(){if(this.typeBase===qt.bool)return Zt.bool;var e=this.typeSize===en.i?"":this.typeSize;return this.typeBase.startsWith("u")?"u"+e+this.typeBase.substring(1):e+this.typeBase}},{key:"errors",get:function(){var e=this,t=-1!==this.automationSystem.signals.findIndex((function(t){return t.name===e.name&&e!==t}))?"Duplicate name":void 0,n=Rn[this.typeBase];return{Name:t,"Default Value":0!==this.defaultValue.length&&!n.regex.test(this.defaultValue)?n.message:void 0}}},{key:"toJson",get:function(){return{name:this.name,type:this.type,defaultValue:this.defaultValue}}}],[{key:"fromJson",value:function(t,n){return"string"===typeof n.name&&Object.keys(Zt).includes(n.type)?new e(t,n):void 0}}]),e}(),Jt=Object(Re.a)(Wt.prototype,"didBlur",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Kt=Object(Re.a)(Wt.prototype,"name",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xt=Object(Re.a)(Wt.prototype,"defaultValue",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yt=Object(Re.a)(Wt.prototype,"typeSize",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qt=Object(Re.a)(Wt.prototype,"typeBase",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(Re.a)(Wt.prototype,"type",[De.h],Object.getOwnPropertyDescriptor(Wt.prototype,"type"),Wt.prototype),$t=Object(Re.a)(Wt.prototype,"setTypeBase",[Gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.typeBase=t,Cn[t].includes(e.typeSize)||(e.typeSize=Cn[t][0])}}}),Object(Re.a)(Wt.prototype,"errors",[De.h],Object.getOwnPropertyDescriptor(Wt.prototype,"errors"),Wt.prototype),Object(Re.a)(Wt.prototype,"toJson",[De.h],Object.getOwnPropertyDescriptor(Wt.prototype,"toJson"),Wt.prototype),Wt),Ln=(En=De.g.bound,jn=function(){function e(t,n){var i,a,r,s=this;Object(_.a)(this,e),this.connection=t,Object(Ae.a)(this,"conditionExpression",wn,this),Object(Ae.a)(this,"priority",kn,this),Object(Ae.a)(this,"isNegated",Nn,this),Object(Ae.a)(this,"savedSignalsWithMemory",In,this),this.errors=De.r.map(),this.spec={conditionExpression:new dt({default:""})},Object(Ae.a)(this,"setPriority",Sn,this),this.ConnectionView=Object(x.a)((function(){var e,t;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ue,{key:"table"},o.a.createElement("tr",{key:"priority"},o.a.createElement("td",null,"Priority"),o.a.createElement("td",null,o.a.createElement(lt,{keys:s.priorityChoices,value:""+s.priorityUi,setValue:s.setPriority}))),o.a.createElement("tr",{key:"condition"},o.a.createElement("td",null,"Condition"),o.a.createElement("td",null,o.a.createElement(Pn,{m:s}))),(s.from.type===rt.MACRO||s.from.type===rt.ENCLOSING)&&o.a.createElement("tr",{key:"isNegated"},o.a.createElement("td",null,"Negated"),o.a.createElement("td",null,o.a.createElement(ut.a,{checked:s.isNegated,onChange:function(){s.isNegated=!s.isNegated},color:"primary"})))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{style:{flex:1}},o.a.createElement("h4",{style:{margin:"0"}},"Errors"),0===(null===(e=s.parsedExpression)||void 0===e?void 0:e.errors.length)&&"No errors",o.a.createElement("ul",{style:{color:"indianred",marginTop:"0",paddingLeft:"20px"},key:"errors"},null===(t=s.parsedExpression)||void 0===t?void 0:t.errors.map((function(e,t){return o.a.createElement("li",{key:t},e)})))),(s.from.type===rt.MACRO&&!s.isNegated||s.from.type===rt.ENCLOSING&&s.isNegated)&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{width:"10px"}}),o.a.createElement("div",{style:{flex:1}},o.a.createElement("h4",{key:"title",style:{margin:"0"}},"With Memory"),0===s.signalsInCondition.length&&"No signals in transition",s.signalsInCondition.map((function(e){return o.a.createElement(Tn,{key:e,token:e,map:s.savedSignalsWithMemory})}))))))})),this.conditionExpression=null!==(i=null===n||void 0===n?void 0:n.conditionExpression)&&void 0!==i?i:"",this.priority=null!==(a=null===n||void 0===n?void 0:n.priority)&&void 0!==a?a:t.from.outputs.length+1,this.isNegated=null!==(r=null===n||void 0===n?void 0:n.isNegated)&&void 0!==r&&r,this.savedSignalsWithMemory=new De.b(null===n||void 0===n?void 0:n.savedSignalsWithMemory)}return Object(H.a)(e,[{key:"priorityUi",get:function(){var e=this;return this.connection.from.data._transitions.findIndex((function(t){return t===e}))+1}},{key:"priorityChoices",get:function(){return Object(O.a)(Array(this.connection.from.data._transitions.length)).map((function(e,t){return""+(t+1)}))}}]),Object(H.a)(e,[{key:"from",get:function(){return this.connection.from.data}},{key:"to",get:function(){return this.connection.to.data}},{key:"connectionText",get:function(){var e=this.conditionExpression.substring(0,20),t=this.isNegated&&(this.from.type===rt.MACRO||this.from.type===rt.ENCLOSING);return[{text:t||this.from.type!==rt.CONTAINER&&this.connection.from.data._transitions.length>1?"".concat(this.priorityUi,": "):"",style:{textDecoration:t?"overline":void 0}},{text:" ".concat(e).concat(this.conditionExpression.length>20?"...":"")}]}},{key:"toJson",get:function(){var e={conditionExpression:this.conditionExpression,priority:this.priority,isNegated:this.isNegated};if(this.savedSignalsWithMemory.size>0){var t,n={},i=Object(N.a)(this.savedSignalsWithMemory.entries());try{for(i.s();!(t=i.n()).done;){var a=Object(f.a)(t.value,2),r=a[0],o=a[1];n[r]=Object(d.a)({},o)}}catch(s){i.e(s)}finally{i.f()}e.savedSignalsWithMemory=n}return e}},{key:"expressionTokens",get:function(){return function(e){var t,n=[],i=-1,a=0,r="",o=function(){0!==r.length&&(n.push([new Qe(r),i-r.length]),r="")},s=function(e){o(),n.push([e,i])},c=Object(N.a)(e);try{for(c.s();!(t=c.n()).done;){var l=t.value;if(i++,0===a)switch(l){case" ":o();break;case"\n":case")":case"(":case"<":if("<>"===e.substring(i,i+2)){a=1,s("<>");continue}case">":s(l);break;case"=":var u=n[n.length-1],d=u[0],p=d instanceof Qe?d.text:d;["<",">"].includes(p)&&u[1]===i-1?n[n.length-1][0]=d+"=":s(l);break;case"A":if("AND"===e.substring(i,i+3)){a=2,s("AND");continue}case"O":if("OR"===e.substring(i,i+2)){a=1,s("OR");continue}case"N":if("NOT"===e.substring(i,i+3)){a=2,s("NOT");continue}default:r+=l}else a--}}catch(f){c.e(f)}finally{c.f()}return 0!==r.length&&n.push([new Qe(r),i-r.length+1]),n}(this.conditionExpression)}},{key:"parsedExpression",get:function(){var e=this.connection.graph.globalData;try{return function(e,t){var n=kt.CharStreams.fromString(e),i=new Dt(n),a=new kt.CommonTokenStream(i),r=new Vt(a).parse(),o=new vn(t),s=o.visit(r);void 0!==r.exception&&(o.isInvalid=!0,s.push("Invalid boolean expression"));var c=Object(O.a)(r.children);if(void 0!==c&&!o.isInvalid)for(var l=function(){var e=c.pop();if(e instanceof nn&&void 0!==e.exception)return s.push("Invalid boolean expression"),"break";e.childCount>0&&(c=c.concat(Object(O.a)(Array(e.childCount).keys()).map((function(t){return e.getChild(t)}))))};0!==c.length;){if("break"===l())break}return{tree:r,errors:s,boolSignals:o.boolSignals}}(this.conditionExpression,{boolSignals:e.boolSignals.map((function(e){return e.name})),numSignals:e.numSignals.map((function(e){return e.name}))})}catch(t){}}},{key:"signalsInCondition",get:function(){var e,t=this;return e=void 0!==this.parsedExpression?this.parsedExpression.boolSignals.map((function(e){return e.text})):this.expressionTokens.map((function(e){var t=Object(f.a)(e,2),n=t[0];t[1];return n})).filter((function(e){return e instanceof Qe})).map((function(e){return e.toString()})),Object(O.a)(e.filter((function(e){return t.from.automationSystem.signals.some((function(t){return t.type===Zt.bool&&t.name===e}))})).reduce((function(e,t){return e.add(t.toString()),e}),new Set).values())}},{key:"signalsWithMemory",get:function(){var e=this;return this.signalsInCondition.filter((function(t){var n,i;return null!==(n=null===(i=e.savedSignalsWithMemory.get(t))||void 0===i?void 0:i.withMemory)&&void 0!==n&&n})).map((function(t){return{value:t,behaviour:e.savedSignalsWithMemory.get(t).behaviour}}))}}]),e}(),wn=Object(Re.a)(jn.prototype,"conditionExpression",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kn=Object(Re.a)(jn.prototype,"priority",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nn=Object(Re.a)(jn.prototype,"isNegated",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),In=Object(Re.a)(jn.prototype,"savedSignalsWithMemory",[De.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(Re.a)(jn.prototype,"priorityUi",[De.h],Object.getOwnPropertyDescriptor(jn.prototype,"priorityUi"),jn.prototype),Object(Re.a)(jn.prototype,"priorityChoices",[De.h],Object.getOwnPropertyDescriptor(jn.prototype,"priorityChoices"),jn.prototype),Sn=Object(Re.a)(jn.prototype,"setPriority",[En],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=parseInt(t);if(!e.connection.isHidden){var i=e.connection.from.outputs,a=i.filter((function(t){return t.isHidden&&t.data.priority<=e.priorityChoices.length})).sort((function(e,t){return e.data.priority-t.data.priority})).map((function(e){return e.data}));if(a.length>0){var r=1;[].concat(Object(O.a)(e.connection.from.data._transitions),Object(O.a)(a)).forEach((function(e,t){e.priority=r++}))}e.priority>n?i.filter((function(t){return t.data.priority>=n&&t.data.priority<e.priority})).forEach((function(e){return e.data.priority++})):i.filter((function(t){return t.data.priority<=n&&t.data.priority>e.priority})).forEach((function(e){return e.data.priority--})),e.priority=n}}}}),Object(Re.a)(jn.prototype,"connectionText",[De.h],Object.getOwnPropertyDescriptor(jn.prototype,"connectionText"),jn.prototype),Object(Re.a)(jn.prototype,"toJson",[De.h],Object.getOwnPropertyDescriptor(jn.prototype,"toJson"),jn.prototype),Object(Re.a)(jn.prototype,"expressionTokens",[De.h],Object.getOwnPropertyDescriptor(jn.prototype,"expressionTokens"),jn.prototype),Object(Re.a)(jn.prototype,"parsedExpression",[De.h],Object.getOwnPropertyDescriptor(jn.prototype,"parsedExpression"),jn.prototype),Object(Re.a)(jn.prototype,"signalsInCondition",[De.h],Object.getOwnPropertyDescriptor(jn.prototype,"signalsInCondition"),jn.prototype),Object(Re.a)(jn.prototype,"signalsWithMemory",[De.h],Object.getOwnPropertyDescriptor(jn.prototype,"signalsWithMemory"),jn.prototype),jn),Tn=Object(x.a)((function(e){var t,n,i=e.map,a=e.token,r=function(e){e.withMemory||"NO"!==e.behaviour?i.set(a,e):i.delete(a)},s=i.get(a),c=null!==(t=null===s||void 0===s?void 0:s.behaviour)&&void 0!==t?t:"NO",l=null!==(n=null===s||void 0===s?void 0:s.withMemory)&&void 0!==n&&n;return o.a.createElement("div",{className:"row",style:{alignItems:"center"}},o.a.createElement("div",null,o.a.createElement(Et.a,{checked:l,size:"small",color:"primary",onChange:function(){r({withMemory:!l,behaviour:c})}})),o.a.createElement("div",{style:{flex:1}},a),l&&o.a.createElement("div",{style:{paddingLeft:3,paddingRight:3}},o.a.createElement(lt,{value:c,keys:["NC","NO"],setValue:function(e){r({withMemory:l,behaviour:e})}})))})),Pn=Object(x.a)((function(e){var t=e.m,n=0,i=Object(r.useRef)(null),a="400 15px monospace";return o.a.createElement("div",{style:{width:"206px",position:"relative"},className:"center"},o.a.createElement("span",{style:{font:a,position:"absolute",top:0,padding:"3px",textAlign:"initial",whiteSpace:"pre-line"},ref:i},t.expressionTokens.map((function(e,t){var i,a=Object(f.a)(e,2),r=a[0],s=a[1];i=r instanceof Qe?"black":["AND","NOT","OR"].includes(r)?"blue":"brown";var c=" ".repeat(s-n)+r.toString();return n=s+r.toString().length,o.a.createElement("span",{key:t,style:{color:i}},c)}))),o.a.createElement("textarea",{onScroll:function(e){i.current.scrollTo(0,e.currentTarget.scrollTop)},className:"multiline-input",style:{font:a,background:"transparent",color:"transparent",caretColor:"black",position:"relative"},spellCheck:!1,value:t.conditionExpression,onChange:function(e){var n=e.currentTarget.value;null===n.match(/^\s$/)&&(t.conditionExpression=n.replace(/\s[^\S\r\n]/g," "))}}))})),Mn=n(376),Fn=n(378),_n=n(377),Hn=function(){function e(t){Object(_.a)(this,e),this.name=t}return Object(H.a)(e,[{key:"when",value:function(e){this instanceof zn?e.file(this):this instanceof Vn&&e.dir(this)}}]),e}(),zn=function(e){Object(jt.a)(n,e);var t=Object(wt.a)(n);function n(e,i){var a;return Object(_.a)(this,n),(a=t.call(this,e)).content=i,a}return n}(Hn),Vn=function(e){Object(jt.a)(n,e);var t=Object(wt.a)(n);function n(e,i){var a;return Object(_.a)(this,n),(a=t.call(this,e)).items=i,a}return n}(Hn),Bn=n(208),Un=n.n(Bn);function Gn(){var e=Object(ze.a)(["\n  z-index: 1;\n  cursor: pointer;\n  position: absolute;\n  box-shadow: 0 1px 4px 1px #eee;\n  background: #fff;\n  border-radius: 6;\n  border: 1.5px solid;\n"]);return Gn=function(){return e},e}var Wn,Jn=Ve.a.div(Gn()),Kn=Object(x.a)((function(e){var t,n,i,a,r=e.node,s=e.children,c=si(),l=void 0!==c.selectingInputFor,u=l&&c.selectingInputFor.data.isValidInput(r),d=c.selectedNode===r,p=o.a.useCallback((function(e){l?u&&c.assignInput(r):c.selectNode(r)}),[c,r,l,u]);if(r.isHidden&&!c.showHidden)return o.a.createElement(o.a.Fragment,null);var f=r.x,h=r.y,y={};return d&&(y.boxShadow="rgb(110 110 110) 1px 1.5px 3px 1px"),l&&(y.cursor=u?"pointer":"not-allowed"),r.isHidden&&(y.opacity=.1),o.a.createElement(Un.a,{disabled:!0,position:{x:f-(null!==(t=null===(n=r.data.parent)||void 0===n?void 0:n.x)&&void 0!==t?t:0),y:h-(null!==(i=null===(a=r.data.parent)||void 0===a?void 0:a.y)&&void 0!==i?i:0)},bounds:"parent"},o.a.createElement(Jn,{ref:function(e){null!==e&&r.setElement(e)},onClick:p,style:y},o.a.createElement(r.data.View,{children:s})))})),Xn=n(209),Yn=function(e){return'<variable name="'.concat(e.name,'">\n  <type>\n    <').concat(e.type.toUpperCase()," />\n  </type>\n  ").concat(e.defaultValue.length>0?'<initialValue>\n    <simpleValue value="'.concat(e.defaultValue,'" />\n  </initialValue>\n'):"","</variable>")},Qn=function(e){return'<data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">\n  <ObjectId>'.concat(e,"</ObjectId>\n</data> \n")},$n=function(e){return'<?xml version="1.0" encoding="utf-8"?>\n<project xmlns="http://www.plcopen.org/xml/tc6_0200">\n  '.concat(ei(),'\n  <instances>\n    <configurations>\n      <configuration name="Device">\n        <resource name="Application">\n          ').concat(Zn(),'\n          <globalVars name="GVL">\n            ').concat(e.signals.map(Yn).join("      \n"),'\n            <addData>\n              <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">\n                <Attributes>\n                  <Attribute Name="qualified_only" Value="" />\n                </Attributes>\n              </data>\n              ').concat(Qn("ea459247-8ebb-40c6-ae2a-b2c7106e0e22"),"\n            </addData>\n          </globalVars>\n          <addData>\n            ").concat(function(e){var t;return'<data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">\n  <pou name="GEMMA" pouType="program">\n    <interface>\n      <localVars>\n        <variable name="State">\n          <type>\n            <UINT />\n          </type>\n          <initialValue>\n            <simpleValue value="'.concat(null===(t=e.initialStep)||void 0===t?void 0:t.id,'" />\n          </initialValue>\n        </variable>\n        <variable name="Entry">\n          <type>\n            <BOOL />\n          </type>\n          <initialValue>\n            <simpleValue value="TRUE" />\n          </initialValue>\n        </variable>\n        ').concat(e.steps.filter((function(e){return e.type===rt.ENCLOSING||e.type===rt.MACRO})).map((function(e){return'          <variable name="'.concat(e.name,'">\n          <type>\n            <derived name="').concat(e.name,'_FB" />\n          </type>\n          </variable>')})).join("\n"),"\n        ").concat(e.steps.filter((function(e){return e.type===rt.ENCLOSING||e.type===rt.MACRO})).flatMap((function(e){return e.transitions})).flatMap((function(e){return e.signalsWithMemory.map((function(t){var n="NO"===t.behaviour?"FALSE":"TRUE";return'              <variable name="'.concat(t.value).concat(bt(e),'">\n              <type>\n                <BOOL />\n              </type>\n              <initialValue>\n                <simpleValue value="').concat(n,'" />\n              </initialValue>\n              </variable>')}))})).join("    \n"),'\n      </localVars>\n    </interface>\n    <body>\n      <ST>\n        <xhtml xmlns="http://www.w3.org/1999/xhtml">\n      ').concat(xt(e),"\n        </xhtml>\n      </ST>\n    </body>\n    <addData>\n      ").concat(Qn(e.key),"\n    </addData>\n  </pou>\n</data>\n")}(e),"\n            ").concat(e.steps.filter((function(e){return e.type===rt.ENCLOSING||e.type===rt.MACRO})).map((function(e){return'<data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">\n  <pou name="'.concat((t=e).name,'_FB" pouType="functionBlock">\n    <interface>\n      <inputVars>\n        <variable name="Initialization">\n          <type>\n            <BOOL />\n          </type>\n        </variable>\n      </inputVars>\n      <outputVars>\n        <variable name="Complete">\n          <type>\n            <BOOL />\n          </type>\n        </variable>\n      </outputVars>\n    </interface>\n    <body>\n      <ST>\n        <xhtml xmlns="http://www.w3.org/1999/xhtml">\n      ').concat("// FB behavior\nIF Initialization THEN\n  Complete:=FALSE;\n  // Initialization actions\n\nEND_IF\n\n// Nested behavior\n\n// Termination of the nested behavior\nComplete:=TRUE;\n","\n        </xhtml>\n      </ST>\n    </body>\n    <addData>\n      ").concat(Qn(t.key),"\n    </addData>\n  </pou>\n</data>\n");var t})).join("\n"),"\n            ").concat(ti(),"\n            ").concat(Qn("f1bdda63-82df-4380-babf-520f8e0395d3"),"\n          </addData>\n        </resource>\n        <addData>\n          ").concat(ni(e.codesysVersion),'\n          <data name="configurations" handleUnknown="discard">\n            <configurations />\n          </data>\n          ').concat(Qn("a8da5055-ba3c-41dd-853b-ad72125a9af2"),"\n        </addData>\n      </configuration>\n    </configurations>\n  </instances>\n  <addData>\n    ").concat(qn(e),"\n  </addData>\n</project>\n")},qn=function(e){return'<data name="http://www.3s-software.com/plcopenxml/projectstructure" handleUnknown="discard">\n  <ProjectStructure>\n    <Object Name="Device" ObjectId="a8da5055-ba3c-41dd-853b-ad72125a9af2">\n      <Object Name="Application" ObjectId="f1bdda63-82df-4380-babf-520f8e0395d3">\n        <Object Name="Administrador de bibliotecas" ObjectId="a13a8ff1-e760-4284-9d45-5ca949e70c2f" />\n        <Object Name="MainTask" ObjectId="8d75883b-687d-4295-b9bf-1b088a8ac6b3" />\n        <Object Name="GVL" ObjectId="ea459247-8ebb-40c6-ae2a-b2c7106e0e22" />\n        <Object Name="GEMMA" ObjectId="'.concat(e.key,'" />\n        ').concat(e.steps.filter((function(e){return e.type===rt.ENCLOSING||e.type===rt.MACRO})).map((function(e){return'<Object Name="'.concat(e.name,'" ObjectId="').concat(e.key,'" />')})).join("\n"),"\n      </Object>\n    </Object>\n  </ProjectStructure>\n</data>\n")},Zn=function(){return'<task name="MainTask" interval="PT0.02S" priority="1">\n  <pouInstance name="GEMMA" typeName="">\n    <documentation>\n      <xhtml xmlns="http://www.w3.org/1999/xhtml" />\n    </documentation>\n  </pouInstance>\n  <addData>\n    <data name="http://www.3s-software.com/plcopenxml/tasksettings" handleUnknown="implementation">\n      <TaskSettings KindOfTask="Cyclic" Interval="t#20ms" IntervalUnit="ms" WithinSPSTimeSlicing="true">\n        <Watchdog Enabled="false" TimeUnit="ms" Sensitivity="1" />\n      </TaskSettings>\n    </data>\n    <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">\n      <ObjectId>8d75883b-687d-4295-b9bf-1b088a8ac6b3</ObjectId>\n    </data>\n  </addData>\n</task>\n'},ei=function(){var e=new Date;return'<fileHeader companyName="" productName="CODESYS" productVersion="CODESYS V3.5 SP11 Patch 3" creationDateTime="'.concat(e.toISOString(),'" />\n<contentHeader name="ControlLogic.project" modificationDateTime="').concat(e.toISOString(),'">\n  <coordinateInfo>\n    <fbd>\n      <scaling x="1" y="1" />\n    </fbd>\n    <ld>\n      <scaling x="1" y="1" />\n    </ld>\n    <sfc>\n      <scaling x="1" y="1" />\n    </sfc>\n  </coordinateInfo>\n  <addData>\n    <data name="http://www.3s-software.com/plcopenxml/projectinformation" handleUnknown="implementation">\n      <ProjectInformation />\n    </data>\n  </addData>\n</contentHeader>\n<types>\n  <dataTypes />\n  <pous />\n</types>\n')},ti=function(){return'<data name="http://www.3s-software.com/plcopenxml/libraries" handleUnknown="implementation">\n  <Libraries>\n    <Library Name="#IoStandard" Namespace="IoStandard" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="true" DefaultResolution="IoStandard, 3.5.10.0 (System)" />\n    <Library Name="#3SLicense" Namespace="_3S_LICENSE" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="3SLicense, 0.0.0.0 (3S - Smart Software Solutions GmbH)" ResolverGuid="97c3b452-d9fa-4ac2-9d0c-3d420aa6d95b" />\n    <Library Name="#Standard" Namespace="Standard" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="false" LinkAllContent="false" DefaultResolution="Standard, * (System)" />\n    <Library Name="#BreakpointLogging" Namespace="BPLog" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="Breakpoint Logging Functions, 3.5.5.0 (3S - Smart Software Solutions GmbH)" />\n    <Library Name="#IecVarAccess" Namespace="IecVarAccessLibrary" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="IecVarAccess, 3.3.1.20 (System)" />\n    <addData>\n      <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">\n        <ObjectId>a13a8ff1-e760-4284-9d45-5ca949e70c2f</ObjectId>\n      </data>\n    </addData>\n  </Libraries>\n</data>\n'},ni=function(e){return'<data name="Device" handleUnknown="discard">\n  <Device xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="">\n    <DeviceType>\n      <DeviceIdentification>\n        <Type>4096</Type>\n        <Id>0000 0001</Id>\n        <Version>'.concat(null!==e&&void 0!==e?e:"3.5.11.30",'</Version>\n      </DeviceIdentification>\n      <Connector moduleType="256" interface="Common.PCI" connectorId="0">\n        <HostParameterSet />\n      </Connector>\n      <Connector moduleType="769" interface="SafetyInterface" connectorId="1">\n        <HostParameterSet />\n      </Connector>\n      <DeviceParameterSet />\n    </DeviceType>\n  </Device>\n</data>\n')},ii=(Wn=function(){function e(t,n){var i=this;Object(_.a)(this,e),this.graph=t,this.canAddNode=function(e){return!0},this.generatingXML=!1,this.fFamily=void 0,this.aFamily=void 0,this.dFamily=void 0,this.signals=void 0,this.generateProjectInFormat=function(e){i.generatingXML=!0;var t=$n(i);return i.generatingXML=!1,t},this.View=Object(x.a)((function(){var e=Object(r.useState)(!1),t=Object(f.a)(e,2),n=t[0],a=t[1];return o.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},o.a.createElement("h3",{style:{margin:"5px 0 10px 5px"}},"Signals"),o.a.createElement(h.a,{onClick:function(e){return a(!n)}},n?"Hide Delete":"Show Delete",o.a.createElement(Ke.a,{style:{paddingLeft:"7px"},icon:"trash-alt",color:"#000"}))),o.a.createElement(Mn.a,{id:"signals-table",size:"small","aria-label":"a dense table",stickyHeader:!0},o.a.createElement(_n.a,null,o.a.createElement(On.a,null,o.a.createElement(gn.a,null,"Name"),o.a.createElement(gn.a,null,"Type"),o.a.createElement(gn.a,null,"Size"),o.a.createElement(gn.a,null,"Default"),n&&o.a.createElement(gn.a,null,"Delete"))),o.a.createElement(Fn.a,null,i.signals.map((function(e,t){return o.a.createElement(An,{signal:e,key:t,showDelete:n,removeSignal:function(e){return i.signals.remove(e)}})})))),o.a.createElement(h.a,{style:{alignSelf:"flex-end"},onClick:function(e){return i.signals.push(new Dn(i))}},"Add Signal"))})),this.CanvasView=Object(x.a)((function(){var e,t=Object(O.a)(i.graph.nodes.values()),n=(e={},Object(Ye.a)(e,ot.A,{color:"#ecf5ff",size:{w:600,h:500}}),Object(Ye.a)(e,ot.D,{color:"#ffd6d6",size:{w:600,h:500}}),Object(Ye.a)(e,ot.F,{color:"#ebffec",size:{w:600,h:1e3}}),e);return o.a.createElement("div",{style:{width:"100%",height:"100%",position:"absolute",paddingRight:"15px"}},t.filter((function(e){return e.data.type===rt.CONTAINER})).map((function(e){var i,a=n[e.data.family];return o.a.createElement("div",{style:{background:a.color,width:a.size.w,height:a.size.h,position:"absolute",top:e.y,left:e.x},key:e.key,ref:function(t){null!==t&&e.setSize(t.getBoundingClientRect())}},(i=e.data.family,t.filter((function(e){return e.data.family===i&&e.data.type!==rt.CONTAINER})).map((function(e){return o.a.createElement(Kn,{node:e,key:e.key})}))))})))}));var a=[];Array.isArray(null===n||void 0===n?void 0:n.signals)&&(a=null===n||void 0===n?void 0:n.signals.map((function(e){return"object"===typeof e?Dn.fromJson(i,e):void 0})).filter((function(e){return void 0!==e}))),this.signals=De.r.array(a)}return Object(H.a)(e,[{key:"initState",value:function(){var e,t,n,i=Object(O.a)(this.graph.nodes.values()),a=i.find((function(e){return e.data.type!==rt.CONTAINER&&!e.isHidden}));void 0!==a&&this.graph.selectNode(a);var r=i.flatMap((function(e){return e.inputs})).find((function(e){return!e.isHidden}));void 0!==r&&this.graph.selectConnection(r),this.fFamily=null!==(e=i.find((function(e){return e.data.type===rt.CONTAINER&&e.data.family===ot.F})))&&void 0!==e?e:this.graph.addNode(rt.CONTAINER,{x:600,y:0}),this.fFamily.setName("F family"),this.fFamily.data.family=ot.F,this.aFamily=null!==(t=i.find((function(e){return e.data.type===rt.CONTAINER&&e.data.family===ot.A})))&&void 0!==t?t:this.graph.addNode(rt.CONTAINER,{x:0,y:0}),this.aFamily.setName("A family"),this.aFamily.data.family=ot.A,this.dFamily=null!==(n=i.find((function(e){return e.data.type===rt.CONTAINER&&e.data.family===ot.D})))&&void 0!==n?n:this.graph.addNode(rt.CONTAINER,{x:0,y:500}),this.dFamily.setName("D family"),this.dFamily.data.family=ot.D}},{key:"key",get:function(){return this.graph.key}},{key:"codesysVersion",get:function(){return this.graph.codesysVersion}},{key:"steps",get:function(){return Object(O.a)(this.graph.nodes.values()).filter((function(e){return!e.isHidden&&e.data.type!==rt.CONTAINER})).sort((function(e,t){return e.data.id-t.data.id})).map((function(e){return e.data}))}},{key:"numSignals",get:function(){return this.signals.filter((function(e){return e.type!==Zt.bool}))}},{key:"boolSignals",get:function(){return this.signals.filter((function(e){return e.type===Zt.bool}))}},{key:"initialStep",get:function(){return this.steps.find((function(e){return e.isInitial}))}},{key:"generateMainFile",get:function(){return Ot(this)}},{key:"generateSourceCode",get:function(){var e,t,n=Ot(this),i=(e=this.signals,"VAR_GLOBAL\n    ".concat(e.map((function(e){var t=0===e.defaultValue.trim().length?"":" :="+e.defaultValue;return"".concat(e.name," : ").concat(e.type.toUpperCase()).concat(t,";")})).join("\n    "),"\nEND_VAR\n")),a=[new zn("GEMMA.txt",n),new zn("GVL.txt",i)],r=Object(N.a)(this.steps.values());try{for(r.s();!(t=r.n()).done;){var o=t.value;o.type!==rt.ENCLOSING&&o.type!==rt.MACRO||a.push(new zn(o.name+"_FB.txt","".concat(function(e){return"\nFUNCTION_BLOCK ".concat(e.name,"_FB\n\n// Variable declaration\nVAR_INPUT\n  Initialization:BOOL;\nEND_VAR\n\nVAR_OUTPUT\n  Complete:BOOL;\nEND_VAR\n")}(o),"\n").concat("// FB behavior\nIF Initialization THEN\n  Complete:=FALSE;\n  // Initialization actions\n\nEND_IF\n\n// Nested behavior\n\n// Termination of the nested behavior\nComplete:=TRUE;\n","\n")))}}catch(s){r.e(s)}finally{r.f()}return new Vn("gemma_grafcet",a)}},{key:"warnings",get:function(){var e,t=new Set,n=0,i=Object(N.a)(this.signals);try{for(i.s();!(e=i.n()).done;){var a=e.value,r=""===a.name.trim();r?n++:a.errors.Name&&t.add("".concat(a.name,". Name: ").concat(a.errors.Name,".")),a.errors["Default Value"]&&t.add("".concat(r?"<UNNAMED>":a.name,". Default value: ").concat(a.errors["Default Value"],"."))}}catch(u){i.e(u)}finally{i.f()}n>0&&t.add("".concat(n," signal").concat(1===n?"":"s"," with no name."));var o=this.steps.some((function(e){return e.isInitial})),s=this.steps.filter((function(e){return!e.node.inputs.some((function(e){return!e.isHidden}))})),c=this.steps.filter((function(e){return!e.node.outputs.some((function(e){return!e.isHidden}))})),l=[];return o||l.push("No initial step."),0!==c.length&&l.push("Steps with no output transitions: ".concat(c.map((function(e){return e.name})).join(", "))),0!==s.length&&l.push("Steps with no input transitions: ".concat(s.map((function(e){return e.name})).join(", "))),{Steps:l,Transitions:this.steps.flatMap((function(e){return e._transitions})).filter((function(e){var t,n;return void 0!==(null===(t=e.parsedExpression)||void 0===t?void 0:t.errors)&&(null===(n=e.parsedExpression)||void 0===n?void 0:n.errors.length)>0})).map((function(e){var t;return["".concat(e.from.name," -> ").concat(e.to.name),null===(t=e.parsedExpression)||void 0===t?void 0:t.errors]})),Signals:Object(O.a)(t.values())}}},{key:"toJson",get:function(){return{signals:this.signals.map((function(e){return e.toJson}))}}}]),e}(),Object(Re.a)(Wn.prototype,"steps",[De.h],Object.getOwnPropertyDescriptor(Wn.prototype,"steps"),Wn.prototype),Object(Re.a)(Wn.prototype,"numSignals",[De.h],Object.getOwnPropertyDescriptor(Wn.prototype,"numSignals"),Wn.prototype),Object(Re.a)(Wn.prototype,"boolSignals",[De.h],Object.getOwnPropertyDescriptor(Wn.prototype,"boolSignals"),Wn.prototype),Object(Re.a)(Wn.prototype,"initialStep",[De.h],Object.getOwnPropertyDescriptor(Wn.prototype,"initialStep"),Wn.prototype),Object(Re.a)(Wn.prototype,"generateMainFile",[De.h],Object.getOwnPropertyDescriptor(Wn.prototype,"generateMainFile"),Wn.prototype),Object(Re.a)(Wn.prototype,"generateSourceCode",[De.h],Object.getOwnPropertyDescriptor(Wn.prototype,"generateSourceCode"),Wn.prototype),Object(Re.a)(Wn.prototype,"warnings",[De.h],Object.getOwnPropertyDescriptor(Wn.prototype,"warnings"),Wn.prototype),Object(Re.a)(Wn.prototype,"toJson",[De.h],Object.getOwnPropertyDescriptor(Wn.prototype,"toJson"),Wn.prototype),Wn),ai={graphBuilder:function(e,t){return new ii(e,t)},nodeBuilder:function(e,t){var n=void 0!==t?t.type:void 0;return"string"===typeof n&&Object.keys(rt).includes(n)?new ft(e,t):new ft(e)},connectionBuilder:function(e,t){return new Ln(e,t)}},ri=function(e){return new He({db:e,builders:ai,hideOnDelete:!0,json:Xn})},oi=o.a.createContext(null);function si(){var e=o.a.useContext(oi);if(!e)throw Error("useStore should be used inside a Store provider.");return e}function ci(){var e=o.a.useState(null),t=Object(f.a)(e,2),n=t[0],i=t[1],a=o.a.useState(null),r=Object(f.a)(a,2),s=r[0],c=r[1];window.store=s;var l=s&&s.resetStore;return o.a.useEffect((function(){s?s.resetStore&&c(null):function(){return V.apply(this,arguments)}().then(function(){var e=Object(p.a)(u.a.mark((function e(t){var n,a,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(t),e.next=3,t.fetchGraphs();case 3:if(n=e.sent,void 0===(r=n[0])){e.next=12;break}return e.next=8,t.loadGraph(r.key);case 8:o=e.sent,a=new He({db:t,json:Object(d.a)({graph:r},o),hideOnDelete:!0,builders:ai}),e.next=13;break;case 12:a=ri(t);case 13:c(a);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[s,l]),s?o.a.createElement(oi.Provider,{value:s},o.a.createElement("div",{className:"row",style:{background:"rgba(250,250,250,0.7)",height:"100%"}},o.a.createElement("div",{className:"col",style:{width:"0px",background:"rgba(250,250,250,0.7)",flex:"1 0 auto"}},o.a.createElement("div",{className:"row",style:{minHeight:0,flex:1}},o.a.createElement("div",{className:"col",style:{flex:1}},o.a.createElement(ui,{store:s,globalDB:n,setStore:c}),o.a.createElement(k,null)),o.a.createElement(M,null)),o.a.createElement(Xe,null)))):o.a.createElement("div",{className:"center"},"Loading...")}var li=Object(x.a)((function(e){var t=e.store;return o.a.createElement(h.a,{onClick:function(e){t.showHidden=!t.showHidden}},t.showHidden?"Hide Deleted":"Show Deleted")}));function ui(e){var t=e.store,n=e.setStore,i=e.globalDB,a=Object(r.useState)(!1),s=Object(f.a)(a,2),c=s[0],l=s[1],d=Object(r.useState)(!1),O=Object(f.a)(d,2),x=O[0],E=O[1],j=Object(r.useCallback)((function(){l(!c)}),[c]);return o.a.createElement("div",{className:"row",style:{justifyContent:"space-between",borderBottom:"rgb(221 220 220) solid 1.5px"}},o.a.createElement(li,{store:t}),o.a.createElement("div",{className:"row",style:{justifyContent:"flex-end"}},o.a.createElement(h.a,{onClick:function(e){t.saveModel()}},"Save"),o.a.createElement(h.a,{onClick:j},"Reset"),o.a.createElement(y.a,{open:c,onClose:j,keepMounted:!0,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},o.a.createElement(m.a,{id:"alert-dialog-slide-title"},"Reset Diagram State"),o.a.createElement(b.a,null,o.a.createElement(g.a,{id:"alert-dialog-slide-description"},"Are you sure you want to reset the diagram state? All changes will be lost.")),o.a.createElement(v.a,null,o.a.createElement(h.a,{onClick:j,color:"primary"},"Close"),o.a.createElement(h.a,{onClick:function(){var e=Object(p.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=ri(i),n(a),j();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),color:"primary"},"Reset Diagram"))),o.a.createElement(h.a,{onClick:function(e){Object.values(t.globalData.warnings).some((function(e){return e.length>0}))?E(!0):t.downloadModel()}},"Export"),o.a.createElement(di,{open:x,toggleDialog:function(){return E(!x)},warnings:t.globalData.warnings,accept:t.downloadModel}),o.a.createElement(h.a,null,o.a.createElement("label",{htmlFor:"import-file-input",style:{margin:0,width:"100%",cursor:"pointer"}},"Import"),o.a.createElement("input",{type:"file",id:"import-file-input",accept:"application/json",style:{display:"none"},onChange:function(){var e=Object(p.a)(u.a.mark((function e(t){var a,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:if("string"===typeof(a=e.sent))try{r=JSON.parse(a),o=new He({db:i,json:r,builders:ai,hideOnDelete:!0}),n(o)}catch(t){console.log(t)}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))))}var di=function(e){var t=e.open,n=e.toggleDialog,i=e.warnings,a=e.accept;return o.a.createElement(y.a,{open:t,onClose:n,keepMounted:!0,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},o.a.createElement(m.a,{id:"alert-dialog-slide-title"},"Download Diagram"),o.a.createElement(b.a,null,o.a.createElement(g.a,{id:"alert-dialog-slide-description"},"There are some warnings in the diagram configuration. Do you want to continue with the download?"),Object.entries(i).map((function(e){var t=Object(f.a)(e,2),n=t[0],i=t[1];return 0===i.length?o.a.createElement("div",{key:n}):o.a.createElement("div",{key:n,className:"warning-list"},o.a.createElement("h3",null,n),o.a.createElement("ul",null,2===i[0].length&&Array.isArray(i[0][1])?i.map((function(e,t){var n=Object(f.a)(e,2),i=n[0],a=n[1];return o.a.createElement("div",{key:i},o.a.createElement("h5",null,i),a.map((function(e,t){return o.a.createElement("li",{key:"".concat(i).concat(t)},e)})))})):i.map((function(e,t){return o.a.createElement("li",{key:"".concat(n).concat(t)},e)}))))}))),o.a.createElement(v.a,null,o.a.createElement(h.a,{onClick:n,color:"primary"},"Close"),o.a.createElement(h.a,{onClick:a,color:"primary"},"Continue")))};n(325),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.b.add(a.a,a.b,a.e,a.c,a.d),c.a.render(o.a.createElement(ci,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[237,1,2]]]);
//# sourceMappingURL=main.abaeb675.chunk.js.map