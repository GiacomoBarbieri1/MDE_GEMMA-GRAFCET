(this["webpackJsonpgemma-grafcet"]=this["webpackJsonpgemma-grafcet"]||[]).push([[0],{107:function(t,e,n){},108:function(t,e,n){"use strict";n.r(e);var i=n(44),a=n(66),r=n(0),o=n.n(r),c=n(11),l=n.n(c),u=n(21),s=n(12),p=n(25),d=n(55),h=n.n(d),b=n(26);function f(){var t=Object(p.a)(["\n  z-index: 1;\n  cursor: pointer;\n  position: absolute;\n  box-shadow: 0 1px 4px 1px #eee;\n  padding: 6px;\n  background: #fff;\n  border-radius: 6;\n  border: 1px solid #eee;\n"]);return f=function(){return t},t}var m=b.a.div(f()),g=Object(s.a)((function(t){var e=t.operation,n=ce(),i=o.a.useCallback((function(t,n){e.move(n.deltaX,n.deltaY)}),[e]),a=void 0!==n.selectingInputFor,r=a&&n.selectingInputFor.data.isValidInput(e),c=o.a.useCallback((function(t){console.log(e),a?r&&n.assignInput(e):n.selectNode(e)}),[n,e,a,r]),l=e.x,u=e.y,s=e.name;return o.a.createElement(h.a,{onDrag:i,position:{x:l,y:u},bounds:"parent"},o.a.createElement(m,{ref:function(t){null!==t&&e.setSize(t.getBoundingClientRect())},onClick:c,style:a?{cursor:r?"pointer":"not-allowed"}:void 0},"Layer ".concat(s)))})),y=n(16),v=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:14,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:14,a=e+n;return"M".concat(t," ").concat(e," L").concat(t-i/2," ").concat(a," L").concat(t+i/2," ").concat(a," Z")},O=Object(s.a)((function(t){var e,n,i=t.connection,a=ce(),r=i.from,c=i.to,l=r.x+r.width/2,u=r.y+r.height/2,s=c.x+c.width/2,p=c.y+c.height/2,d=p-u,h=s-l;if(0===h)e=0,n=(p>u?1:-1)*c.height/2;else if(0===d)n=0,e=(s>l?1:-1)*c.width/2;else{var b=Math.abs(d/h),f=b>c.height/c.width?[c.height/2/b,c.height/2]:[c.width/2,c.width/2*b],m=Object(y.a)(f,2),g=m[0];n=(p>u?1:-1)*m[1],e=(s>l?1:-1)*g}var O=s-e,E=p-n,w=(l+s)/2,x=(u+p)/2,I=90+180*Math.atan2(p-u,s-l)/Math.PI;return o.a.createElement(o.a.Fragment,null,o.a.createElement("path",{style:{strokeWidth:2,stroke:"black"},d:"M".concat(l," ").concat(u," L").concat(s," ").concat(p),onDoubleClick:function(t){a.selectConnection(i)}}),o.a.createElement(j,{text:i.data.connectionText,x:w,y:x}),o.a.createElement("path",{d:v(O,E),transform:"rotate(".concat(I," ").concat(O," ").concat(E,")")}))})),j=Object(s.a)((function(t){var e=t.text,n=t.x,i=t.y,a=t.rectFill,r=void 0===a?"#eee":a,c=t.padding,l=void 0===c?3:c,u=o.a.useState(null),s=Object(y.a)(u,2),p=s[0],d=s[1],h=o.a.useState(e),b=Object(y.a)(h,2),f=b[0],m=b[1],g=null===p||void 0===p?void 0:p.getBBox();return o.a.useEffect((function(){if(f!==e){var t=setTimeout((function(){return m(e)}),0);return function(){return clearTimeout(t)}}})),o.a.createElement(o.a.Fragment,null,void 0!==g&&o.a.createElement("rect",{width:g.width+2*l,height:g.height+2*l,x:n-g.width/2-l,y:i-g.height+l,fill:r}),o.a.createElement("text",{x:void 0!==g?n-g.width/2:n,y:i,fill:"black",ref:d},e))})),E=Object(s.a)((function(){var t=ce(),e=Object(u.a)(t.nodes.values());return o.a.createElement("div",{style:{position:"relative",border:"1px solid #eee",height:"auto",background:"#fff",margin:"10px",borderRadius:"6px",flex:1}},e.map((function(t){return console.log(t),o.a.createElement(g,{operation:t,key:t.key})})),o.a.createElement("svg",{style:{width:"100%",height:"100%"}},e.flatMap((function(t){return t.inputs})).map((function(t){return o.a.createElement(O,{connection:t,key:t.from.key+t.to.key})}))))})),w=n(65),x=n(40),I=n(47);var k={top:!1,right:!1,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1};function N(t){return Object.entries(t).reduce((function(t,e){var n=Object(y.a)(e,2),i=n[0],a=n[1];return void 0!==a&&(t[i]=a),t}),Object(I.a)({},k))}var L,S,C,z,F,T,A,D,P,M,R,_,B,V,W,G,H,K,U,Y,J,X,Z,$,q=Object(s.a)((function(){for(var t=ce(),e=Object(u.a)(t.nodes.values()),n=e.reduce((function(t,e){return e.inputs.forEach((function(n){var i=t.get(n.to);void 0===i&&(i=[],t.set(n.to,i)),i.push(e)})),t}),new Map),i=[],a=new Map(e.filter((function(t){var e=0!==t.data.length;return e||i.push(t),e})).map((function(t){return[t,t.data.length]}))),r=0;0!==a.size&&i.length!==r;){var c,l=Object(w.a)(i.slice(r));try{for(l.s();!(c=l.n()).done;){var s=c.value;r+=1;var p=n.get(s);if(void 0!==p){var d,h=Object(w.a)(p);try{for(h.s();!(d=h.n()).done;){var b=d.value,f=a.get(b);1===f?(a.delete(b),i.push(b)):a.set(b,f-1)}}catch(m){h.e(m)}finally{h.f()}}}}catch(m){l.e(m)}finally{l.f()}}return a.size,o.a.createElement(x.Resizable,{minWidth:200,defaultSize:{height:"auto",width:400},style:{position:"relative",background:"white",boxShadow:"0 1px 4px 1px #eee",border:"1px solid #eee"},enable:N({left:!0})},o.a.createElement("div",{style:{overflow:"auto",height:"100%",padding:"0 10px"}},o.a.createElement("pre",null,t.globalData.generateCode())))})),Q=n(10),tt=n(14),et=n(7),nt=(n(64),n(2)),it=n(156),at=n(37),rt=function t(e,n,i){Object(tt.a)(this,t),this.from=e,this.to=n,this.data=void 0,this.data=i(this)},ot=(L=function(){function t(e,n){Object(tt.a)(this,t),this.graph=e,Object(Q.a)(this,"key",S,this),Object(Q.a)(this,"name",C,this),Object(Q.a)(this,"x",z,this),Object(Q.a)(this,"y",F,this),Object(Q.a)(this,"width",T,this),Object(Q.a)(this,"height",A,this),Object(Q.a)(this,"data",D,this),Object(Q.a)(this,"inputs",P,this),Object(Q.a)(this,"outputs",M,this),Object(Q.a)(this,"move",R,this),Object(Q.a)(this,"setSize",_,this),Object(Q.a)(this,"setName",B,this),this.key=n.key,this.name=n.name,this.x=n.x,this.y=n.y,this.data=n.dataBuilder(this)}return Object(at.a)(t,[{key:"addInput",value:function(t){this.inputs.push(t),t.from.outputs.push(t)}},{key:"addOutput",value:function(t){this.outputs.push(t),t.to.inputs.push(t)}},{key:"inputNodes",get:function(){return this.inputs.map((function(t){return t.from}))}},{key:"outputNodes",get:function(){return this.outputs.map((function(t){return t.to}))}}]),t}(),S=Object(et.a)(L.prototype,"key",[nt.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=Object(et.a)(L.prototype,"name",[nt.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=Object(et.a)(L.prototype,"x",[nt.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=Object(et.a)(L.prototype,"y",[nt.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=Object(et.a)(L.prototype,"width",[nt.r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),A=Object(et.a)(L.prototype,"height",[nt.r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),D=Object(et.a)(L.prototype,"data",[nt.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=Object(et.a)(L.prototype,"inputs",[nt.r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return nt.r.array()}}),Object(et.a)(L.prototype,"inputNodes",[nt.h],Object.getOwnPropertyDescriptor(L.prototype,"inputNodes"),L.prototype),M=Object(et.a)(L.prototype,"outputs",[nt.r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return nt.r.array()}}),Object(et.a)(L.prototype,"outputNodes",[nt.h],Object.getOwnPropertyDescriptor(L.prototype,"outputNodes"),L.prototype),Object(et.a)(L.prototype,"addInput",[nt.g],Object.getOwnPropertyDescriptor(L.prototype,"addInput"),L.prototype),Object(et.a)(L.prototype,"addOutput",[nt.g],Object.getOwnPropertyDescriptor(L.prototype,"addOutput"),L.prototype),R=Object(et.a)(L.prototype,"move",[nt.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return function(e,n){t.x+=e,t.y+=n}}}),_=Object(et.a)(L.prototype,"setSize",[nt.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return function(e){t.width=e.width,t.height=e.height}}}),B=Object(et.a)(L.prototype,"setName",[nt.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return function(e){t.name=e}}}),L),ct=(V=function t(e){Object(tt.a)(this,t),this.builders=void 0,this.globalData=void 0,Object(Q.a)(this,"nodes",W,this),Object(Q.a)(this,"selection",G,this),Object(Q.a)(this,"selectedConnection",H,this),Object(Q.a)(this,"selectingInputFor",K,this),Object(Q.a)(this,"selectNode",U,this),Object(Q.a)(this,"selectConnection",Y,this),Object(Q.a)(this,"addNode",J,this),Object(Q.a)(this,"selectingInput",X,this),Object(Q.a)(this,"assignInput",Z,this),Object(Q.a)(this,"_selectingInputKeyListener",$,this),this.builders=e.builders,this.globalData=e.builders.graphBuilder(this)},W=Object(et.a)(V.prototype,"nodes",[nt.r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return nt.r.map({})}}),G=Object(et.a)(V.prototype,"selection",[nt.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=Object(et.a)(V.prototype,"selectedConnection",[nt.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=Object(et.a)(V.prototype,"selectingInputFor",[nt.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=Object(et.a)(V.prototype,"selectNode",[nt.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return function(e){t.selection=e}}}),Y=Object(et.a)(V.prototype,"selectConnection",[nt.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return function(e){t.selectedConnection=e}}}),J=Object(et.a)(V.prototype,"addNode",[nt.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return function(e,n){if(t.globalData.canAddNode(e)){var i=t.builders.nodeBuilder[e];if(void 0!==i){var a,r,o=new ot(t,{dataBuilder:i,key:Object(it.a)(),name:e,x:null!==(a=null===n||void 0===n?void 0:n.x)&&void 0!==a?a:100,y:null!==(r=null===n||void 0===n?void 0:n.y)&&void 0!==r?r:100});return t.nodes.set(o.key,o),o}}}}}),X=Object(et.a)(V.prototype,"selectingInput",[nt.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return function(e){t.selectingInputFor=e,window.addEventListener("keyup",t._selectingInputKeyListener)}}}),Z=Object(et.a)(V.prototype,"assignInput",[nt.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return function(e){var n=new rt(t.selectingInputFor,e,t.builders.connectionBuilder);return n.from.addOutput(n),t.selectingInputFor=void 0,t.selectedConnection=n,n}}}),$=Object(et.a)(V.prototype,"_selectingInputKeyListener",[nt.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return function(e){"Escape"===e.key&&(t.selectingInputFor=void 0,window.removeEventListener("keyup",t._selectingInputKeyListener))}}}),V),lt=n(79),ut=n(149),st=n(145),pt=n(109),dt=n(158),ht=n(80);function bt(){var t=Object(p.a)(["\n  overflow-y: scroll;\n  height: 100%;\n  margin: 0;\n  padding: 0px 10px 25px;\n\n  .group {\n    padding-left: 10px;\n    padding-top: 3px;\n    padding-bottom: 3px;\n    border-top: 2px solid #eee;\n    margin-top: 6px;\n    .MuiListItemText-primary {\n      font-weight: bold;\n    }\n  }\n  .nested {\n    padding-left: 25px;\n    padding-top: 0px;\n    padding-bottom: 0px;\n  }\n"]);return bt=function(){return t},t}var ft=b.a.ul(bt()),mt=Object(s.a)((function(t){var e=t.items,n=ce();return o.a.createElement(ht.a,{disableDragging:!0,maxWidth:300,minWidth:200,style:{position:"relative",maxHeight:"100%",display:"flex",flexDirection:"column"},enableResizing:N({right:!0})},o.a.createElement("input",{type:"text"}),o.a.createElement(ft,null,o.a.createElement(st.a,{component:"nav"},Array.isArray(e)?e.map((function(t){return o.a.createElement(pt.a,{button:!0,key:t,className:"nested",onClick:function(){n.addNode(t)}},o.a.createElement(dt.a,{primary:t}))})):Object.entries(e).map((function(t){var e=Object(y.a)(t,2),n=e[0],i=e[1];return o.a.createElement(gt,{key:n,name:n,list:i})})))))})),gt=Object(s.a)((function(t){var e=t.name,n=t.list,i=o.a.useState(!0),a=Object(y.a)(i,2),r=a[0],c=a[1],l=ce();return o.a.createElement(o.a.Fragment,null,o.a.createElement(pt.a,{button:!0,onClick:function(){return c(!r)},className:"group"},o.a.createElement(dt.a,{primary:e}),o.a.createElement(lt.a,{icon:r?"chevron-up":"chevron-down"})),o.a.createElement(ut.a,{in:r,timeout:"auto",unmountOnExit:!0},o.a.createElement(st.a,{component:"div",disablePadding:!0},n.map((function(t){return o.a.createElement(pt.a,{button:!0,key:t,className:"nested",onClick:function(){l.addNode(t)}},o.a.createElement(dt.a,{primary:t}))})))))}));function yt(){var t=Object(p.a)(["\n  padding-bottom: 10px;\n  thead {\n    font-size: 1.1em;\n    font-weight: bolder;\n  }\n  tr td {\n    padding: 0;\n  }\n  tr td:first-child {\n    padding-right: 15px;\n    height: 32px;\n  }\n  tr td:last-child {\n    margin: auto auto;\n    padding-left: 10px;\n    text-align: center;\n    align-self: center;\n  }\n"]);return yt=function(){return t},t}var vt=Object(s.a)((function(t){var e=t.self,n=ce(),i=e.inputs.length>=e.data.nInputs,a=void 0!==n.selectingInputFor;return o.a.createElement(Ot,null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("td",null,"Property"),o.a.createElement("td",null,"Value"))),o.a.createElement("tbody",null,0!==e.data.nInputs&&o.a.createElement("tr",null,o.a.createElement("td",null,"Inputs"),o.a.createElement("td",null,e.inputs.map((function(t){return o.a.createElement("div",{onClick:function(){return n.selectConnection(t)},key:t.from.key},t.from.name)})),!i&&o.a.createElement("div",{onClick:function(){return n.selectingInput(e)},style:a?{background:"#eee"}:{cursor:"pointer"}},"Add Transition"))),Object.entries(e.data.spec).map((function(t){var n=Object(y.a)(t,2),i=n[0],a=n[1];return o.a.createElement("tr",{key:i},o.a.createElement("td",null,i),o.a.createElement("td",null,o.a.createElement(a.plotField,{name:i,model:e.data})))}))))})),Ot=b.a.table(yt()),jt=Object(s.a)((function(){var t,e=ce();if(null!=e.selection){var n=e.selection;t=o.a.createElement("div",{style:{overflow:"auto",maxHeight:"100%",maxWidth:"100%"},key:e.selection.key,className:"row"},o.a.createElement("div",{style:{padding:"15px"}},o.a.createElement("input",{type:"text",value:n.name,onInput:function(t){return n.setName(t.currentTarget.value)},onChange:function(){}}),o.a.createElement(vt,{self:e.selection})),o.a.createElement("div",null,o.a.createElement("pre",null,void 0!==e.selectedConnection&&o.a.createElement(e.selectedConnection.data.ConnectionView,null))))}else t=o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"center"},"Not Selected"));return o.a.createElement(x.Resizable,{minHeight:200,defaultSize:{height:280,width:"auto"},style:{position:"relative",background:"white",boxShadow:"0 1px 4px 1px #eee",border:"1px solid #eee"},enable:N({top:!0})},t)})),Et=n(36),wt=n(51),xt=n(50),It=function t(){Object(tt.a)(this,t)};It.textOrEmpty=function(t,e){return t?e:""};var kt=function(t,e){var n=e.isNested;return"".concat(t.map((function(t,e){return"\n".concat(0===e?"IF":"ELSEIF"," ").concat(t.condition.expression," THEN\n  State:=").concat(t.to.id,";  ").concat(n?"\n  Entry:=TRUE;":"")})).join("\n")).concat(0===t.length?"":"\nEND_IF")},Nt=function(t){return"IF Entry THEN\n  ".concat(t.name,"(Initialization:=ENTRY);\n  Entry:=FALSE;\nEND_IF\n").concat(t.name,"(Initialization:=ENTRY);")},Lt=function(t){var e;return"\n// Variable declaration\nVAR\n".concat(t.steps.filter((function(t){return t.type===Wt.ENCLOSING||t.type===Wt.MACRO})).map((function(t){return"  ".concat(t.name,":").concat(t.name,"_FB;")})).join("\n"),"\n\n  State:UINT:=").concat(null===(e=t.initialStep)||void 0===e?void 0:e.id,";\n  Entry:BOOL:=TRUE;\nEND_VAR\n\n// Program behavior\nCASE State OF\n  ").concat(t.steps.map((function(t){return"\n  ".concat(t.id,": //State ").concat(t.name,"\n    ").concat(function(){switch(t.type){case Wt.ENCLOSING:return function(t){return"".concat(Nt(t),"\n\n").concat(kt(t.transitions,{isNested:!0}))}(t);case Wt.INITIAL:case Wt.SIMPLE:return function(t){return kt(t.transitions,{isNested:!1})}(t);case Wt.MACRO:return function(t){var e=t.transitions;return"\n".concat(Nt(t),"\n\n").concat(e.map((function(n,i){return"".concat(0===i?"IF":"ELSEIF"," ").concat(n.condition.expression).concat(e.length-t.innerTransitionsLength<=i?" AND ".concat(t.name,".Complete"):""," THEN\n  State:=").concat(n.to.id,";\n  Entry:=TRUE;")})).join("\n")).concat(It.textOrEmpty(0!==e.length,"\nEND_IF"))}(t)}}().replace(/\n/g,"\n    "),"\n  ")})).join("\n"),"\nEND_CASE\n")},St=n(110),Ct=n(153),zt=n(152),Ft=n(154),Tt=n(17);function At(){var t=Object(p.a)(["\n  min-height: 38px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]);return At=function(){return t},t}var Dt,Pt,Mt,Rt,_t,Bt,Vt,Wt,Gt=b.a.div(At()),Ht=function t(e){var n=this;if(Object(tt.a)(this,t),this.choices=void 0,this.default=void 0,this.isObservableMap=function(){return"function"===typeof n.choices.keys&&"number"===typeof n.choices.size&&Symbol.toStringTag in n.choices},this.mobxProp=function(){return void 0!==n.default?Tt.a.optional(Tt.a.string,n.default):Tt.a.string},this.plotField=Object(s.a)((function(t){var e,i=t.name,a=t.model;return(e=n.isObservableMap()?Array.from(n.choices.keys()):Object.keys(n.choices)).length>3?o.a.createElement(Ft.a,{value:a[i],onChange:function(t){a[i]=t.target.value},autoWidth:!0},e.map((function(t){return o.a.createElement(zt.a,{key:t,value:t},t)}))):o.a.createElement(Gt,{key:i},o.a.createElement(Ct.a,{size:"small",color:"primary","aria-label":"outlined primary button group"},e.map((function(t){var e=t===a[i]?{background:"#3f51b5",color:"white"}:{};return o.a.createElement(St.a,{key:t,onClick:function(){a[i]=t},style:e},t)}))))})),this.choices=e.choices,this.default=e.default,this.isObservableMap()&&null===this.choices.get(this.default))throw Error("")},Kt=n(155),Ut=(n(157),function t(e){var n=this;if(Object(tt.a)(this,t),this.default=void 0,this.maxLength=void 0,this.minLength=void 0,this.mobxProp=function(){return void 0!==n.default?Tt.a.optional(Tt.a.string,n.default):Tt.a.string},this.plotField=Object(s.a)((function(t){var e=t.name,i=t.model,a=o.a.useState(i[e]),r=Object(y.a)(a,2),c=r[0],l=r[1],u=i.errors;return o.a.createElement(Kt.a,{key:e,value:c,inputProps:{style:{textAlign:"center"}},onChange:function(t){var a=t.target.value;l(a),void 0!==n.maxLength&&a.length>n.maxLength?u.set(e,"Max length exceded."):void 0!==n.minLength&&a.length<n.minLength?u.set(e,"Min length exceded."):(u.delete(e),i[e]=a)},error:void 0!==u.get(e),fullWidth:!0,style:{width:"120px"}})})),this.default=e.default,this.maxLength=e.maxLength,this.minLength=e.minLength,"string"===typeof this.default){if(void 0!==this.minLength&&this.default.length<this.minLength)throw Error("");if(void 0!==this.maxLength&&this.default.length>this.maxLength)throw Error("")}});!function(t){t.ENCLOSING="ENCLOSING",t.INITIAL="INITIAL",t.MACRO="MACRO",t.SIMPLE="SIMPLE"}(Wt||(Wt={}));var Yt,Jt=(Dt=function(){function t(e){var n=this;Object(tt.a)(this,t),this.graph=e,this.workingFamilyTransitions=[],this.signals=[],this.generateCode=function(){return Lt(n)}}return Object(at.a)(t,[{key:"canAddNode",value:function(t){return t!==Wt.INITIAL||!this._hasInitialStep()}},{key:"_hasInitialStep",value:function(){return Object(u.a)(this.graph.nodes.values()).some((function(t){return t.data.type===Wt.INITIAL}))}},{key:"steps",get:function(){return Object(u.a)(this.graph.nodes.values()).map((function(t){return t.data}))}},{key:"initialStep",get:function(){return this.steps.find((function(t){return t.type===Wt.INITIAL}))}}]),t}(),Object(et.a)(Dt.prototype,"steps",[nt.h],Object.getOwnPropertyDescriptor(Dt.prototype,"steps"),Dt.prototype),Object(et.a)(Dt.prototype,"initialStep",[nt.h],Object.getOwnPropertyDescriptor(Dt.prototype,"initialStep"),Dt.prototype),Dt);!function(t){t.F="F",t.D="D",t.A="A"}(Yt||(Yt={}));var Xt=(Pt=function(){function t(e,n){var i,a,r;Object(tt.a)(this,t),this.node=e,this.nInputs=Number.POSITIVE_INFINITY,this.errors=nt.r.map(),Object(Q.a)(this,"description",Mt,this),Object(Q.a)(this,"family",Rt,this),this.spec={family:new Ht({default:Yt.F,choices:(r=Object.values(Yt),r.reduce((function(t,e){return t[e.toString()]=e,t}),{}))}),description:new Ut({default:""})},this.description=null!==(i=null===n||void 0===n?void 0:n.description)&&void 0!==i?i:"",this.family=null!==(a=null===n||void 0===n?void 0:n.family)&&void 0!==a?a:Yt.F}return Object(at.a)(t,[{key:"isValidInput",value:function(t){return this.node.inputNodes.every((function(e){return e.data!==t.data}))}},{key:"name",get:function(){return this.node.name}},{key:"automationSystem",get:function(){return this.node.graph.globalData}},{key:"_transitions",get:function(){return this.node.outputs.map((function(t){return t.data}))}},{key:"innerTransitionsLength",get:function(){return this._transitions.length}},{key:"transitions",get:function(){return this.family===Yt.F?this.automationSystem.workingFamilyTransitions.concat(this._transitions):this._transitions}},{key:"id",get:function(){return this.automationSystem.steps.indexOf(this)+1}}]),t}(),Object(et.a)(Pt.prototype,"name",[nt.h],Object.getOwnPropertyDescriptor(Pt.prototype,"name"),Pt.prototype),Mt=Object(et.a)(Pt.prototype,"description",[nt.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rt=Object(et.a)(Pt.prototype,"family",[nt.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(et.a)(Pt.prototype,"_transitions",[nt.h],Object.getOwnPropertyDescriptor(Pt.prototype,"_transitions"),Pt.prototype),Object(et.a)(Pt.prototype,"innerTransitionsLength",[nt.h],Object.getOwnPropertyDescriptor(Pt.prototype,"innerTransitionsLength"),Pt.prototype),Object(et.a)(Pt.prototype,"transitions",[nt.h],Object.getOwnPropertyDescriptor(Pt.prototype,"transitions"),Pt.prototype),Object(et.a)(Pt.prototype,"id",[nt.h],Object.getOwnPropertyDescriptor(Pt.prototype,"id"),Pt.prototype),Pt),Zt=function(t){Object(wt.a)(n,t);var e=Object(xt.a)(n);function n(){var t;Object(tt.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).type=Wt.SIMPLE,t}return n}(Xt),$t=function(t){Object(wt.a)(n,t);var e=Object(xt.a)(n);function n(){var t;Object(tt.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).type=Wt.INITIAL,t}return n}(Xt),qt=function(t){Object(wt.a)(n,t);var e=Object(xt.a)(n);function n(){var t;Object(tt.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).type=Wt.ENCLOSING,t}return n}(Xt),Qt=function(t){Object(wt.a)(n,t);var e=Object(xt.a)(n);function n(){var t;Object(tt.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).type=Wt.MACRO,t}return n}(Xt),te=(_t=function(){function t(e,n){var i,a,r=this;Object(tt.a)(this,t),this.connection=e,this.name=void 0,Object(Q.a)(this,"conditionExpression",Bt,this),this.errors=nt.r.map(),this.spec={conditionExpression:new Ut({default:""})},this.ConnectionView=Object(s.a)((function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,"".concat(r.connection.from.name," -> ").concat(r.connection.to.name)),Object.entries(r.spec).map((function(t){var e=Object(y.a)(t,2),n=e[0],i=e[1];return o.a.createElement("tr",{key:n},o.a.createElement("td",null,n),o.a.createElement("td",null,o.a.createElement(i.plotField,{name:n,model:r})))})))})),this.name=null!==(i=null===n||void 0===n?void 0:n.name)&&void 0!==i?i:"",this.conditionExpression=null!==(a=null===n||void 0===n?void 0:n.condition.expression)&&void 0!==a?a:this.spec.conditionExpression.default,console.log(this.conditionExpression)}return Object(at.a)(t,[{key:"condition",get:function(){return new ee(this.conditionExpression)}}]),Object(at.a)(t,[{key:"from",get:function(){return this.connection.from.data}},{key:"to",get:function(){return this.connection.to.data}},{key:"connectionText",get:function(){return this.conditionExpression}}]),t}(),Object(et.a)(_t.prototype,"condition",[nt.h],Object.getOwnPropertyDescriptor(_t.prototype,"condition"),_t.prototype),Bt=Object(et.a)(_t.prototype,"conditionExpression",[nt.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(et.a)(_t.prototype,"connectionText",[nt.h],Object.getOwnPropertyDescriptor(_t.prototype,"connectionText"),_t.prototype),_t),ee=function t(e){Object(tt.a)(this,t),this.expression=e},ne=new ct({builders:{graphBuilder:function(t){return new Jt(t)},nodeBuilder:(Vt={},Object(Et.a)(Vt,Wt.SIMPLE,(function(t){return new Zt(t)})),Object(Et.a)(Vt,Wt.MACRO,(function(t){return new Qt(t)})),Object(Et.a)(Vt,Wt.ENCLOSING,(function(t){return new qt(t)})),Object(Et.a)(Vt,Wt.INITIAL,(function(t){return new $t(t)})),Vt),connectionBuilder:function(t){return new te(t)}}}),ie=ne.addNode(Wt.INITIAL,{x:72,y:60}),ae=ne.addNode(Wt.MACRO,{x:261,y:170}),re=new rt(ie,ae,(function(t){return new te(t,{name:"Emergency",condition:new ee("I1 & I2")})}));ne.globalData.workingFamilyTransitions.push(re.data),[ie,ae,ne.addNode(Wt.ENCLOSING,{x:441,y:316}),ne.addNode(Wt.SIMPLE,{x:211,y:410}),ne.addNode(Wt.SIMPLE,{x:441,y:500})].forEach((function(t,e){return null===t||void 0===t?void 0:t.setName("S".concat(e+1))})),ie.data.family=Yt.A,ae.data.family=Yt.D;var oe=o.a.createContext(null);function ce(){var t=o.a.useContext(oe);if(!t)throw Error("useStore should be used inside a Store provider.");return t}function le(){return o.a.createElement(oe.Provider,{value:ne},o.a.createElement("div",{className:"row",style:{background:"rgba(250,250,250,0.7)",height:"100%"}},o.a.createElement(mt,{items:Object.keys(ne.builders.nodeBuilder)}),o.a.createElement("div",{className:"col",style:{width:"100%",background:"rgba(250,250,250,0.7)"}},o.a.createElement("div",{className:"row",style:{minHeight:0,flex:1}},o.a.createElement(E,null),o.a.createElement(q,null)),o.a.createElement(jt,null))))}n(107),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.b.add(a.a,a.b),l.a.render(o.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},92:function(t,e,n){t.exports=n(108)}},[[92,1,2]]]);
//# sourceMappingURL=main.12a1d8b0.chunk.js.map