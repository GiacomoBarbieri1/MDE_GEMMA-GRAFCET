(this["webpackJsonpgemma-grafcet"]=this["webpackJsonpgemma-grafcet"]||[]).push([[0],{108:function(e,t,n){},109:function(e,t,n){"use strict";n.r(t);var a=n(46),i=n(64),r=n(0),o=n.n(r),c=n(12),l=n.n(c),u=n(22),s=n(11),p=n(26),d=n(57),h=n.n(d),f=n(27);function b(){var e=Object(p.a)(["\n  z-index: 1;\n  cursor: pointer;\n  position: absolute;\n  box-shadow: 0 1px 4px 1px #eee;\n  padding: 6px;\n  background: #fff;\n  border-radius: 6;\n  border: 1px solid #eee;\n"]);return b=function(){return e},e}var m=f.a.div(b()),g=Object(s.a)((function(e){var t=e.operation,n=gt(),a=o.a.useCallback((function(e,n){t.move(n.deltaX,n.deltaY)}),[t]),i=void 0!==n.selectingInputFor,r=i&&n.selectingInputFor.data.isValidInput(t),c=o.a.useCallback((function(e){console.log(t),i?r&&n.assignInput(t):n.selectNode(t)}),[n,t,i,r]),l=t.x,u=t.y,s=t.name;return o.a.createElement(h.a,{onDrag:a,position:{x:l,y:u},bounds:"parent"},o.a.createElement(m,{ref:function(e){null!==e&&t.setSize(e.getBoundingClientRect())},onClick:c,style:i?{cursor:r?"pointer":"not-allowed"}:void 0},"Layer ".concat(s)))})),y=n(16),v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:14,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:14,i=t+n;return"M".concat(e," ").concat(t," L").concat(e-a/2," ").concat(i," L").concat(e+a/2," ").concat(i," Z")},O=Object(s.a)((function(e){var t,n,a=e.connection,i=gt(),r=a.from,c=a.to,l=r.x+r.width/2,u=r.y+r.height/2,s=c.x+c.width/2,p=c.y+c.height/2,d=p-u,h=s-l;if(0===h)t=0,n=(p>u?1:-1)*c.height/2;else if(0===d)n=0,t=(s>l?1:-1)*c.width/2;else{var f=Math.abs(d/h),b=f>c.height/c.width?[c.height/2/f,c.height/2]:[c.width/2,c.width/2*f],m=Object(y.a)(b,2),g=m[0];n=(p>u?1:-1)*m[1],t=(s>l?1:-1)*g}var O=s-t,E=p-n,w=(l+s)/2,x=(u+p)/2,k=90+180*Math.atan2(p-u,s-l)/Math.PI;return o.a.createElement(o.a.Fragment,null,o.a.createElement("path",{style:{strokeWidth:2,stroke:"black"},d:"M".concat(l," ").concat(u," L").concat(s," ").concat(p),onClick:function(e){i.selectConnection(a)}}),o.a.createElement(j,{text:a.data.connectionText,x:w,y:x,onClick:function(e){return i.selectConnection(a)}}),o.a.createElement("path",{d:v(O,E),transform:"rotate(".concat(k," ").concat(O," ").concat(E,")")}))})),j=Object(s.a)((function(e){var t=e.text,n=e.x,a=e.y,i=e.rectFill,r=void 0===i?"#eee":i,c=e.padding,l=void 0===c?3:c,u=e.onClick,s=o.a.useState(null),p=Object(y.a)(s,2),d=p[0],h=p[1],f=o.a.useState(t),b=Object(y.a)(f,2),m=b[0],g=b[1],v=null===d||void 0===d?void 0:d.getBBox();return o.a.useEffect((function(){if(m!==t){var e=setTimeout((function(){return g(t)}),0);return function(){return clearTimeout(e)}}})),o.a.createElement(o.a.Fragment,null,void 0!==v&&o.a.createElement("rect",{width:v.width+2*l,height:v.height+2*l,x:n-v.width/2-l,y:a-v.height+l,fill:r,onClick:u}),o.a.createElement("text",{x:void 0!==v?n-v.width/2:n,y:a,fill:"black",ref:h,onClick:u},t))})),E=Object(s.a)((function(){var e=gt(),t=Object(u.a)(e.nodes.values());return o.a.createElement("div",{style:{overflow:"auto",flex:"1"}},o.a.createElement("div",{style:{position:"relative",border:"1px solid #eee",background:"#fff",margin:"10px",borderRadius:"6px",flex:1,height:"1500px",width:"1500px"}},t.map((function(e){return console.log(e),o.a.createElement(g,{operation:e,key:e.key})})),o.a.createElement("svg",{style:{width:"100%",height:"100%"}},t.flatMap((function(e){return e.inputs})).map((function(e){return o.a.createElement(O,{connection:e,key:e.from.key+e.to.key})})))))})),w=n(31),x=n(42),k=n(49);var N={top:!1,right:!1,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1};function I(e){return Object.entries(e).reduce((function(e,t){var n=Object(y.a)(t,2),a=n[0],i=n[1];return void 0!==i&&(e[a]=i),e}),Object(k.a)({},N))}var C,S,L,z,A,T,D,F,P,M,R,_,B,V,W,G,H,K,U,Y,J,X,Z,$,q=Object(s.a)((function(){for(var e=gt(),t=Object(u.a)(e.nodes.values()),n=t.reduce((function(e,t){return t.inputs.forEach((function(n){var a=e.get(n.to);void 0===a&&(a=[],e.set(n.to,a)),a.push(t)})),e}),new Map),a=[],i=new Map(t.filter((function(e){var t=0!==e.data.length;return t||a.push(e),t})).map((function(e){return[e,e.data.length]}))),r=0;0!==i.size&&a.length!==r;){var c,l=Object(w.a)(a.slice(r));try{for(l.s();!(c=l.n()).done;){var s=c.value;r+=1;var p=n.get(s);if(void 0!==p){var d,h=Object(w.a)(p);try{for(h.s();!(d=h.n()).done;){var f=d.value,b=i.get(f);1===b?(i.delete(f),a.push(f)):i.set(f,b-1)}}catch(m){h.e(m)}finally{h.f()}}}}catch(m){l.e(m)}finally{l.f()}}return i.size,o.a.createElement(x.Resizable,{minWidth:200,defaultSize:{height:"auto",width:400},style:{position:"relative",background:"white",boxShadow:"0 1px 4px 1px #eee",border:"1px solid #eee"},enable:I({left:!0})},o.a.createElement("div",{style:{overflow:"auto",height:"100%",padding:"0 10px"}},o.a.createElement("pre",null,e.globalData.generateCode())))})),Q=n(10),ee=n(13),te=n(20),ne=(n(68),n(7)),ae=n(2),ie=n(157),re=function e(t,n,a){Object(ee.a)(this,e),this.from=t,this.to=n,this.data=void 0,this.data=a(this)},oe=(C=function(){function e(t,n){Object(ee.a)(this,e),this.graph=t,Object(Q.a)(this,"key",S,this),Object(Q.a)(this,"name",L,this),Object(Q.a)(this,"x",z,this),Object(Q.a)(this,"y",A,this),Object(Q.a)(this,"width",T,this),Object(Q.a)(this,"height",D,this),Object(Q.a)(this,"data",F,this),Object(Q.a)(this,"inputs",P,this),Object(Q.a)(this,"outputs",M,this),Object(Q.a)(this,"move",R,this),Object(Q.a)(this,"setSize",_,this),Object(Q.a)(this,"setName",B,this),this.key=n.key,this.name=n.name,this.x=n.x,this.y=n.y,this.data=n.dataBuilder(this)}return Object(te.a)(e,[{key:"addInput",value:function(e){this.inputs.push(e),e.from.outputs.push(e)}},{key:"addOutput",value:function(e){this.outputs.push(e),e.to.inputs.push(e)}},{key:"inputNodes",get:function(){return this.inputs.map((function(e){return e.from}))}},{key:"outputNodes",get:function(){return this.outputs.map((function(e){return e.to}))}}]),e}(),S=Object(ne.a)(C.prototype,"key",[ae.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=Object(ne.a)(C.prototype,"name",[ae.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=Object(ne.a)(C.prototype,"x",[ae.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=Object(ne.a)(C.prototype,"y",[ae.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=Object(ne.a)(C.prototype,"width",[ae.r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),D=Object(ne.a)(C.prototype,"height",[ae.r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),F=Object(ne.a)(C.prototype,"data",[ae.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=Object(ne.a)(C.prototype,"inputs",[ae.r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ae.r.array()}}),Object(ne.a)(C.prototype,"inputNodes",[ae.h],Object.getOwnPropertyDescriptor(C.prototype,"inputNodes"),C.prototype),M=Object(ne.a)(C.prototype,"outputs",[ae.r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ae.r.array()}}),Object(ne.a)(C.prototype,"outputNodes",[ae.h],Object.getOwnPropertyDescriptor(C.prototype,"outputNodes"),C.prototype),Object(ne.a)(C.prototype,"addInput",[ae.g],Object.getOwnPropertyDescriptor(C.prototype,"addInput"),C.prototype),Object(ne.a)(C.prototype,"addOutput",[ae.g],Object.getOwnPropertyDescriptor(C.prototype,"addOutput"),C.prototype),R=Object(ne.a)(C.prototype,"move",[ae.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){e.x+=t,e.y+=n}}}),_=Object(ne.a)(C.prototype,"setSize",[ae.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.width=t.width,e.height=t.height}}}),B=Object(ne.a)(C.prototype,"setName",[ae.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.name=t}}}),C),ce=(V=function(){function e(t){Object(ee.a)(this,e),this.builders=void 0,this.globalData=void 0,Object(Q.a)(this,"nodes",W,this),Object(Q.a)(this,"selectedNode",G,this),Object(Q.a)(this,"selectedConnection",H,this),Object(Q.a)(this,"selectingInputFor",K,this),Object(Q.a)(this,"selectNode",U,this),Object(Q.a)(this,"selectConnection",Y,this),Object(Q.a)(this,"addNode",J,this),Object(Q.a)(this,"selectingInput",X,this),Object(Q.a)(this,"assignInput",Z,this),Object(Q.a)(this,"_selectingInputKeyListener",$,this),this.builders=t.builders,this.globalData=t.builders.graphBuilder(this)}return Object(te.a)(e,[{key:"removeConnection",value:function(e){e===this.selectedConnection&&(this.selectedConnection=void 0),e.from.outputs.remove(e),e.to.inputs.remove(e)}}]),Object(te.a)(e,[{key:"removeNode",value:function(e){if(e===this.selectedNode&&(this.selectedNode=void 0),this.nodes.delete(e.key)){var t,n=Object(w.a)(e.inputs);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.from.outputs.remove(a)}}catch(c){n.e(c)}finally{n.f()}var i,r=Object(w.a)(e.outputs);try{for(r.s();!(i=r.n()).done;){var o=i.value;o.to.inputs.remove(o)}}catch(c){r.e(c)}finally{r.f()}}}}]),e}(),Object(ne.a)(V.prototype,"removeConnection",[ae.g],Object.getOwnPropertyDescriptor(V.prototype,"removeConnection"),V.prototype),W=Object(ne.a)(V.prototype,"nodes",[ae.r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ae.r.map({})}}),G=Object(ne.a)(V.prototype,"selectedNode",[ae.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=Object(ne.a)(V.prototype,"selectedConnection",[ae.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=Object(ne.a)(V.prototype,"selectingInputFor",[ae.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=Object(ne.a)(V.prototype,"selectNode",[ae.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.selectedNode=t}}}),Y=Object(ne.a)(V.prototype,"selectConnection",[ae.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.selectedConnection=t}}}),J=Object(ne.a)(V.prototype,"addNode",[ae.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){if(e.globalData.canAddNode(t)){var a=e.builders.nodeBuilder[t];if(void 0!==a){var i,r,o=new oe(e,{dataBuilder:a,key:Object(ie.a)(),name:t,x:null!==(i=null===n||void 0===n?void 0:n.x)&&void 0!==i?i:100,y:null!==(r=null===n||void 0===n?void 0:n.y)&&void 0!==r?r:100});return e.nodes.set(o.key,o),o}}}}}),Object(ne.a)(V.prototype,"removeNode",[ae.g],Object.getOwnPropertyDescriptor(V.prototype,"removeNode"),V.prototype),X=Object(ne.a)(V.prototype,"selectingInput",[ae.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.selectingInputFor=t,window.addEventListener("keyup",e._selectingInputKeyListener)}}}),Z=Object(ne.a)(V.prototype,"assignInput",[ae.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=new re(e.selectingInputFor,t,e.builders.connectionBuilder);return n.from.addOutput(n),e.selectingInputFor=void 0,e.selectedConnection=n,n}}}),$=Object(ne.a)(V.prototype,"_selectingInputKeyListener",[ae.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){"Escape"===t.key&&(e.selectingInputFor=void 0,window.removeEventListener("keyup",e._selectingInputKeyListener))}}}),V),le=n(35),ue=n(149),se=n(145),pe=n(110),de=n(158),he=n(84);function fe(){var e=Object(p.a)(["\n  overflow-y: scroll;\n  height: 100%;\n  margin: 0;\n  padding: 0px 10px 25px;\n\n  .group {\n    padding-left: 10px;\n    padding-top: 3px;\n    padding-bottom: 3px;\n    border-top: 2px solid #eee;\n    margin-top: 6px;\n    .MuiListItemText-primary {\n      font-weight: bold;\n    }\n  }\n  .nested {\n    padding-left: 25px;\n    padding-top: 0px;\n    padding-bottom: 0px;\n  }\n"]);return fe=function(){return e},e}var be=f.a.ul(fe()),me=Object(s.a)((function(e){var t=e.items,n=gt();return o.a.createElement(he.a,{disableDragging:!0,maxWidth:300,minWidth:200,style:{position:"relative",maxHeight:"100%",display:"flex",flexDirection:"column"},enableResizing:I({right:!0})},o.a.createElement("input",{type:"text"}),o.a.createElement(be,null,o.a.createElement(se.a,{component:"nav"},Array.isArray(t)?t.map((function(e){return o.a.createElement(pe.a,{button:!0,key:e,className:"nested",onClick:function(){n.addNode(e)}},o.a.createElement(de.a,{primary:e}))})):Object.entries(t).map((function(e){var t=Object(y.a)(e,2),n=t[0],a=t[1];return o.a.createElement(ge,{key:n,name:n,list:a})})))))})),ge=Object(s.a)((function(e){var t=e.name,n=e.list,a=o.a.useState(!0),i=Object(y.a)(a,2),r=i[0],c=i[1],l=gt();return o.a.createElement(o.a.Fragment,null,o.a.createElement(pe.a,{button:!0,onClick:function(){return c(!r)},className:"group"},o.a.createElement(de.a,{primary:t}),o.a.createElement(le.a,{icon:r?"chevron-up":"chevron-down"})),o.a.createElement(ue.a,{in:r,timeout:"auto",unmountOnExit:!0},o.a.createElement(se.a,{component:"div",disablePadding:!0},n.map((function(e){return o.a.createElement(pe.a,{button:!0,key:e,className:"nested",onClick:function(){l.addNode(e)}},o.a.createElement(de.a,{primary:e}))})))))}));function ye(){var e=Object(p.a)(["\n  padding-bottom: 10px;\n  thead {\n    font-size: 1.1em;\n    font-weight: bolder;\n  }\n  tr td {\n    padding: 0;\n  }\n  tr td:first-child {\n    padding-right: 15px;\n    height: 32px;\n  }\n  tr td:last-child {\n    margin: auto auto;\n    padding-left: 10px;\n    text-align: center;\n    align-self: center;\n  }\n"]);return ye=function(){return e},e}var ve=Object(s.a)((function(e){var t=e.children;return o.a.createElement(je,null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("td",null,"Property"),o.a.createElement("td",null,"Value"))),o.a.createElement("tbody",null,t))})),Oe=Object(s.a)((function(e){var t=e.self,n=gt(),a=t.inputs.length>=t.data.nInputs,i=void 0!==n.selectingInputFor;return o.a.createElement(ve,null,0!==t.data.nInputs&&o.a.createElement("tr",null,o.a.createElement("td",null,"Inputs"),o.a.createElement("td",null,t.inputs.map((function(e){return o.a.createElement("div",{onClick:function(){return n.selectConnection(e)},key:e.from.key,style:{padding:"5px"}},e.from.name)})),!a&&o.a.createElement("div",{onClick:function(){return n.selectingInput(t)},style:i?{background:"#eee"}:{cursor:"pointer"}},"Add Transition"))),Object.entries(t.data.spec).map((function(e){var n=Object(y.a)(e,2),a=n[0],i=n[1];return o.a.createElement("tr",{key:a},o.a.createElement("td",null,a),o.a.createElement("td",null,o.a.createElement(i.plotField,{name:a,model:t.data})))})))})),je=f.a.table(ye()),Ee=n(152),we=n(156),xe=Object(s.a)((function(){var e,t=gt(),n=Object(r.useState)(""),a=Object(y.a)(n,2),i=a[0],c=a[1];if(null!=t.selectedNode){var l=t.selectedNode,u=t.selectedConnection;e=o.a.createElement("div",{style:{overflow:"auto",maxHeight:"100%",maxWidth:"100%"},key:t.selectedNode.key,className:"row"},o.a.createElement("div",{style:{padding:"15px"}},o.a.createElement("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"}},o.a.createElement(we.a,{type:"text",value:l.name,onChange:function(e){return l.setName(e.target.value)},style:{width:"150px"}}),o.a.createElement(Ee.a,{onClick:function(e){return t.removeNode(l)}},o.a.createElement(le.a,{icon:"trash-alt",color:"#000"}))),o.a.createElement(Oe,{self:t.selectedNode})),o.a.createElement("div",{style:{padding:"15px"}},void 0!==u&&o.a.createElement("div",{className:"col"},o.a.createElement("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"}},o.a.createElement("div",null,"".concat(u.from.name," -> ").concat(u.to.name)),o.a.createElement(Ee.a,{onClick:function(e){return t.removeConnection(u)}},o.a.createElement(le.a,{icon:"trash-alt",color:"#000"}))),o.a.createElement(u.data.ConnectionView,null))))}else{var s=Ne(i);console.log(s);var p=0;e=o.a.createElement("div",{style:{width:"150px"},className:"center"},o.a.createElement("span",{style:{font:"400 13.3333px monospace",position:"absolute",top:0,margin:"3px",width:"180px"}},s.map((function(e,t){var n,a=Object(y.a)(e,2),i=a[0],r=a[1];n=i instanceof ke?"black":["AND","NOT","OR"].includes(i)?"blue":"brown";var c=r-p;console.log(c);var l=(0!==c?" ".repeat(c):"")+i.toString();return p=r+i.toString().length,o.a.createElement("span",{key:t,style:{color:n}},l)}))),o.a.createElement("textarea",{style:{font:"400 13.3333px monospace",color:"transparent",caretColor:"black",width:"180px",position:"relative",background:"transparent"},value:i,onSelect:function(e){console.log(e.currentTarget.selectionStart)},onChange:function(e){c(e.currentTarget.value)}}))}return o.a.createElement(x.Resizable,{minHeight:200,defaultSize:{height:280,width:"auto"},style:{position:"relative",background:"white",boxShadow:"0 1px 4px 1px #eee",border:"1px solid #eee"},enable:I({top:!0})},e)})),ke=function(){function e(t){Object(ee.a)(this,e),this.text=t}return Object(te.a)(e,[{key:"toString",value:function(){return this.text}}]),e}(),Ne=function(e){var t,n=[],a=-1,i=0,r="",o=function(){0!==r.length&&(n.push([new ke(r),a-r.length]),r="")},c=function(e){o(),n.push([e,a])},l=Object(w.a)(e);try{for(l.s();!(t=l.n()).done;){var u=t.value;if(a++,0===i)switch(u){case" ":o();break;case")":case"(":case"<":case">":c(u);break;case"=":var s=n[n.length-1][0],p=s instanceof ke?s.text:s;["<",">"].includes(p)?n[n.length-1][0]=s+"=":c(u);break;case"A":if("AND"===e.substring(a,a+3)){i=2,c("AND");continue}case"O":if("OR"===e.substring(a,a+2)){i=1,c("OR");continue}case"N":if("NOT"===e.substring(a,a+3)){i=2,c("NOT");continue}default:r+=u}else i--}}catch(d){l.e(d)}finally{l.f()}return 0!==r.length&&n.push([new ke(r),a-r.length+1]),n},Ie=n(39),Ce=n(53),Se=n(52),Le=function e(){Object(ee.a)(this,e)};Le.textOrEmpty=function(e,t){return e?t:""};var ze=function(e,t){var n=t.isNested;return"".concat(e.map((function(e,t){return"\n".concat(0===t?"IF":"ELSIF"," ").concat(e.condition.expression," THEN\n  State:=").concat(e.to.id,";  ").concat(n?"\n  Entry:=TRUE;":"")})).join("\n")).concat(0===e.length?"":"\nEND_IF")},Ae=function(e){return"IF Entry THEN\n  ".concat(e.name,"(Initialization:=ENTRY);\n  Entry:=FALSE;\nEND_IF\n").concat(e.name,"(Initialization:=ENTRY);")},Te=function(e){var t;return"\n// Variable declaration\nVAR\n".concat(e.steps.filter((function(e){return e.type===Ze.ENCLOSING||e.type===Ze.MACRO})).map((function(e){return"  ".concat(e.name,":").concat(e.name,"_FB;")})).join("\n"),"\n\n  State:UINT:=").concat(null===(t=e.initialStep)||void 0===t?void 0:t.id,";\n  Entry:BOOL:=TRUE;\nEND_VAR\n\n// Program behavior\nCASE State OF\n  ").concat(e.steps.map((function(e){return"\n  ".concat(e.id,": //State ").concat(e.name,"\n    ").concat(function(){switch(e.type){case Ze.ENCLOSING:return function(e){return"".concat(Ae(e),"\n\n").concat(ze(e.transitions,{isNested:!0}))}(e);case Ze.INITIAL:case Ze.SIMPLE:return function(e){return ze(e.transitions,{isNested:!1})}(e);case Ze.MACRO:return function(e){var t=e.transitions;return"\n".concat(Ae(e),"\n\n").concat(t.map((function(n,a){return"".concat(0===a?"IF":"ELSIF"," ").concat(n.condition.expression).concat(t.length-e.innerTransitionsLength<=a?" AND ".concat(e.name,".Complete"):""," THEN\n  State:=").concat(n.to.id,";\n  Entry:=TRUE;")})).join("\n")).concat(Le.textOrEmpty(0!==t.length,"\nEND_IF"))}(e)}}().replace(/\n/g,"\n    "),"\n  ")})).join("\n"),"\nEND_CASE\n")},De=n(111),Fe=n(154),Pe=n(153),Me=n(155),Re=n(17);function _e(){var e=Object(p.a)(["\n  min-height: 38px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]);return _e=function(){return e},e}var Be,Ve,We,Ge,He,Ke,Ue,Ye,Je,Xe,Ze,$e,qe=f.a.div(_e()),Qe=function e(t){var n=this;if(Object(ee.a)(this,e),this.choices=void 0,this.default=void 0,this.isObservableMap=function(){return"function"===typeof n.choices.keys&&"number"===typeof n.choices.size&&Symbol.toStringTag in n.choices},this.mobxProp=function(){return void 0!==n.default?Re.a.optional(Re.a.string,n.default):Re.a.string},this.plotField=Object(s.a)((function(e){var t,a=e.name,i=e.model;return t=n.isObservableMap()?Array.from(n.choices.keys()):Object.keys(n.choices),o.a.createElement(et,{value:i[a],setValue:function(e){return i[a]=e},keys:t})})),this.choices=t.choices,this.default=t.default,this.isObservableMap()&&null===this.choices.get(this.default))throw Error("")},et=function(e){var t=e.keys,n=e.value,a=e.setValue;return t.length>3?o.a.createElement(Me.a,{value:n,onChange:function(e){a(e.target.value)},autoWidth:!0},t.map((function(e){return o.a.createElement(Pe.a,{key:e,value:e},e)}))):o.a.createElement(qe,null,o.a.createElement(Fe.a,{size:"small",color:"primary","aria-label":"outlined primary button group"},t.map((function(e){var t=e===n?{background:"#3f51b5",color:"white"}:{};return o.a.createElement(De.a,{key:e,onClick:function(){a(e)},style:t},e)}))))},tt=(n(160),function e(t){var n=this;if(Object(ee.a)(this,e),this.default=void 0,this.maxLength=void 0,this.minLength=void 0,this.mobxProp=function(){return void 0!==n.default?Re.a.optional(Re.a.string,n.default):Re.a.string},this.plotField=Object(s.a)((function(e){var t=e.name,a=e.model,i=o.a.useState(a[t]),r=Object(y.a)(i,2),c=r[0],l=r[1],u=a.errors;return o.a.createElement(we.a,{key:t,value:c,inputProps:{style:{textAlign:"center"}},onChange:function(e){var i=e.target.value;l(i),void 0!==n.maxLength&&i.length>n.maxLength?u.set(t,"Max length exceded."):void 0!==n.minLength&&i.length<n.minLength?u.set(t,"Min length exceded."):(u.delete(t),a[t]=i)},error:void 0!==u.get(t),fullWidth:!0,style:{width:"140px"}})})),this.default=t.default,this.maxLength=t.maxLength,this.minLength=t.minLength,"string"===typeof this.default){if(void 0!==this.minLength&&this.default.length<this.minLength)throw Error("");if(void 0!==this.maxLength&&this.default.length>this.maxLength)throw Error("")}});!function(e){e.ENCLOSING="ENCLOSING",e.INITIAL="INITIAL",e.MACRO="MACRO",e.SIMPLE="SIMPLE"}(Ze||(Ze={})),function(e){e.bool="bool",e.num="num"}($e||($e={}));var nt,at=(Be=function(){function e(t){var n=this;Object(ee.a)(this,e),this.graph=t,this.workingFamilyTransitions=[],this.signals=ae.r.array(),this.generateCode=function(){return Te(n)},this.View=Object(s.a)((function(){return o.a.createElement("div",{style:{padding:"5px"}},o.a.createElement("h2",null,"Signals"),n.signals.map((function(e,t){return o.a.createElement("div",{className:"row"},o.a.createElement(we.a,{type:"text",label:"name",value:e.name,onChange:function(t){return e.name=t.target.value},style:{width:"150px"}}),o.a.createElement(et,{keys:Object.keys($e),setValue:function(t){return e.type=t},value:e.type}),o.a.createElement(Ee.a,{onClick:function(t){return n.signals.remove(e)}},o.a.createElement(le.a,{icon:"trash-alt",color:"#000"})))})),o.a.createElement(De.a,{onClick:function(e){return n.signals.push(new it({name:""}))}},"Add Signal"))}))}return Object(te.a)(e,[{key:"canAddNode",value:function(e){return e!==Ze.INITIAL||!this._hasInitialStep()}},{key:"_hasInitialStep",value:function(){return Object(u.a)(this.graph.nodes.values()).some((function(e){return e.data.type===Ze.INITIAL}))}},{key:"steps",get:function(){return Object(u.a)(this.graph.nodes.values()).map((function(e){return e.data}))}},{key:"initialStep",get:function(){return this.steps.find((function(e){return e.type===Ze.INITIAL}))}}]),e}(),Object(ne.a)(Be.prototype,"steps",[ae.h],Object.getOwnPropertyDescriptor(Be.prototype,"steps"),Be.prototype),Object(ne.a)(Be.prototype,"initialStep",[ae.h],Object.getOwnPropertyDescriptor(Be.prototype,"initialStep"),Be.prototype),Be),it=(Ve=function e(t){Object(ee.a)(this,e),Object(Q.a)(this,"name",We,this),Object(Q.a)(this,"type",Ge,this),this.description=void 0,this.name=t.name,this.description=t.description,this.type=$e.bool},We=Object(ne.a)(Ve.prototype,"name",[ae.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ge=Object(ne.a)(Ve.prototype,"type",[ae.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ve);!function(e){e.F="F",e.D="D",e.A="A"}(nt||(nt={}));var rt=(He=function(){function e(t,n){var a,i,r;Object(ee.a)(this,e),this.node=t,this.nInputs=Number.POSITIVE_INFINITY,this.errors=ae.r.map(),Object(Q.a)(this,"description",Ke,this),Object(Q.a)(this,"family",Ue,this),this.spec={family:new Qe({default:nt.F,choices:(r=Object.values(nt),r.reduce((function(e,t){return e[t.toString()]=t,e}),{}))}),description:new tt({default:""})},this.description=null!==(a=null===n||void 0===n?void 0:n.description)&&void 0!==a?a:"",this.family=null!==(i=null===n||void 0===n?void 0:n.family)&&void 0!==i?i:nt.F}return Object(te.a)(e,[{key:"isValidInput",value:function(e){return this.node.inputNodes.every((function(t){return t.data!==e.data}))}},{key:"name",get:function(){return this.node.name}},{key:"automationSystem",get:function(){return this.node.graph.globalData}},{key:"_transitions",get:function(){return this.node.outputs.map((function(e){return e.data}))}},{key:"innerTransitionsLength",get:function(){return this._transitions.length}},{key:"transitions",get:function(){return this.family===nt.F?this.automationSystem.workingFamilyTransitions.concat(this._transitions):this._transitions}},{key:"id",get:function(){return this.automationSystem.steps.indexOf(this)+1}}]),e}(),Object(ne.a)(He.prototype,"name",[ae.h],Object.getOwnPropertyDescriptor(He.prototype,"name"),He.prototype),Ke=Object(ne.a)(He.prototype,"description",[ae.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ue=Object(ne.a)(He.prototype,"family",[ae.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(ne.a)(He.prototype,"_transitions",[ae.h],Object.getOwnPropertyDescriptor(He.prototype,"_transitions"),He.prototype),Object(ne.a)(He.prototype,"innerTransitionsLength",[ae.h],Object.getOwnPropertyDescriptor(He.prototype,"innerTransitionsLength"),He.prototype),Object(ne.a)(He.prototype,"transitions",[ae.h],Object.getOwnPropertyDescriptor(He.prototype,"transitions"),He.prototype),Object(ne.a)(He.prototype,"id",[ae.h],Object.getOwnPropertyDescriptor(He.prototype,"id"),He.prototype),He),ot=function(e){Object(Ce.a)(n,e);var t=Object(Se.a)(n);function n(){var e;Object(ee.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).type=Ze.SIMPLE,e}return n}(rt),ct=function(e){Object(Ce.a)(n,e);var t=Object(Se.a)(n);function n(){var e;Object(ee.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).type=Ze.INITIAL,e}return n}(rt),lt=function(e){Object(Ce.a)(n,e);var t=Object(Se.a)(n);function n(){var e;Object(ee.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).type=Ze.ENCLOSING,e}return n}(rt),ut=function(e){Object(Ce.a)(n,e);var t=Object(Se.a)(n);function n(){var e;Object(ee.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).type=Ze.MACRO,e}return n}(rt),st=(Ye=function(){function e(t,n){var a,i,r=this;Object(ee.a)(this,e),this.connection=t,this.name=void 0,Object(Q.a)(this,"conditionExpression",Je,this),this.errors=ae.r.map(),this.spec={conditionExpression:new tt({default:""})},this.ConnectionView=Object(s.a)((function(){return o.a.createElement(ve,null,Object.entries(r.spec).map((function(e){var t=Object(y.a)(e,2),n=t[0],a=t[1];return o.a.createElement("tr",{key:n},o.a.createElement("td",null,n),o.a.createElement("td",null,o.a.createElement(a.plotField,{name:n,model:r})))})))})),this.name=null!==(a=null===n||void 0===n?void 0:n.name)&&void 0!==a?a:"",this.conditionExpression=null!==(i=null===n||void 0===n?void 0:n.condition.expression)&&void 0!==i?i:this.spec.conditionExpression.default,console.log(this.conditionExpression)}return Object(te.a)(e,[{key:"condition",get:function(){return new pt(this.conditionExpression)}}]),Object(te.a)(e,[{key:"from",get:function(){return this.connection.from.data}},{key:"to",get:function(){return this.connection.to.data}},{key:"connectionText",get:function(){return this.conditionExpression}}]),e}(),Object(ne.a)(Ye.prototype,"condition",[ae.h],Object.getOwnPropertyDescriptor(Ye.prototype,"condition"),Ye.prototype),Je=Object(ne.a)(Ye.prototype,"conditionExpression",[ae.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(ne.a)(Ye.prototype,"connectionText",[ae.h],Object.getOwnPropertyDescriptor(Ye.prototype,"connectionText"),Ye.prototype),Ye),pt=function e(t){Object(ee.a)(this,e),this.expression=t},dt=new ce({builders:{graphBuilder:function(e){return new at(e)},nodeBuilder:(Xe={},Object(Ie.a)(Xe,Ze.SIMPLE,(function(e){return new ot(e)})),Object(Ie.a)(Xe,Ze.MACRO,(function(e){return new ut(e)})),Object(Ie.a)(Xe,Ze.ENCLOSING,(function(e){return new lt(e)})),Object(Ie.a)(Xe,Ze.INITIAL,(function(e){return new ct(e)})),Xe),connectionBuilder:function(e){return new st(e)}}}),ht=dt.addNode(Ze.INITIAL,{x:72,y:60}),ft=dt.addNode(Ze.MACRO,{x:261,y:170}),bt=new re(ht,ft,(function(e){return new st(e,{name:"Emergency",condition:new pt("I1 & I2")})}));dt.globalData.workingFamilyTransitions.push(bt.data),[ht,ft,dt.addNode(Ze.ENCLOSING,{x:441,y:316}),dt.addNode(Ze.SIMPLE,{x:211,y:410}),dt.addNode(Ze.SIMPLE,{x:441,y:500})].forEach((function(e,t){return null===e||void 0===e?void 0:e.setName("S".concat(t+1))})),ht.data.family=nt.A,ft.data.family=nt.D;var mt=o.a.createContext(null);function gt(){var e=o.a.useContext(mt);if(!e)throw Error("useStore should be used inside a Store provider.");return e}function yt(){return o.a.createElement(mt.Provider,{value:dt},o.a.createElement("div",{className:"row",style:{background:"rgba(250,250,250,0.7)",height:"100%"}},o.a.createElement("div",{className:"col"},o.a.createElement(me,{items:Object.keys(dt.builders.nodeBuilder)}),o.a.createElement(dt.globalData.View,null)),o.a.createElement("div",{className:"col",style:{width:"0px",background:"rgba(250,250,250,0.7)",flex:"1 0 auto"}},o.a.createElement("div",{className:"row",style:{minHeight:0,flex:1}},o.a.createElement(E,null),o.a.createElement(q,null)),o.a.createElement(xe,null))))}n(108),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.b.add(i.a,i.b,i.c),l.a.render(o.a.createElement(yt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},93:function(e,t,n){e.exports=n(109)}},[[93,1,2]]]);
//# sourceMappingURL=main.8b21e06c.chunk.js.map