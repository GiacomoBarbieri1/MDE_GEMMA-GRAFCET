(this["webpackJsonpgemma-grafcet"]=this["webpackJsonpgemma-grafcet"]||[]).push([[0],{108:function(e,t,n){},109:function(e,t,n){"use strict";n.r(t);var i=n(45),a=n(64),r=n(0),o=n.n(r),c=n(11),l=n.n(c),u=n(21),s=n(12),p=n(26),d=n(57),h=n.n(d),f=n(27);function b(){var e=Object(p.a)(["\n  z-index: 1;\n  cursor: pointer;\n  position: absolute;\n  box-shadow: 0 1px 4px 1px #eee;\n  padding: 6px;\n  background: #fff;\n  border-radius: 6;\n  border: 1px solid #eee;\n"]);return b=function(){return e},e}var m=f.a.div(b()),g=Object(s.a)((function(e){var t=e.operation,n=ut(),i=o.a.useCallback((function(e,n){t.move(n.deltaX,n.deltaY)}),[t]),a=void 0!==n.selectingInputFor,r=a&&n.selectingInputFor.data.isValidInput(t),c=o.a.useCallback((function(e){console.log(t),a?r&&n.assignInput(t):n.selectNode(t)}),[n,t,a,r]),l=t.x,u=t.y,s=t.name;return o.a.createElement(h.a,{onDrag:i,position:{x:l,y:u},bounds:"parent"},o.a.createElement(m,{ref:function(e){null!==e&&t.setSize(e.getBoundingClientRect())},onClick:c,style:a?{cursor:r?"pointer":"not-allowed"}:void 0},"Layer ".concat(s)))})),y=n(16),v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:14,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:14,a=t+n;return"M".concat(e," ").concat(t," L").concat(e-i/2," ").concat(a," L").concat(e+i/2," ").concat(a," Z")},O=Object(s.a)((function(e){var t,n,i=e.connection,a=ut(),r=i.from,c=i.to,l=r.x+r.width/2,u=r.y+r.height/2,s=c.x+c.width/2,p=c.y+c.height/2,d=p-u,h=s-l;if(0===h)t=0,n=(p>u?1:-1)*c.height/2;else if(0===d)n=0,t=(s>l?1:-1)*c.width/2;else{var f=Math.abs(d/h),b=f>c.height/c.width?[c.height/2/f,c.height/2]:[c.width/2,c.width/2*f],m=Object(y.a)(b,2),g=m[0];n=(p>u?1:-1)*m[1],t=(s>l?1:-1)*g}var O=s-t,E=p-n,w=(l+s)/2,x=(u+p)/2,I=90+180*Math.atan2(p-u,s-l)/Math.PI;return o.a.createElement(o.a.Fragment,null,o.a.createElement("path",{style:{strokeWidth:2,stroke:"black"},d:"M".concat(l," ").concat(u," L").concat(s," ").concat(p),onClick:function(e){a.selectConnection(i)}}),o.a.createElement(j,{text:i.data.connectionText,x:w,y:x,onClick:function(e){return a.selectConnection(i)}}),o.a.createElement("path",{d:v(O,E),transform:"rotate(".concat(I," ").concat(O," ").concat(E,")")}))})),j=Object(s.a)((function(e){var t=e.text,n=e.x,i=e.y,a=e.rectFill,r=void 0===a?"#eee":a,c=e.padding,l=void 0===c?3:c,u=e.onClick,s=o.a.useState(null),p=Object(y.a)(s,2),d=p[0],h=p[1],f=o.a.useState(t),b=Object(y.a)(f,2),m=b[0],g=b[1],v=null===d||void 0===d?void 0:d.getBBox();return o.a.useEffect((function(){if(m!==t){var e=setTimeout((function(){return g(t)}),0);return function(){return clearTimeout(e)}}})),o.a.createElement(o.a.Fragment,null,void 0!==v&&o.a.createElement("rect",{width:v.width+2*l,height:v.height+2*l,x:n-v.width/2-l,y:i-v.height+l,fill:r,onClick:u}),o.a.createElement("text",{x:void 0!==v?n-v.width/2:n,y:i,fill:"black",ref:h,onClick:u},t))})),E=Object(s.a)((function(){var e=ut(),t=Object(u.a)(e.nodes.values());return o.a.createElement("div",{style:{position:"relative",border:"1px solid #eee",height:"auto",background:"#fff",margin:"10px",borderRadius:"6px",flex:1}},t.map((function(e){return console.log(e),o.a.createElement(g,{operation:e,key:e.key})})),o.a.createElement("svg",{style:{width:"100%",height:"100%"}},t.flatMap((function(e){return e.inputs})).map((function(e){return o.a.createElement(O,{connection:e,key:e.from.key+e.to.key})}))))})),w=n(41),x=n(40),I=n(48);var N={top:!1,right:!1,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1};function k(e){return Object.entries(e).reduce((function(e,t){var n=Object(y.a)(t,2),i=n[0],a=n[1];return void 0!==a&&(e[i]=a),e}),Object(I.a)({},N))}var C,L,S,z,F,A,T,D,P,M,R,_,B,V,W,G,H,K,U,Y,J,X,Z,$,q=Object(s.a)((function(){for(var e=ut(),t=Object(u.a)(e.nodes.values()),n=t.reduce((function(e,t){return t.inputs.forEach((function(n){var i=e.get(n.to);void 0===i&&(i=[],e.set(n.to,i)),i.push(t)})),e}),new Map),i=[],a=new Map(t.filter((function(e){var t=0!==e.data.length;return t||i.push(e),t})).map((function(e){return[e,e.data.length]}))),r=0;0!==a.size&&i.length!==r;){var c,l=Object(w.a)(i.slice(r));try{for(l.s();!(c=l.n()).done;){var s=c.value;r+=1;var p=n.get(s);if(void 0!==p){var d,h=Object(w.a)(p);try{for(h.s();!(d=h.n()).done;){var f=d.value,b=a.get(f);1===b?(a.delete(f),i.push(f)):a.set(f,b-1)}}catch(m){h.e(m)}finally{h.f()}}}}catch(m){l.e(m)}finally{l.f()}}return a.size,o.a.createElement(x.Resizable,{minWidth:200,defaultSize:{height:"auto",width:400},style:{position:"relative",background:"white",boxShadow:"0 1px 4px 1px #eee",border:"1px solid #eee"},enable:k({left:!0})},o.a.createElement("div",{style:{overflow:"auto",height:"100%",padding:"0 10px"}},o.a.createElement("pre",null,e.globalData.generateCode())))})),Q=n(10),ee=n(14),te=n(22),ne=(n(67),n(7)),ie=n(2),ae=n(157),re=function e(t,n,i){Object(ee.a)(this,e),this.from=t,this.to=n,this.data=void 0,this.data=i(this)},oe=(C=function(){function e(t,n){Object(ee.a)(this,e),this.graph=t,Object(Q.a)(this,"key",L,this),Object(Q.a)(this,"name",S,this),Object(Q.a)(this,"x",z,this),Object(Q.a)(this,"y",F,this),Object(Q.a)(this,"width",A,this),Object(Q.a)(this,"height",T,this),Object(Q.a)(this,"data",D,this),Object(Q.a)(this,"inputs",P,this),Object(Q.a)(this,"outputs",M,this),Object(Q.a)(this,"move",R,this),Object(Q.a)(this,"setSize",_,this),Object(Q.a)(this,"setName",B,this),this.key=n.key,this.name=n.name,this.x=n.x,this.y=n.y,this.data=n.dataBuilder(this)}return Object(te.a)(e,[{key:"addInput",value:function(e){this.inputs.push(e),e.from.outputs.push(e)}},{key:"addOutput",value:function(e){this.outputs.push(e),e.to.inputs.push(e)}},{key:"inputNodes",get:function(){return this.inputs.map((function(e){return e.from}))}},{key:"outputNodes",get:function(){return this.outputs.map((function(e){return e.to}))}}]),e}(),L=Object(ne.a)(C.prototype,"key",[ie.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=Object(ne.a)(C.prototype,"name",[ie.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=Object(ne.a)(C.prototype,"x",[ie.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=Object(ne.a)(C.prototype,"y",[ie.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=Object(ne.a)(C.prototype,"width",[ie.r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),T=Object(ne.a)(C.prototype,"height",[ie.r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),D=Object(ne.a)(C.prototype,"data",[ie.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=Object(ne.a)(C.prototype,"inputs",[ie.r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ie.r.array()}}),Object(ne.a)(C.prototype,"inputNodes",[ie.h],Object.getOwnPropertyDescriptor(C.prototype,"inputNodes"),C.prototype),M=Object(ne.a)(C.prototype,"outputs",[ie.r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ie.r.array()}}),Object(ne.a)(C.prototype,"outputNodes",[ie.h],Object.getOwnPropertyDescriptor(C.prototype,"outputNodes"),C.prototype),Object(ne.a)(C.prototype,"addInput",[ie.g],Object.getOwnPropertyDescriptor(C.prototype,"addInput"),C.prototype),Object(ne.a)(C.prototype,"addOutput",[ie.g],Object.getOwnPropertyDescriptor(C.prototype,"addOutput"),C.prototype),R=Object(ne.a)(C.prototype,"move",[ie.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){e.x+=t,e.y+=n}}}),_=Object(ne.a)(C.prototype,"setSize",[ie.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.width=t.width,e.height=t.height}}}),B=Object(ne.a)(C.prototype,"setName",[ie.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.name=t}}}),C),ce=(V=function(){function e(t){Object(ee.a)(this,e),this.builders=void 0,this.globalData=void 0,Object(Q.a)(this,"nodes",W,this),Object(Q.a)(this,"selectedNode",G,this),Object(Q.a)(this,"selectedConnection",H,this),Object(Q.a)(this,"selectingInputFor",K,this),Object(Q.a)(this,"selectNode",U,this),Object(Q.a)(this,"selectConnection",Y,this),Object(Q.a)(this,"addNode",J,this),Object(Q.a)(this,"selectingInput",X,this),Object(Q.a)(this,"assignInput",Z,this),Object(Q.a)(this,"_selectingInputKeyListener",$,this),this.builders=t.builders,this.globalData=t.builders.graphBuilder(this)}return Object(te.a)(e,[{key:"removeConnection",value:function(e){e===this.selectedConnection&&(this.selectedConnection=void 0),e.from.outputs.remove(e),e.to.inputs.remove(e)}}]),Object(te.a)(e,[{key:"removeNode",value:function(e){if(e===this.selectedNode&&(this.selectedNode=void 0),this.nodes.delete(e.key)){var t,n=Object(w.a)(e.inputs);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.from.outputs.remove(i)}}catch(c){n.e(c)}finally{n.f()}var a,r=Object(w.a)(e.outputs);try{for(r.s();!(a=r.n()).done;){var o=a.value;o.to.inputs.remove(o)}}catch(c){r.e(c)}finally{r.f()}}}}]),e}(),Object(ne.a)(V.prototype,"removeConnection",[ie.g],Object.getOwnPropertyDescriptor(V.prototype,"removeConnection"),V.prototype),W=Object(ne.a)(V.prototype,"nodes",[ie.r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ie.r.map({})}}),G=Object(ne.a)(V.prototype,"selectedNode",[ie.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=Object(ne.a)(V.prototype,"selectedConnection",[ie.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=Object(ne.a)(V.prototype,"selectingInputFor",[ie.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=Object(ne.a)(V.prototype,"selectNode",[ie.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.selectedNode=t}}}),Y=Object(ne.a)(V.prototype,"selectConnection",[ie.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.selectedConnection=t}}}),J=Object(ne.a)(V.prototype,"addNode",[ie.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){if(e.globalData.canAddNode(t)){var i=e.builders.nodeBuilder[t];if(void 0!==i){var a,r,o=new oe(e,{dataBuilder:i,key:Object(ae.a)(),name:t,x:null!==(a=null===n||void 0===n?void 0:n.x)&&void 0!==a?a:100,y:null!==(r=null===n||void 0===n?void 0:n.y)&&void 0!==r?r:100});return e.nodes.set(o.key,o),o}}}}}),Object(ne.a)(V.prototype,"removeNode",[ie.g],Object.getOwnPropertyDescriptor(V.prototype,"removeNode"),V.prototype),X=Object(ne.a)(V.prototype,"selectingInput",[ie.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.selectingInputFor=t,window.addEventListener("keyup",e._selectingInputKeyListener)}}}),Z=Object(ne.a)(V.prototype,"assignInput",[ie.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=new re(e.selectingInputFor,t,e.builders.connectionBuilder);return n.from.addOutput(n),e.selectingInputFor=void 0,e.selectedConnection=n,n}}}),$=Object(ne.a)(V.prototype,"_selectingInputKeyListener",[ie.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){"Escape"===t.key&&(e.selectingInputFor=void 0,window.removeEventListener("keyup",e._selectingInputKeyListener))}}}),V),le=n(49),ue=n(149),se=n(145),pe=n(110),de=n(158),he=n(82);function fe(){var e=Object(p.a)(["\n  overflow-y: scroll;\n  height: 100%;\n  margin: 0;\n  padding: 0px 10px 25px;\n\n  .group {\n    padding-left: 10px;\n    padding-top: 3px;\n    padding-bottom: 3px;\n    border-top: 2px solid #eee;\n    margin-top: 6px;\n    .MuiListItemText-primary {\n      font-weight: bold;\n    }\n  }\n  .nested {\n    padding-left: 25px;\n    padding-top: 0px;\n    padding-bottom: 0px;\n  }\n"]);return fe=function(){return e},e}var be=f.a.ul(fe()),me=Object(s.a)((function(e){var t=e.items,n=ut();return o.a.createElement(he.a,{disableDragging:!0,maxWidth:300,minWidth:200,style:{position:"relative",maxHeight:"100%",display:"flex",flexDirection:"column"},enableResizing:k({right:!0})},o.a.createElement("input",{type:"text"}),o.a.createElement(be,null,o.a.createElement(se.a,{component:"nav"},Array.isArray(t)?t.map((function(e){return o.a.createElement(pe.a,{button:!0,key:e,className:"nested",onClick:function(){n.addNode(e)}},o.a.createElement(de.a,{primary:e}))})):Object.entries(t).map((function(e){var t=Object(y.a)(e,2),n=t[0],i=t[1];return o.a.createElement(ge,{key:n,name:n,list:i})})))))})),ge=Object(s.a)((function(e){var t=e.name,n=e.list,i=o.a.useState(!0),a=Object(y.a)(i,2),r=a[0],c=a[1],l=ut();return o.a.createElement(o.a.Fragment,null,o.a.createElement(pe.a,{button:!0,onClick:function(){return c(!r)},className:"group"},o.a.createElement(de.a,{primary:t}),o.a.createElement(le.a,{icon:r?"chevron-up":"chevron-down"})),o.a.createElement(ue.a,{in:r,timeout:"auto",unmountOnExit:!0},o.a.createElement(se.a,{component:"div",disablePadding:!0},n.map((function(e){return o.a.createElement(pe.a,{button:!0,key:e,className:"nested",onClick:function(){l.addNode(e)}},o.a.createElement(de.a,{primary:e}))})))))}));function ye(){var e=Object(p.a)(["\n  padding-bottom: 10px;\n  thead {\n    font-size: 1.1em;\n    font-weight: bolder;\n  }\n  tr td {\n    padding: 0;\n  }\n  tr td:first-child {\n    padding-right: 15px;\n    height: 32px;\n  }\n  tr td:last-child {\n    margin: auto auto;\n    padding-left: 10px;\n    text-align: center;\n    align-self: center;\n  }\n"]);return ye=function(){return e},e}var ve=Object(s.a)((function(e){var t=e.children;return o.a.createElement(je,null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("td",null,"Property"),o.a.createElement("td",null,"Value"))),o.a.createElement("tbody",null,t))})),Oe=Object(s.a)((function(e){var t=e.self,n=ut(),i=t.inputs.length>=t.data.nInputs,a=void 0!==n.selectingInputFor;return o.a.createElement(ve,null,0!==t.data.nInputs&&o.a.createElement("tr",null,o.a.createElement("td",null,"Inputs"),o.a.createElement("td",null,t.inputs.map((function(e){return o.a.createElement("div",{onClick:function(){return n.selectConnection(e)},key:e.from.key,style:{padding:"5px"}},e.from.name)})),!i&&o.a.createElement("div",{onClick:function(){return n.selectingInput(t)},style:a?{background:"#eee"}:{cursor:"pointer"}},"Add Transition"))),Object.entries(t.data.spec).map((function(e){var n=Object(y.a)(e,2),i=n[0],a=n[1];return o.a.createElement("tr",{key:i},o.a.createElement("td",null,i),o.a.createElement("td",null,o.a.createElement(a.plotField,{name:i,model:t.data})))})))})),je=f.a.table(ye()),Ee=n(152),we=n(156),xe=Object(s.a)((function(){var e,t=ut();if(null!=t.selectedNode){var n=t.selectedNode,i=t.selectedConnection;e=o.a.createElement("div",{style:{overflow:"auto",maxHeight:"100%",maxWidth:"100%"},key:t.selectedNode.key,className:"row"},o.a.createElement("div",{style:{padding:"15px"}},o.a.createElement("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"}},o.a.createElement(we.a,{type:"text",value:n.name,onChange:function(e){return n.setName(e.target.value)},style:{width:"150px"}}),o.a.createElement(Ee.a,{onClick:function(e){return t.removeNode(n)}},o.a.createElement(le.a,{icon:"trash-alt",color:"#000"}))),o.a.createElement(Oe,{self:t.selectedNode})),o.a.createElement("div",{style:{padding:"15px"}},void 0!==i&&o.a.createElement("div",{className:"col"},o.a.createElement("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"}},o.a.createElement("div",null,"".concat(i.from.name," -> ").concat(i.to.name)),o.a.createElement(Ee.a,{onClick:function(e){return t.removeConnection(i)}},o.a.createElement(le.a,{icon:"trash-alt",color:"#000"}))),o.a.createElement(i.data.ConnectionView,null))))}else e=o.a.createElement("div",{style:{width:"150px"},className:"center"},"Not Selected");return o.a.createElement(x.Resizable,{minHeight:200,defaultSize:{height:280,width:"auto"},style:{position:"relative",background:"white",boxShadow:"0 1px 4px 1px #eee",border:"1px solid #eee"},enable:k({top:!0})},e)})),Ie=n(37),Ne=n(53),ke=n(52),Ce=function e(){Object(ee.a)(this,e)};Ce.textOrEmpty=function(e,t){return e?t:""};var Le=function(e,t){var n=t.isNested;return"".concat(e.map((function(e,t){return"\n".concat(0===t?"IF":"ELSEIF"," ").concat(e.condition.expression," THEN\n  State:=").concat(e.to.id,";  ").concat(n?"\n  Entry:=TRUE;":"")})).join("\n")).concat(0===e.length?"":"\nEND_IF")},Se=function(e){return"IF Entry THEN\n  ".concat(e.name,"(Initialization:=ENTRY);\n  Entry:=FALSE;\nEND_IF\n").concat(e.name,"(Initialization:=ENTRY);")},ze=function(e){var t;return"\n// Variable declaration\nVAR\n".concat(e.steps.filter((function(e){return e.type===Ke.ENCLOSING||e.type===Ke.MACRO})).map((function(e){return"  ".concat(e.name,":").concat(e.name,"_FB;")})).join("\n"),"\n\n  State:UINT:=").concat(null===(t=e.initialStep)||void 0===t?void 0:t.id,";\n  Entry:BOOL:=TRUE;\nEND_VAR\n\n// Program behavior\nCASE State OF\n  ").concat(e.steps.map((function(e){return"\n  ".concat(e.id,": //State ").concat(e.name,"\n    ").concat(function(){switch(e.type){case Ke.ENCLOSING:return function(e){return"".concat(Se(e),"\n\n").concat(Le(e.transitions,{isNested:!0}))}(e);case Ke.INITIAL:case Ke.SIMPLE:return function(e){return Le(e.transitions,{isNested:!1})}(e);case Ke.MACRO:return function(e){var t=e.transitions;return"\n".concat(Se(e),"\n\n").concat(t.map((function(n,i){return"".concat(0===i?"IF":"ELSEIF"," ").concat(n.condition.expression).concat(t.length-e.innerTransitionsLength<=i?" AND ".concat(e.name,".Complete"):""," THEN\n  State:=").concat(n.to.id,";\n  Entry:=TRUE;")})).join("\n")).concat(Ce.textOrEmpty(0!==t.length,"\nEND_IF"))}(e)}}().replace(/\n/g,"\n    "),"\n  ")})).join("\n"),"\nEND_CASE\n")},Fe=n(111),Ae=n(154),Te=n(153),De=n(155),Pe=n(17);function Me(){var e=Object(p.a)(["\n  min-height: 38px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]);return Me=function(){return e},e}var Re,_e,Be,Ve,We,Ge,He,Ke,Ue=f.a.div(Me()),Ye=function e(t){var n=this;if(Object(ee.a)(this,e),this.choices=void 0,this.default=void 0,this.isObservableMap=function(){return"function"===typeof n.choices.keys&&"number"===typeof n.choices.size&&Symbol.toStringTag in n.choices},this.mobxProp=function(){return void 0!==n.default?Pe.a.optional(Pe.a.string,n.default):Pe.a.string},this.plotField=Object(s.a)((function(e){var t,i=e.name,a=e.model;return(t=n.isObservableMap()?Array.from(n.choices.keys()):Object.keys(n.choices)).length>3?o.a.createElement(De.a,{value:a[i],onChange:function(e){a[i]=e.target.value},autoWidth:!0},t.map((function(e){return o.a.createElement(Te.a,{key:e,value:e},e)}))):o.a.createElement(Ue,{key:i},o.a.createElement(Ae.a,{size:"small",color:"primary","aria-label":"outlined primary button group"},t.map((function(e){var t=e===a[i]?{background:"#3f51b5",color:"white"}:{};return o.a.createElement(Fe.a,{key:e,onClick:function(){a[i]=e},style:t},e)}))))})),this.choices=t.choices,this.default=t.default,this.isObservableMap()&&null===this.choices.get(this.default))throw Error("")},Je=(n(160),function e(t){var n=this;if(Object(ee.a)(this,e),this.default=void 0,this.maxLength=void 0,this.minLength=void 0,this.mobxProp=function(){return void 0!==n.default?Pe.a.optional(Pe.a.string,n.default):Pe.a.string},this.plotField=Object(s.a)((function(e){var t=e.name,i=e.model,a=o.a.useState(i[t]),r=Object(y.a)(a,2),c=r[0],l=r[1],u=i.errors;return o.a.createElement(we.a,{key:t,value:c,inputProps:{style:{textAlign:"center"}},onChange:function(e){var a=e.target.value;l(a),void 0!==n.maxLength&&a.length>n.maxLength?u.set(t,"Max length exceded."):void 0!==n.minLength&&a.length<n.minLength?u.set(t,"Min length exceded."):(u.delete(t),i[t]=a)},error:void 0!==u.get(t),fullWidth:!0,style:{width:"140px"}})})),this.default=t.default,this.maxLength=t.maxLength,this.minLength=t.minLength,"string"===typeof this.default){if(void 0!==this.minLength&&this.default.length<this.minLength)throw Error("");if(void 0!==this.maxLength&&this.default.length>this.maxLength)throw Error("")}});!function(e){e.ENCLOSING="ENCLOSING",e.INITIAL="INITIAL",e.MACRO="MACRO",e.SIMPLE="SIMPLE"}(Ke||(Ke={}));var Xe,Ze=(Re=function(){function e(t){var n=this;Object(ee.a)(this,e),this.graph=t,this.workingFamilyTransitions=[],this.signals=[],this.generateCode=function(){return ze(n)}}return Object(te.a)(e,[{key:"canAddNode",value:function(e){return e!==Ke.INITIAL||!this._hasInitialStep()}},{key:"_hasInitialStep",value:function(){return Object(u.a)(this.graph.nodes.values()).some((function(e){return e.data.type===Ke.INITIAL}))}},{key:"steps",get:function(){return Object(u.a)(this.graph.nodes.values()).map((function(e){return e.data}))}},{key:"initialStep",get:function(){return this.steps.find((function(e){return e.type===Ke.INITIAL}))}}]),e}(),Object(ne.a)(Re.prototype,"steps",[ie.h],Object.getOwnPropertyDescriptor(Re.prototype,"steps"),Re.prototype),Object(ne.a)(Re.prototype,"initialStep",[ie.h],Object.getOwnPropertyDescriptor(Re.prototype,"initialStep"),Re.prototype),Re);!function(e){e.F="F",e.D="D",e.A="A"}(Xe||(Xe={}));var $e=(_e=function(){function e(t,n){var i,a,r;Object(ee.a)(this,e),this.node=t,this.nInputs=Number.POSITIVE_INFINITY,this.errors=ie.r.map(),Object(Q.a)(this,"description",Be,this),Object(Q.a)(this,"family",Ve,this),this.spec={family:new Ye({default:Xe.F,choices:(r=Object.values(Xe),r.reduce((function(e,t){return e[t.toString()]=t,e}),{}))}),description:new Je({default:""})},this.description=null!==(i=null===n||void 0===n?void 0:n.description)&&void 0!==i?i:"",this.family=null!==(a=null===n||void 0===n?void 0:n.family)&&void 0!==a?a:Xe.F}return Object(te.a)(e,[{key:"isValidInput",value:function(e){return this.node.inputNodes.every((function(t){return t.data!==e.data}))}},{key:"name",get:function(){return this.node.name}},{key:"automationSystem",get:function(){return this.node.graph.globalData}},{key:"_transitions",get:function(){return this.node.outputs.map((function(e){return e.data}))}},{key:"innerTransitionsLength",get:function(){return this._transitions.length}},{key:"transitions",get:function(){return this.family===Xe.F?this.automationSystem.workingFamilyTransitions.concat(this._transitions):this._transitions}},{key:"id",get:function(){return this.automationSystem.steps.indexOf(this)+1}}]),e}(),Object(ne.a)(_e.prototype,"name",[ie.h],Object.getOwnPropertyDescriptor(_e.prototype,"name"),_e.prototype),Be=Object(ne.a)(_e.prototype,"description",[ie.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ve=Object(ne.a)(_e.prototype,"family",[ie.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(ne.a)(_e.prototype,"_transitions",[ie.h],Object.getOwnPropertyDescriptor(_e.prototype,"_transitions"),_e.prototype),Object(ne.a)(_e.prototype,"innerTransitionsLength",[ie.h],Object.getOwnPropertyDescriptor(_e.prototype,"innerTransitionsLength"),_e.prototype),Object(ne.a)(_e.prototype,"transitions",[ie.h],Object.getOwnPropertyDescriptor(_e.prototype,"transitions"),_e.prototype),Object(ne.a)(_e.prototype,"id",[ie.h],Object.getOwnPropertyDescriptor(_e.prototype,"id"),_e.prototype),_e),qe=function(e){Object(Ne.a)(n,e);var t=Object(ke.a)(n);function n(){var e;Object(ee.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).type=Ke.SIMPLE,e}return n}($e),Qe=function(e){Object(Ne.a)(n,e);var t=Object(ke.a)(n);function n(){var e;Object(ee.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).type=Ke.INITIAL,e}return n}($e),et=function(e){Object(Ne.a)(n,e);var t=Object(ke.a)(n);function n(){var e;Object(ee.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).type=Ke.ENCLOSING,e}return n}($e),tt=function(e){Object(Ne.a)(n,e);var t=Object(ke.a)(n);function n(){var e;Object(ee.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).type=Ke.MACRO,e}return n}($e),nt=(We=function(){function e(t,n){var i,a,r=this;Object(ee.a)(this,e),this.connection=t,this.name=void 0,Object(Q.a)(this,"conditionExpression",Ge,this),this.errors=ie.r.map(),this.spec={conditionExpression:new Je({default:""})},this.ConnectionView=Object(s.a)((function(){return o.a.createElement(ve,null,Object.entries(r.spec).map((function(e){var t=Object(y.a)(e,2),n=t[0],i=t[1];return o.a.createElement("tr",{key:n},o.a.createElement("td",null,n),o.a.createElement("td",null,o.a.createElement(i.plotField,{name:n,model:r})))})))})),this.name=null!==(i=null===n||void 0===n?void 0:n.name)&&void 0!==i?i:"",this.conditionExpression=null!==(a=null===n||void 0===n?void 0:n.condition.expression)&&void 0!==a?a:this.spec.conditionExpression.default,console.log(this.conditionExpression)}return Object(te.a)(e,[{key:"condition",get:function(){return new it(this.conditionExpression)}}]),Object(te.a)(e,[{key:"from",get:function(){return this.connection.from.data}},{key:"to",get:function(){return this.connection.to.data}},{key:"connectionText",get:function(){return this.conditionExpression}}]),e}(),Object(ne.a)(We.prototype,"condition",[ie.h],Object.getOwnPropertyDescriptor(We.prototype,"condition"),We.prototype),Ge=Object(ne.a)(We.prototype,"conditionExpression",[ie.r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(ne.a)(We.prototype,"connectionText",[ie.h],Object.getOwnPropertyDescriptor(We.prototype,"connectionText"),We.prototype),We),it=function e(t){Object(ee.a)(this,e),this.expression=t},at=new ce({builders:{graphBuilder:function(e){return new Ze(e)},nodeBuilder:(He={},Object(Ie.a)(He,Ke.SIMPLE,(function(e){return new qe(e)})),Object(Ie.a)(He,Ke.MACRO,(function(e){return new tt(e)})),Object(Ie.a)(He,Ke.ENCLOSING,(function(e){return new et(e)})),Object(Ie.a)(He,Ke.INITIAL,(function(e){return new Qe(e)})),He),connectionBuilder:function(e){return new nt(e)}}}),rt=at.addNode(Ke.INITIAL,{x:72,y:60}),ot=at.addNode(Ke.MACRO,{x:261,y:170}),ct=new re(rt,ot,(function(e){return new nt(e,{name:"Emergency",condition:new it("I1 & I2")})}));at.globalData.workingFamilyTransitions.push(ct.data),[rt,ot,at.addNode(Ke.ENCLOSING,{x:441,y:316}),at.addNode(Ke.SIMPLE,{x:211,y:410}),at.addNode(Ke.SIMPLE,{x:441,y:500})].forEach((function(e,t){return null===e||void 0===e?void 0:e.setName("S".concat(t+1))})),rt.data.family=Xe.A,ot.data.family=Xe.D;var lt=o.a.createContext(null);function ut(){var e=o.a.useContext(lt);if(!e)throw Error("useStore should be used inside a Store provider.");return e}function st(){return o.a.createElement(lt.Provider,{value:at},o.a.createElement("div",{className:"row",style:{background:"rgba(250,250,250,0.7)",height:"100%"}},o.a.createElement(me,{items:Object.keys(at.builders.nodeBuilder)}),o.a.createElement("div",{className:"col",style:{width:"100%",background:"rgba(250,250,250,0.7)"}},o.a.createElement("div",{className:"row",style:{minHeight:0,flex:1}},o.a.createElement(E,null),o.a.createElement(q,null)),o.a.createElement(xe,null))))}n(108),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.b.add(a.a,a.b,a.c),l.a.render(o.a.createElement(st,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},93:function(e,t,n){e.exports=n(109)}},[[93,1,2]]]);
//# sourceMappingURL=main.3526849e.chunk.js.map